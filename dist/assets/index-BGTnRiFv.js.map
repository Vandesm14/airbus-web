{"version":3,"file":"index-BGTnRiFv.js","sources":["../../../node_modules/.pnpm/solid-js@1.8.21/node_modules/solid-js/dist/solid.js","../../../node_modules/.pnpm/solid-js@1.8.21/node_modules/solid-js/web/dist/web.js","../../../node_modules/.pnpm/jotai@2.9.3/node_modules/jotai/esm/vanilla.mjs","../../../node_modules/.pnpm/solid-jotai@0.2.2_jotai@2.9.3_solid-js@1.8.21/node_modules/solid-jotai/dist/chunk/XPRVX24J.js","../../../node_modules/.pnpm/solid-js@1.8.21/node_modules/solid-js/store/dist/store.js","../../../node_modules/.pnpm/solid-jotai@0.2.2_jotai@2.9.3_solid-js@1.8.21/node_modules/solid-jotai/dist/index/index.js","../../../node_modules/.pnpm/recordrtc@5.6.2/node_modules/recordrtc/RecordRTC.js","../../src/whisper/WhisperSTT.ts","../../src/lib/atoms.ts","../../src/lib/lib.ts","../../src/lib/hooks.ts","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/subscribable.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/utils.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/focusManager.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/thenable.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/retryer.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/removable.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/query.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/queryCache.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/mutation.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/queryClient.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../../node_modules/.pnpm/@tanstack+query-core@5.61.5/node_modules/@tanstack/query-core/build/modern/hydration.js","../../../node_modules/.pnpm/@tanstack+solid-query@5.61.5_solid-js@1.8.21/node_modules/@tanstack/solid-query/build/index.js","../../../node_modules/.pnpm/fast-deep-equal@3.1.3/node_modules/fast-deep-equal/index.js","../../src/lib/api.ts","../../src/Chatbox.tsx","../../src/lib/colors.ts","../../src/Canvas.tsx","../../src/lib/types.ts","../../src/StripBoard.tsx","../../../node_modules/.pnpm/@solid-primitives+storage@4.0.0_solid-js@1.8.21/node_modules/@solid-primitives/storage/dist/index/index.js","../../src/FreqSelector.tsx","../../src/Points.tsx","../../src/Flights.tsx","../../src/App.tsx","../../src/index.tsx"],"sourcesContent":["let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = (n + m) >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;\n      else if (cmp < 0) n = k - 1;\n      else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined,\n  done: false,\n  getContextId() {\n    return getContextId(this.context.count);\n  },\n  getNextContextId() {\n    return getContextId(this.context.count++);\n  }\n};\nfunction getContextId(count) {\n  const num = String(count),\n    len = num.length - 1;\n  return sharedConfig.context.id + (len ? String.fromCharCode(96 + len) : \"\") + num;\n}\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: sharedConfig.getNextContextId(),\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceConfig = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned\n      ? UNOWNED\n      : {\n          owned: null,\n          cleanups: null,\n          context: current ? current.context : null,\n          owner: current\n        },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);\n      else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(\n      () => {\n        fn ? fn() : untrack(onInvalidate);\n        fn = undefined;\n      },\n      undefined,\n      false,\n      0\n    ),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if ((arguments.length === 2 && typeof pFetcher === \"object\") || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = \"initialValue\" in options,\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = sharedConfig.getNextContextId();\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;\n    else if (sharedConfig.load && sharedConfig.has(id)) initP = sharedConfig.load(id);\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated)\n        queueMicrotask(() =>\n          options.onHydrated(key, {\n            value: v\n          })\n        );\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);\n          else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p =\n      initP !== NO_INIT\n        ? initP\n        : untrack(() =>\n            fetcher(lookup, {\n              value: value(),\n              refetching\n            })\n          );\n    if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"value\" in p) {\n      if (p.status === \"success\") loadEnd(pr, p.value, undefined, lookup);\n      else loadEnd(pr, undefined, castError(p.value), lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => (scheduled = false));\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(\n      v => loadEnd(p, v, undefined, lookup),\n      e => loadEnd(p, undefined, castError(e), lookup)\n    );\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));\n  else load(false);\n  return [\n    read,\n    {\n      refetch: load,\n      mutate: setValue\n    }\n  ];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(\n    () => {\n      if (!t || !t.fn)\n        t = requestCallback(\n          () => setDeferred(() => node.value),\n          timeout !== undefined\n            ? {\n                timeout\n              }\n            : undefined\n        );\n      return source();\n    },\n    undefined,\n    true\n  );\n  const [deferred, setDeferred] = createSignal(\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    options\n  );\n  updateComputation(node);\n  setDeferred(() =>\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n  );\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(\n    p => {\n      const v = source();\n      for (const [key, val] of subs.entries())\n        if (fn(key, v) !== fn(key, p)) {\n          for (const c of val.values()) {\n            c.state = STALE;\n            if (c.pure) Updates.push(c);\n            else Effects.push(c);\n          }\n        }\n      return v;\n    },\n    undefined,\n    true,\n    STALE\n  );\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if ((l = subs.get(key))) l.add(listener);\n      else subs.set(key, (l = new Set([listener])));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(\n      key,\n      Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n    );\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (!ExternalSourceConfig && Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    if (ExternalSourceConfig) return ExternalSourceConfig.untrack(fn);\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return prevValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null);\n  else if (Owner.cleanups === null) Owner.cleanups = [fn];\n  else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t =\n        Transition ||\n        (Transition = {\n          sources: new Set(),\n          effects: [],\n          promises: new Set(),\n          disposed: new Set(),\n          queue: new Set(),\n          running: true\n        });\n      t.done || (t.done = new Promise(res => (t.resolve = res)));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nconst [transPending, setTransPending] = /*@__PURE__*/ createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  let value;\n  return Owner && Owner.context && (value = Owner.context[context.id]) !== undefined\n    ? value\n    : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory, untrack = fn => fn()) {\n  if (ExternalSourceConfig) {\n    const { factory: oldFactory, untrack: oldUntrack } = ExternalSourceConfig;\n    ExternalSourceConfig = {\n      factory: (fn, trigger) => {\n        const oldSource = oldFactory(fn, trigger);\n        const source = factory(x => oldSource.track(x), trigger);\n        return {\n          track: x => source.track(x),\n          dispose() {\n            source.dispose();\n            oldSource.dispose();\n          }\n        };\n      },\n      untrack: fn => oldUntrack(() => untrack(fn))\n    };\n  } else {\n    ExternalSourceConfig = {\n      factory,\n      untrack\n    };\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);\n    else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current =\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || (!isComp && Transition.sources.has(node))) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);\n            else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;\n          else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false);\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(\n    node,\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    time\n  );\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner,\n    listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null);\n  else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];\n      else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];\n      else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceConfig && c.fn) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceConfig.factory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceConfig.factory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;\n  else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);\n    else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);\n    else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;\n  else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount))\n          runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;\n      else o.state = PENDING;\n      if (o.pure) Updates.push(o);\n      else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;\n  else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, (owner && owner.owner) || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects)\n    Effects.push({\n      fn() {\n        runErrors(error, fns, owner);\n      },\n      state: STALE\n    });\n  else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(\n      () =>\n        (res = untrack(() => {\n          Owner.context = {\n            ...Owner.context,\n            [id]: props.value\n          };\n          return children(() => props.children);\n        })),\n      undefined\n    );\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null);\n  else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler =\n        typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => (\"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub()));\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      newLen = newItems.length,\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newIndices, newIndicesNext, temp, tempdisposers, tempIndexes, start, end, newEnd, item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      } else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (\n          start = 0, end = Math.min(len, newLen);\n          start < end && items[start] === newItems[start];\n          start++\n        );\n        for (\n          end = len - 1, newEnd = newLen - 1;\n          end >= start && newEnd >= start && items[end] === newItems[newEnd];\n          end--, newEnd--\n        ) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, (len = newLen));\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [],\n      newLen = newItems.length;\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newLen; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newLen;\n      items = newItems.slice(0);\n      return (mapped = mapped.slice(0, len));\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || (!!s && $PROXY in s);\n    sources[i] = typeof s === \"function\" ? ((proxy = true), createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy(\n      {\n        get(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            const v = resolveSource(sources[i])[property];\n            if (v !== undefined) return v;\n          }\n        },\n        has(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            if (property in resolveSource(sources[i])) return true;\n          }\n          return false;\n        },\n        keys() {\n          const keys = [];\n          for (let i = 0; i < sources.length; i++)\n            keys.push(...Object.keys(resolveSource(sources[i])));\n          return [...new Set(keys)];\n        }\n      },\n      propTraps\n    );\n  }\n  const sourcesMap = {};\n  const defined = Object.create(null);\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = sourceKeys.length - 1; i >= 0; i--) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined[key]) {\n        defined[key] = desc.get\n          ? {\n              enumerable: true,\n              configurable: true,\n              get: resolveSources.bind((sourcesMap[key] = [desc.get.bind(source)]))\n            }\n          : desc.value !== undefined\n          ? desc\n          : undefined;\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) sources.push(desc.get.bind(source));\n          else if (desc.value !== undefined) sources.push(() => desc.value);\n        }\n      }\n    }\n  }\n  const target = {};\n  const definedKeys = Object.keys(defined);\n  for (let i = definedKeys.length - 1; i >= 0; i--) {\n    const key = definedKeys[i],\n      desc = defined[key];\n    if (desc && desc.get) Object.defineProperty(target, key, desc);\n    else target[key] = desc ? desc.value : undefined;\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy(\n        {\n          get(property) {\n            return k.includes(property) ? props[property] : undefined;\n          },\n          has(property) {\n            return k.includes(property) && property in props;\n          },\n          keys() {\n            return k.filter(property => property in props);\n          }\n        },\n        propTraps\n      );\n    });\n    res.push(\n      new Proxy(\n        {\n          get(property) {\n            return blocked.has(property) ? undefined : props[property];\n          },\n          has(property) {\n            return blocked.has(property) ? false : property in props;\n          },\n          keys() {\n            return Object.keys(props).filter(k => !blocked.has(k));\n          }\n        },\n        propTraps\n      )\n    );\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc =\n      !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc\n          ? (objects[objectIndex][propName] = desc.value)\n          : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc\n        ? (otherObject[propName] = desc.value)\n        : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        !sharedConfig.done && setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() =>\n      (Comp = comp())\n        ? untrack(() => {\n            if (false);\n            if (!ctx || sharedConfig.done) return Comp(props);\n            const c = sharedConfig.context;\n            setHydrateContext(ctx);\n            const r = Comp(props);\n            setHydrateContext(c);\n            return r;\n          })\n        : \"\"\n    );\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => (comp = () => mod.default)), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? sharedConfig.getNextContextId() : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => (keyed ? a === b : !a === !b)\n  });\n  return createMemo(\n    () => {\n      const c = condition();\n      if (c) {\n        const child = props.children;\n        const fn = typeof child === \"function\" && child.length > 0;\n        return fn\n          ? untrack(() =>\n              child(\n                keyed\n                  ? c\n                  : () => {\n                      if (!untrack(condition)) throw narrowedError(\"Show\");\n                      return props.when;\n                    }\n              )\n            )\n          : child;\n      }\n      return props.fallback;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(\n      () => {\n        let conds = conditions();\n        if (!Array.isArray(conds)) conds = [conds];\n        for (let i = 0; i < conds.length; i++) {\n          const c = conds[i].when;\n          if (c) {\n            keyed = !!conds[i].keyed;\n            return [i, c, conds[i]];\n          }\n        }\n        return [-1];\n      },\n      undefined,\n      {\n        equals\n      }\n    );\n  return createMemo(\n    () => {\n      const [index, when, cond] = evalConditions();\n      if (index < 0) return props.fallback;\n      const c = cond.children;\n      const fn = typeof c === \"function\" && c.length > 0;\n      return fn\n        ? untrack(() =>\n            c(\n              keyed\n                ? when\n                : () => {\n                    if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n                    return cond.when;\n                  }\n            )\n          )\n        : c;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load)\n    err = sharedConfig.load(sharedConfig.getContextId());\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(\n    () => {\n      let e;\n      if ((e = errored())) {\n        const f = props.fallback;\n        return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n      }\n      return catchError(() => props.children, setErrored);\n    },\n    undefined,\n    undefined\n  );\n}\n\nconst suspenseListEquals = (a, b) =>\n  a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = /* #__PURE__ */ createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(\n    prev => {\n      const reveal = props.revealOrder,\n        tail = props.tail,\n        { showContent = true, showFallback = true } = show ? show() : {},\n        reg = registry(),\n        reverse = reveal === \"backwards\";\n      if (reveal === \"together\") {\n        const all = reg.every(inFallback => !inFallback());\n        const res = reg.map(() => ({\n          showContent: all && showContent,\n          showFallback\n        }));\n        res.inFallback = !all;\n        return res;\n      }\n      let stop = false;\n      let inFallback = prev.inFallback;\n      const res = [];\n      for (let i = 0, len = reg.length; i < len; i++) {\n        const n = reverse ? len - i - 1 : i,\n          s = reg[n]();\n        if (!stop && !s) {\n          res[n] = {\n            showContent,\n            showFallback\n          };\n        } else {\n          const next = !stop;\n          if (next) inFallback = true;\n          res[n] = {\n            showContent: next,\n            showFallback: !tail || (next && tail === \"collapsed\") ? showFallback : false\n          };\n          stop = true;\n        }\n      }\n      if (!stop) inFallback = false;\n      res.inFallback = inFallback;\n      return res;\n    },\n    {\n      inFallback: false\n    }\n  );\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.getContextId();\n    let ref = sharedConfig.load(key);\n    if (ref) {\n      if (typeof ref !== \"object\" || ref.status !== \"success\") p = ref;\n      else sharedConfig.gather(key);\n    }\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(\n        () => {\n          if (sharedConfig.done) return set();\n          sharedConfig.gather(key);\n          setHydrateContext(ctx);\n          set();\n          setHydrateContext();\n        },\n        err => {\n          error = err;\n          set();\n        }\n      );\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return (flicker = undefined);\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            { showContent = true, showFallback = true } = show ? show() : {};\n          if ((!inFallback || (p && p !== \"$$f\")) && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"F\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport {\n  $DEVCOMP,\n  $PROXY,\n  $TRACK,\n  DEV,\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  batch,\n  cancelCallback,\n  catchError,\n  children,\n  createComponent,\n  createComputed,\n  createContext,\n  createDeferred,\n  createEffect,\n  createMemo,\n  createReaction,\n  createRenderEffect,\n  createResource,\n  createRoot,\n  createSelector,\n  createSignal,\n  createUniqueId,\n  enableExternalSource,\n  enableHydration,\n  enableScheduling,\n  equalFn,\n  from,\n  getListener,\n  getOwner,\n  indexArray,\n  lazy,\n  mapArray,\n  mergeProps,\n  observable,\n  on,\n  onCleanup,\n  onError,\n  onMount,\n  requestCallback,\n  resetErrorBoundaries,\n  runWithOwner,\n  sharedConfig,\n  splitProps,\n  startTransition,\n  untrack,\n  useContext,\n  useTransition\n};\n","import {\n  createRoot,\n  createRenderEffect,\n  untrack,\n  sharedConfig,\n  enableHydration,\n  getOwner,\n  createEffect,\n  runWithOwner,\n  createMemo,\n  createSignal,\n  onCleanup,\n  splitProps\n} from \"solid-js\";\nexport {\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  createComponent,\n  createRenderEffect as effect,\n  getOwner,\n  createMemo as memo,\n  mergeProps,\n  untrack\n} from \"solid-js\";\n\nconst booleans = [\n  \"allowfullscreen\",\n  \"async\",\n  \"autofocus\",\n  \"autoplay\",\n  \"checked\",\n  \"controls\",\n  \"default\",\n  \"disabled\",\n  \"formnovalidate\",\n  \"hidden\",\n  \"indeterminate\",\n  \"inert\",\n  \"ismap\",\n  \"loop\",\n  \"multiple\",\n  \"muted\",\n  \"nomodule\",\n  \"novalidate\",\n  \"open\",\n  \"playsinline\",\n  \"readonly\",\n  \"required\",\n  \"reversed\",\n  \"seamless\",\n  \"selected\"\n];\nconst Properties = /*#__PURE__*/ new Set([\n  \"className\",\n  \"value\",\n  \"readOnly\",\n  \"formNoValidate\",\n  \"isMap\",\n  \"noModule\",\n  \"playsInline\",\n  ...booleans\n]);\nconst ChildProperties = /*#__PURE__*/ new Set([\n  \"innerHTML\",\n  \"textContent\",\n  \"innerText\",\n  \"children\"\n]);\nconst Aliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? (a[tagName] ? a[\"$\"] : undefined) : a;\n}\nconst DelegatedEvents = /*#__PURE__*/ new Set([\n  \"beforeinput\",\n  \"click\",\n  \"dblclick\",\n  \"contextmenu\",\n  \"focusin\",\n  \"focusout\",\n  \"input\",\n  \"keydown\",\n  \"keyup\",\n  \"mousedown\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"pointerdown\",\n  \"pointermove\",\n  \"pointerout\",\n  \"pointerover\",\n  \"pointerup\",\n  \"touchend\",\n  \"touchmove\",\n  \"touchstart\"\n]);\nconst SVGElements = /*#__PURE__*/ new Set([\n  \"altGlyph\",\n  \"altGlyphDef\",\n  \"altGlyphItem\",\n  \"animate\",\n  \"animateColor\",\n  \"animateMotion\",\n  \"animateTransform\",\n  \"circle\",\n  \"clipPath\",\n  \"color-profile\",\n  \"cursor\",\n  \"defs\",\n  \"desc\",\n  \"ellipse\",\n  \"feBlend\",\n  \"feColorMatrix\",\n  \"feComponentTransfer\",\n  \"feComposite\",\n  \"feConvolveMatrix\",\n  \"feDiffuseLighting\",\n  \"feDisplacementMap\",\n  \"feDistantLight\",\n  \"feDropShadow\",\n  \"feFlood\",\n  \"feFuncA\",\n  \"feFuncB\",\n  \"feFuncG\",\n  \"feFuncR\",\n  \"feGaussianBlur\",\n  \"feImage\",\n  \"feMerge\",\n  \"feMergeNode\",\n  \"feMorphology\",\n  \"feOffset\",\n  \"fePointLight\",\n  \"feSpecularLighting\",\n  \"feSpotLight\",\n  \"feTile\",\n  \"feTurbulence\",\n  \"filter\",\n  \"font\",\n  \"font-face\",\n  \"font-face-format\",\n  \"font-face-name\",\n  \"font-face-src\",\n  \"font-face-uri\",\n  \"foreignObject\",\n  \"g\",\n  \"glyph\",\n  \"glyphRef\",\n  \"hkern\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"marker\",\n  \"mask\",\n  \"metadata\",\n  \"missing-glyph\",\n  \"mpath\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"set\",\n  \"stop\",\n  \"svg\",\n  \"switch\",\n  \"symbol\",\n  \"text\",\n  \"textPath\",\n  \"tref\",\n  \"tspan\",\n  \"use\",\n  \"view\",\n  \"vkern\"\n]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/ new Set([\n  \"html\",\n  \"base\",\n  \"head\",\n  \"link\",\n  \"meta\",\n  \"style\",\n  \"title\",\n  \"body\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"body\",\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"param\",\n  \"picture\",\n  \"portal\",\n  \"source\",\n  \"svg\",\n  \"math\",\n  \"canvas\",\n  \"noscript\",\n  \"script\",\n  \"del\",\n  \"ins\",\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  \"details\",\n  \"dialog\",\n  \"menu\",\n  \"summary\",\n  \"details\",\n  \"slot\",\n  \"template\",\n  \"acronym\",\n  \"applet\",\n  \"basefont\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"center\",\n  \"content\",\n  \"dir\",\n  \"font\",\n  \"frame\",\n  \"frameset\",\n  \"hgroup\",\n  \"image\",\n  \"keygen\",\n  \"marquee\",\n  \"menuitem\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"plaintext\",\n  \"rb\",\n  \"rtc\",\n  \"shadow\",\n  \"spacer\",\n  \"strike\",\n  \"tt\",\n  \"xmp\",\n  \"a\",\n  \"abbr\",\n  \"acronym\",\n  \"address\",\n  \"applet\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"basefont\",\n  \"bdi\",\n  \"bdo\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"center\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"content\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"dir\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"font\",\n  \"footer\",\n  \"form\",\n  \"frame\",\n  \"frameset\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"image\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"keygen\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"marquee\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"plaintext\",\n  \"portal\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"shadow\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"spacer\",\n  \"span\",\n  \"strike\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"tt\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\",\n  \"xmp\",\n  \"input\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\"\n]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? (bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart]) : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document\n      ? code()\n      : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE\n    ? () => untrack(() => document.importNode(node || (node = create()), true))\n    : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setProperty(node, name, value) {\n  if (isHydrating(node)) return;\n  node[name] = value;\n}\nfunction setAttribute(node, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(name);\n  else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttributeNS(namespace, name);\n  else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (isHydrating(node)) return;\n  if (value == null) node.removeAttribute(\"class\");\n  else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, (handler[0] = e => handlerFn.call(node, handler[1], e)));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return (nodeStyle.cssText = value);\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(\n      () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n    );\n  }\n  createRenderEffect(() => typeof props.ref === \"function\" && use(props.ref, node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  if (globalThis._$HY.done) return render(code, element, [...element.childNodes], options);\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = id => globalThis._$HY.r[id];\n  sharedConfig.has = id => id in globalThis._$HY.r;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  try {\n    gatherHydratable(element, options.renderId);\n    return render(code, element, [...element.childNodes], options);\n  } finally {\n    sharedConfig.context = null;\n  }\n}\nfunction getNextElement(template) {\n  let node,\n    key,\n    hydrating = isHydrating();\n  if (!hydrating || !(node = sharedConfig.registry.get((key = getHydrationKey())))) {\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (isHydrating(start)) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"$\") count++;\n        else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const { completed, events } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        events.shift();\n        eventHandler(e);\n      }\n      if (sharedConfig.done) {\n        sharedConfig.events = _$HY.events = null;\n        sharedConfig.completed = _$HY.completed = null;\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction isHydrating(node) {\n  return !!sharedConfig.context && !sharedConfig.done && (!node || node.isConnected);\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++)\n    node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (\n    (forceProp = prop.slice(0, 5) === \"prop:\") ||\n    (isChildProp = ChildProperties.has(prop)) ||\n    (!isSVG &&\n      ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop)))) ||\n    (isCE = node.nodeName.includes(\"-\"))\n  ) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (isHydrating(node)) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);\n    else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;\n    else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);\n    else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  if (sharedConfig.registry && sharedConfig.events) {\n    if (sharedConfig.events.find(([el, ev]) => ev === e)) return;\n  }\n  const key = `$$${e.type}`;\n  let node = (e.composedPath && e.composedPath()[0]) || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  const hydrating = isHydrating(parent);\n  if (hydrating) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();\n      else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = (multi && current[0] && current[0].parentNode) || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (hydrating) return current;\n    if (t === \"number\") {\n      value = value.toString();\n      if (value === current) return current;\n    }\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data !== value && (node.data = value);\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (hydrating) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => (current = insertExpression(parent, array, current, marker, true)));\n      return () => current;\n    }\n    if (hydrating) {\n      if (!array.length) return current;\n      if (marker === undefined) return (current = [...parent.childNodes]);\n      let node = array[0];\n      if (node.parentNode !== parent) return current;\n      const nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return (current = nodes);\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (hydrating && value.parentNode) return (current = multi ? [value] : value);\n    if (Array.isArray(current)) {\n      if (multi) return (current = cleanChildren(parent, current, marker, value));\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else;\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[normalized.length],\n      t;\n    if (item == null || item === true || item === false);\n    else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic =\n          normalizeIncomingArray(\n            normalized,\n            Array.isArray(item) ? item : [item],\n            Array.isArray(prev) ? prev : [prev]\n          ) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);\n      else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return (parent.textContent = \"\");\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i)\n          isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key))\n      sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  return sharedConfig.getNextContextId();\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nconst voidFn = () => undefined;\nconst RequestContext = Symbol();\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const { useShadow } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(\n    () => {\n      if (hydrating) getOwner().user = hydrating = false;\n      content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n      const el = mount();\n      if (el instanceof HTMLHeadElement) {\n        const [clean, setClean] = createSignal(false);\n        const cleanup = () => setClean(true);\n        createRoot(dispose => insert(el, () => (!clean() ? content() : dispose()), null));\n        onCleanup(cleanup);\n      } else {\n        const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n          renderRoot =\n            useShadow && container.attachShadow\n              ? container.attachShadow({\n                  mode: \"open\"\n                })\n              : container;\n        Object.defineProperty(container, \"_$host\", {\n          get() {\n            return marker.parentNode;\n          },\n          configurable: true\n        });\n        insert(renderRoot, content);\n        el.appendChild(container);\n        props.ref && props.ref(container);\n        onCleanup(() => el.removeChild(container));\n      }\n    },\n    undefined,\n    {\n      render: !hydrating\n    }\n  );\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport {\n  Aliases,\n  voidFn as Assets,\n  ChildProperties,\n  DOMElements,\n  DelegatedEvents,\n  Dynamic,\n  Hydration,\n  voidFn as HydrationScript,\n  NoHydration,\n  Portal,\n  Properties,\n  RequestContext,\n  SVGElements,\n  SVGNamespace,\n  addEventListener,\n  assign,\n  classList,\n  className,\n  clearDelegatedEvents,\n  delegateEvents,\n  dynamicProperty,\n  escape,\n  voidFn as generateHydrationScript,\n  voidFn as getAssets,\n  getHydrationKey,\n  getNextElement,\n  getNextMarker,\n  getNextMatch,\n  getPropAlias,\n  voidFn as getRequestEvent,\n  hydrate,\n  innerHTML,\n  insert,\n  isDev,\n  isServer,\n  render,\n  renderToStream,\n  renderToString,\n  renderToStringAsync,\n  resolveSSRNode,\n  runHydrationEvents,\n  setAttribute,\n  setAttributeNS,\n  setProperty,\n  spread,\n  ssr,\n  ssrAttribute,\n  ssrClassList,\n  ssrElement,\n  ssrHydrationKey,\n  ssrSpread,\n  ssrStyle,\n  style,\n  template,\n  use,\n  voidFn as useAssets\n};\n","let keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString() {\n      return (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && this.debugLabel ? key + \":\" + this.debugLabel : key;\n    }\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = defaultRead;\n    config.write = defaultWrite;\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\nfunction defaultRead(get) {\n  return get(this);\n}\nfunction defaultWrite(get, set, arg) {\n  return set(\n    this,\n    typeof arg === \"function\" ? arg(get(this)) : arg\n  );\n}\n\nconst isSelfAtom = (atom, a) => atom.unstable_is ? atom.unstable_is(a) : a === atom;\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst CONTINUE_PROMISE = Symbol(\n  (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" ? \"CONTINUE_PROMISE\" : \"\"\n);\nconst PENDING = \"pending\";\nconst FULFILLED = \"fulfilled\";\nconst REJECTED = \"rejected\";\nconst isContinuablePromise = (promise) => typeof promise === \"object\" && promise !== null && CONTINUE_PROMISE in promise;\nconst continuablePromiseMap = /* @__PURE__ */ new WeakMap();\nconst createContinuablePromise = (promise, abort, complete) => {\n  if (!continuablePromiseMap.has(promise)) {\n    let continuePromise;\n    const p = new Promise((resolve, reject) => {\n      let curr = promise;\n      const onFulfilled = (me) => (v) => {\n        if (curr === me) {\n          p.status = FULFILLED;\n          p.value = v;\n          resolve(v);\n          complete();\n        }\n      };\n      const onRejected = (me) => (e) => {\n        if (curr === me) {\n          p.status = REJECTED;\n          p.reason = e;\n          reject(e);\n          complete();\n        }\n      };\n      promise.then(onFulfilled(promise), onRejected(promise));\n      continuePromise = (nextPromise, nextAbort) => {\n        if (nextPromise) {\n          continuablePromiseMap.set(nextPromise, p);\n          curr = nextPromise;\n          nextPromise.then(onFulfilled(nextPromise), onRejected(nextPromise));\n          abort();\n          abort = nextAbort;\n        }\n      };\n    });\n    p.status = PENDING;\n    p[CONTINUE_PROMISE] = continuePromise;\n    continuablePromiseMap.set(promise, p);\n  }\n  return continuablePromiseMap.get(promise);\n};\nconst isPromiseLike = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst isAtomStateInitialized = (atomState) => \"v\" in atomState || \"e\" in atomState;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !(\"v\" in atomState)) {\n    throw new Error(\"[Bug] atom state is not initialized\");\n  }\n  return atomState.v;\n};\nconst getPendingContinuablePromise = (atomState) => {\n  const value = atomState.v;\n  if (isContinuablePromise(value) && value.status === PENDING) {\n    return value;\n  }\n  return null;\n};\nconst addPendingContinuablePromiseToDependency = (atom, promise, dependencyAtomState) => {\n  if (!dependencyAtomState.p.has(atom)) {\n    dependencyAtomState.p.add(atom);\n    promise.then(\n      () => {\n        dependencyAtomState.p.delete(atom);\n      },\n      () => {\n        dependencyAtomState.p.delete(atom);\n      }\n    );\n  }\n};\nconst addDependency = (pending, atom, atomState, a, aState) => {\n  var _a;\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a === atom) {\n    throw new Error(\"[Bug] atom cannot depend on itself\");\n  }\n  atomState.d.set(a, aState.n);\n  const continuablePromise = getPendingContinuablePromise(atomState);\n  if (continuablePromise) {\n    addPendingContinuablePromiseToDependency(atom, continuablePromise, aState);\n  }\n  (_a = aState.m) == null ? void 0 : _a.t.add(atom);\n  if (pending) {\n    addPendingDependent(pending, a, atom);\n  }\n};\nconst createPending = () => [/* @__PURE__ */ new Map(), /* @__PURE__ */ new Map(), /* @__PURE__ */ new Set()];\nconst addPendingAtom = (pending, atom, atomState) => {\n  if (!pending[0].has(atom)) {\n    pending[0].set(atom, /* @__PURE__ */ new Set());\n  }\n  pending[1].set(atom, atomState);\n};\nconst addPendingDependent = (pending, atom, dependent) => {\n  const dependents = pending[0].get(atom);\n  if (dependents) {\n    dependents.add(dependent);\n  }\n};\nconst getPendingDependents = (pending, atom) => pending[0].get(atom);\nconst addPendingFunction = (pending, fn) => {\n  pending[2].add(fn);\n};\nconst flushPending = (pending) => {\n  while (pending[1].size || pending[2].size) {\n    pending[0].clear();\n    const atomStates = new Set(pending[1].values());\n    pending[1].clear();\n    const functions = new Set(pending[2]);\n    pending[2].clear();\n    atomStates.forEach((atomState) => {\n      var _a;\n      return (_a = atomState.m) == null ? void 0 : _a.l.forEach((l) => l());\n    });\n    functions.forEach((fn) => fn());\n  }\n};\nconst buildStore = (getAtomState) => {\n  let debugMountedAtoms;\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    debugMountedAtoms = /* @__PURE__ */ new Set();\n  }\n  const setAtomStateValueOrPromise = (atom, atomState, valueOrPromise, abortPromise = () => {\n  }, completePromise = () => {\n  }) => {\n    const hasPrevValue = \"v\" in atomState;\n    const prevValue = atomState.v;\n    const pendingPromise = getPendingContinuablePromise(atomState);\n    if (isPromiseLike(valueOrPromise)) {\n      if (pendingPromise) {\n        if (pendingPromise !== valueOrPromise) {\n          pendingPromise[CONTINUE_PROMISE](valueOrPromise, abortPromise);\n          ++atomState.n;\n        }\n      } else {\n        const continuablePromise = createContinuablePromise(\n          valueOrPromise,\n          abortPromise,\n          completePromise\n        );\n        if (continuablePromise.status === PENDING) {\n          for (const a of atomState.d.keys()) {\n            addPendingContinuablePromiseToDependency(\n              atom,\n              continuablePromise,\n              getAtomState(a, atomState)\n            );\n          }\n        }\n        atomState.v = continuablePromise;\n        delete atomState.e;\n      }\n    } else {\n      if (pendingPromise) {\n        pendingPromise[CONTINUE_PROMISE](\n          Promise.resolve(valueOrPromise),\n          abortPromise\n        );\n      }\n      atomState.v = valueOrPromise;\n      delete atomState.e;\n    }\n    if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n      ++atomState.n;\n    }\n  };\n  const readAtomState = (pending, atom, atomState, force) => {\n    if (!(force == null ? void 0 : force(atom)) && isAtomStateInitialized(atomState)) {\n      if (atomState.m) {\n        return atomState;\n      }\n      if (Array.from(atomState.d).every(\n        ([a, n]) => (\n          // Recursively, read the atom state of the dependency, and\n          // check if the atom epoch number is unchanged\n          readAtomState(pending, a, getAtomState(a, atomState), force).n === n\n        )\n      )) {\n        return atomState;\n      }\n    }\n    atomState.d.clear();\n    let isSync = true;\n    const getter = (a) => {\n      if (isSelfAtom(atom, a)) {\n        const aState2 = getAtomState(a, atomState);\n        if (!isAtomStateInitialized(aState2)) {\n          if (hasInitialValue(a)) {\n            setAtomStateValueOrPromise(a, aState2, a.init);\n          } else {\n            throw new Error(\"no atom init\");\n          }\n        }\n        return returnAtomValue(aState2);\n      }\n      const aState = readAtomState(\n        pending,\n        a,\n        getAtomState(a, atomState),\n        force\n      );\n      if (isSync) {\n        addDependency(pending, atom, atomState, a, aState);\n      } else {\n        const pending2 = createPending();\n        addDependency(pending2, atom, atomState, a, aState);\n        mountDependencies(pending2, atom, atomState);\n        flushPending(pending2);\n      }\n      return returnAtomValue(aState);\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              return writeAtom(atom, ...args);\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    try {\n      const valueOrPromise = atom.read(getter, options);\n      setAtomStateValueOrPromise(\n        atom,\n        atomState,\n        valueOrPromise,\n        () => controller == null ? void 0 : controller.abort(),\n        () => {\n          if (atomState.m) {\n            const pending2 = createPending();\n            mountDependencies(pending2, atom, atomState);\n            flushPending(pending2);\n          }\n        }\n      );\n      return atomState;\n    } catch (error) {\n      delete atomState.v;\n      atomState.e = error;\n      ++atomState.n;\n      return atomState;\n    } finally {\n      isSync = false;\n    }\n  };\n  const readAtom = (atom) => returnAtomValue(readAtomState(void 0, atom, getAtomState(atom)));\n  const getDependents = (pending, atom, atomState) => {\n    var _a, _b;\n    const dependents = /* @__PURE__ */ new Map();\n    for (const a of ((_a = atomState.m) == null ? void 0 : _a.t) || []) {\n      dependents.set(a, getAtomState(a, atomState));\n    }\n    for (const atomWithPendingContinuablePromise of atomState.p) {\n      dependents.set(\n        atomWithPendingContinuablePromise,\n        getAtomState(atomWithPendingContinuablePromise, atomState)\n      );\n    }\n    (_b = getPendingDependents(pending, atom)) == null ? void 0 : _b.forEach((dependent) => {\n      dependents.set(dependent, getAtomState(dependent, atomState));\n    });\n    return dependents;\n  };\n  const recomputeDependents = (pending, atom, atomState) => {\n    const topsortedAtoms = [];\n    const markedAtoms = /* @__PURE__ */ new Set();\n    const visit = (a, aState) => {\n      if (markedAtoms.has(a)) {\n        return;\n      }\n      markedAtoms.add(a);\n      for (const [d, s] of getDependents(pending, a, aState)) {\n        if (a !== d) {\n          visit(d, s);\n        }\n      }\n      topsortedAtoms.push([a, aState, aState.n]);\n    };\n    visit(atom, atomState);\n    const changedAtoms = /* @__PURE__ */ new Set([atom]);\n    const isMarked = (a) => markedAtoms.has(a);\n    for (let i = topsortedAtoms.length - 1; i >= 0; --i) {\n      const [a, aState, prevEpochNumber] = topsortedAtoms[i];\n      let hasChangedDeps = false;\n      for (const dep of aState.d.keys()) {\n        if (dep !== a && changedAtoms.has(dep)) {\n          hasChangedDeps = true;\n          break;\n        }\n      }\n      if (hasChangedDeps) {\n        readAtomState(pending, a, aState, isMarked);\n        mountDependencies(pending, a, aState);\n        if (prevEpochNumber !== aState.n) {\n          addPendingAtom(pending, a, aState);\n          changedAtoms.add(a);\n        }\n      }\n      markedAtoms.delete(a);\n    }\n  };\n  const writeAtomState = (pending, atom, atomState, ...args) => {\n    const getter = (a) => returnAtomValue(readAtomState(pending, a, getAtomState(a, atomState)));\n    const setter = (a, ...args2) => {\n      const aState = getAtomState(a, atomState);\n      let r;\n      if (isSelfAtom(atom, a)) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const hasPrevValue = \"v\" in aState;\n        const prevValue = aState.v;\n        const v = args2[0];\n        setAtomStateValueOrPromise(a, aState, v);\n        mountDependencies(pending, a, aState);\n        if (!hasPrevValue || !Object.is(prevValue, aState.v)) {\n          addPendingAtom(pending, a, aState);\n          recomputeDependents(pending, a, aState);\n        }\n      } else {\n        r = writeAtomState(pending, a, aState, ...args2);\n      }\n      flushPending(pending);\n      return r;\n    };\n    const result = atom.write(getter, setter, ...args);\n    return result;\n  };\n  const writeAtom = (atom, ...args) => {\n    const pending = createPending();\n    const result = writeAtomState(pending, atom, getAtomState(atom), ...args);\n    flushPending(pending);\n    return result;\n  };\n  const mountDependencies = (pending, atom, atomState) => {\n    if (atomState.m && !getPendingContinuablePromise(atomState)) {\n      for (const a of atomState.d.keys()) {\n        if (!atomState.m.d.has(a)) {\n          const aMounted = mountAtom(pending, a, getAtomState(a, atomState));\n          aMounted.t.add(atom);\n          atomState.m.d.add(a);\n        }\n      }\n      for (const a of atomState.m.d || []) {\n        if (!atomState.d.has(a)) {\n          atomState.m.d.delete(a);\n          const aMounted = unmountAtom(pending, a, getAtomState(a, atomState));\n          aMounted == null ? void 0 : aMounted.t.delete(atom);\n        }\n      }\n    }\n  };\n  const mountAtom = (pending, atom, atomState) => {\n    if (!atomState.m) {\n      readAtomState(pending, atom, atomState);\n      for (const a of atomState.d.keys()) {\n        const aMounted = mountAtom(pending, a, getAtomState(a, atomState));\n        aMounted.t.add(atom);\n      }\n      atomState.m = {\n        l: /* @__PURE__ */ new Set(),\n        d: new Set(atomState.d.keys()),\n        t: /* @__PURE__ */ new Set()\n      };\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        debugMountedAtoms.add(atom);\n      }\n      if (isActuallyWritableAtom(atom) && atom.onMount) {\n        const mounted = atomState.m;\n        const { onMount } = atom;\n        addPendingFunction(pending, () => {\n          const onUnmount = onMount(\n            (...args) => writeAtomState(pending, atom, atomState, ...args)\n          );\n          if (onUnmount) {\n            mounted.u = onUnmount;\n          }\n        });\n      }\n    }\n    return atomState.m;\n  };\n  const unmountAtom = (pending, atom, atomState) => {\n    if (atomState.m && !atomState.m.l.size && !Array.from(atomState.m.t).some(\n      (a) => {\n        var _a;\n        return (_a = getAtomState(a, atomState).m) == null ? void 0 : _a.d.has(atom);\n      }\n    )) {\n      const onUnmount = atomState.m.u;\n      if (onUnmount) {\n        addPendingFunction(pending, onUnmount);\n      }\n      delete atomState.m;\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        debugMountedAtoms.delete(atom);\n      }\n      for (const a of atomState.d.keys()) {\n        const aMounted = unmountAtom(pending, a, getAtomState(a, atomState));\n        aMounted == null ? void 0 : aMounted.t.delete(atom);\n      }\n      const pendingPromise = getPendingContinuablePromise(atomState);\n      if (pendingPromise) {\n        pendingPromise[CONTINUE_PROMISE](void 0, () => {\n        });\n      }\n      return void 0;\n    }\n    return atomState.m;\n  };\n  const subscribeAtom = (atom, listener) => {\n    const pending = createPending();\n    const atomState = getAtomState(atom);\n    const mounted = mountAtom(pending, atom, atomState);\n    flushPending(pending);\n    const listeners = mounted.l;\n    listeners.add(listener);\n    return () => {\n      listeners.delete(listener);\n      const pending2 = createPending();\n      unmountAtom(pending2, atom, atomState);\n      flushPending(pending2);\n    };\n  };\n  const unstable_derive = (fn) => buildStore(...fn(getAtomState));\n  const store = {\n    get: readAtom,\n    set: writeAtom,\n    sub: subscribeAtom,\n    unstable_derive\n  };\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    const devStore = {\n      // store dev methods (these are tentative and subject to change without notice)\n      dev4_get_internal_weak_map: () => ({\n        get: (atom) => {\n          const atomState = getAtomState(atom);\n          if (atomState.n === 0) {\n            return void 0;\n          }\n          return atomState;\n        }\n      }),\n      dev4_get_mounted_atoms: () => debugMountedAtoms,\n      dev4_restore_atoms: (values) => {\n        const pending = createPending();\n        for (const [atom, value] of values) {\n          if (hasInitialValue(atom)) {\n            const atomState = getAtomState(atom);\n            const hasPrevValue = \"v\" in atomState;\n            const prevValue = atomState.v;\n            setAtomStateValueOrPromise(atom, atomState, value);\n            mountDependencies(pending, atom, atomState);\n            if (!hasPrevValue || !Object.is(prevValue, atomState.v)) {\n              addPendingAtom(pending, atom, atomState);\n              recomputeDependents(pending, atom, atomState);\n            }\n          }\n        }\n        flushPending(pending);\n      }\n    };\n    Object.assign(store, devStore);\n  }\n  return store;\n};\nconst createStore = () => {\n  const atomStateMap = /* @__PURE__ */ new WeakMap();\n  const getAtomState = (atom) => {\n    let atomState = atomStateMap.get(atom);\n    if (!atomState) {\n      atomState = { d: /* @__PURE__ */ new Map(), p: /* @__PURE__ */ new Set(), n: 0 };\n      atomStateMap.set(atom, atomState);\n    }\n    return atomState;\n  };\n  return buildStore(getAtomState);\n};\nlet defaultStore;\nconst getDefaultStore = () => {\n  if (!defaultStore) {\n    defaultStore = createStore();\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      globalThis.__JOTAI_DEFAULT_STORE__ || (globalThis.__JOTAI_DEFAULT_STORE__ = defaultStore);\n      if (globalThis.__JOTAI_DEFAULT_STORE__ !== defaultStore) {\n        console.warn(\n          \"Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044\"\n        );\n      }\n    }\n  }\n  return defaultStore;\n};\n\nexport { atom, createStore, getDefaultStore };\n","import { createComponent } from 'solid-js/web';\nimport { createContext, useContext } from 'solid-js';\nimport { getDefaultStore, createStore } from 'jotai/vanilla';\n\n// src/Provider.tsx\nvar StoreContext = createContext(void 0);\nfunction useStore(options) {\n  const store = useContext(StoreContext);\n  return options?.store || store || getDefaultStore();\n}\nvar Provider = (props) => {\n  let storeRef;\n  if (!props.store && !storeRef)\n    storeRef = createStore();\n  return createComponent(StoreContext.Provider, {\n    get value() {\n      return props.store || storeRef;\n    },\n    get children() {\n      return props.children;\n    }\n  });\n};\n\n// src/useSetAtom.ts\nfunction useSetAtom(atom, options) {\n  const store = useStore(options);\n  function setAtom(...args) {\n    return store.set(atom, ...args);\n  }\n  return setAtom;\n}\n\nexport { Provider, useSetAtom, useStore };\n","import { $PROXY, $TRACK, getListener, batch, createSignal } from \"solid-js\";\n\nconst $RAW = Symbol(\"store-raw\"),\n  $NODE = Symbol(\"store-node\"),\n  $HAS = Symbol(\"store-has\"),\n  $SELF = Symbol(\"store-self\");\nfunction wrap$1(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: (p = new Proxy(value, proxyTraps$1))\n    });\n    if (!Array.isArray(value)) {\n      const keys = Object.keys(value),\n        desc = Object.getOwnPropertyDescriptors(value);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const prop = keys[i];\n        if (desc[prop].get) {\n          Object.defineProperty(value, prop, {\n            enumerable: desc[prop].enumerable,\n            get: desc[prop].get.bind(p)\n          });\n        }\n      }\n    }\n  }\n  return p;\n}\nfunction isWrappable(obj) {\n  let proto;\n  return (\n    obj != null &&\n    typeof obj === \"object\" &&\n    (obj[$PROXY] ||\n      !(proto = Object.getPrototypeOf(obj)) ||\n      proto === Object.prototype ||\n      Array.isArray(obj))\n  );\n}\nfunction unwrap(item, set = new Set()) {\n  let result, unwrapped, v, prop;\n  if ((result = item != null && item[$RAW])) return result;\n  if (!isWrappable(item) || set.has(item)) return item;\n  if (Array.isArray(item)) {\n    if (Object.isFrozen(item)) item = item.slice(0);\n    else set.add(item);\n    for (let i = 0, l = item.length; i < l; i++) {\n      v = item[i];\n      if ((unwrapped = unwrap(v, set)) !== v) item[i] = unwrapped;\n    }\n  } else {\n    if (Object.isFrozen(item)) item = Object.assign({}, item);\n    else set.add(item);\n    const keys = Object.keys(item),\n      desc = Object.getOwnPropertyDescriptors(item);\n    for (let i = 0, l = keys.length; i < l; i++) {\n      prop = keys[i];\n      if (desc[prop].get) continue;\n      v = item[prop];\n      if ((unwrapped = unwrap(v, set)) !== v) item[prop] = unwrapped;\n    }\n  }\n  return item;\n}\nfunction getNodes(target, symbol) {\n  let nodes = target[symbol];\n  if (!nodes)\n    Object.defineProperty(target, symbol, {\n      value: (nodes = Object.create(null))\n    });\n  return nodes;\n}\nfunction getNode(nodes, property, value) {\n  if (nodes[property]) return nodes[property];\n  const [s, set] = createSignal(value, {\n    equals: false,\n    internal: true\n  });\n  s.$ = set;\n  return (nodes[property] = s);\n}\nfunction proxyDescriptor$1(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || !desc.configurable || property === $PROXY || property === $NODE)\n    return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  return desc;\n}\nfunction trackSelf(target) {\n  getListener() && getNode(getNodes(target, $NODE), $SELF)();\n}\nfunction ownKeys(target) {\n  trackSelf(target);\n  return Reflect.ownKeys(target);\n}\nconst proxyTraps$1 = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      if (\n        getListener() &&\n        (typeof value !== \"function\" || target.hasOwnProperty(property)) &&\n        !(desc && desc.get)\n      )\n        value = getNode(nodes, property, value)();\n    }\n    return isWrappable(value) ? wrap$1(value) : value;\n  },\n  has(target, property) {\n    if (\n      property === $RAW ||\n      property === $PROXY ||\n      property === $TRACK ||\n      property === $NODE ||\n      property === $HAS ||\n      property === \"__proto__\"\n    )\n      return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set() {\n    return true;\n  },\n  deleteProperty() {\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor$1\n};\nfunction setProperty(state, property, value, deleting = false) {\n  if (!deleting && state[property] === value) return;\n  const prev = state[property],\n    len = state.length;\n  if (value === undefined) {\n    delete state[property];\n    if (state[$HAS] && state[$HAS][property] && prev !== undefined) state[$HAS][property].$();\n  } else {\n    state[property] = value;\n    if (state[$HAS] && state[$HAS][property] && prev === undefined) state[$HAS][property].$();\n  }\n  let nodes = getNodes(state, $NODE),\n    node;\n  if ((node = getNode(nodes, property, prev))) node.$(() => value);\n  if (Array.isArray(state) && state.length !== len) {\n    for (let i = state.length; i < len; i++) (node = nodes[i]) && node.$();\n    (node = getNode(nodes, \"length\", len)) && node.$(state.length);\n  }\n  (node = nodes[$SELF]) && node.$();\n}\nfunction mergeStoreNode(state, value) {\n  const keys = Object.keys(value);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    setProperty(state, key, value[key]);\n  }\n}\nfunction updateArray(current, next) {\n  if (typeof next === \"function\") next = next(current);\n  next = unwrap(next);\n  if (Array.isArray(next)) {\n    if (current === next) return;\n    let i = 0,\n      len = next.length;\n    for (; i < len; i++) {\n      const value = next[i];\n      if (current[i] !== value) setProperty(current, i, value);\n    }\n    setProperty(current, \"length\", len);\n  } else mergeStoreNode(current, next);\n}\nfunction updatePath(current, path, traversed = []) {\n  let part,\n    prev = current;\n  if (path.length > 1) {\n    part = path.shift();\n    const partType = typeof part,\n      isArray = Array.isArray(current);\n    if (Array.isArray(part)) {\n      for (let i = 0; i < part.length; i++) {\n        updatePath(current, [part[i]].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"function\") {\n      for (let i = 0; i < current.length; i++) {\n        if (part(current[i], i)) updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"object\") {\n      const { from = 0, to = current.length - 1, by = 1 } = part;\n      for (let i = from; i <= to; i += by) {\n        updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (path.length > 1) {\n      updatePath(current[part], path, [part].concat(traversed));\n      return;\n    }\n    prev = current[part];\n    traversed = [part].concat(traversed);\n  }\n  let value = path[0];\n  if (typeof value === \"function\") {\n    value = value(prev, traversed);\n    if (value === prev) return;\n  }\n  if (part === undefined && value == undefined) return;\n  value = unwrap(value);\n  if (part === undefined || (isWrappable(prev) && isWrappable(value) && !Array.isArray(value))) {\n    mergeStoreNode(prev, value);\n  } else setProperty(current, part, value);\n}\nfunction createStore(...[store, options]) {\n  const unwrappedStore = unwrap(store || {});\n  const isArray = Array.isArray(unwrappedStore);\n  const wrappedStore = wrap$1(unwrappedStore);\n  function setStore(...args) {\n    batch(() => {\n      isArray && args.length === 1\n        ? updateArray(unwrappedStore, args[0])\n        : updatePath(unwrappedStore, args);\n    });\n  }\n  return [wrappedStore, setStore];\n}\n\nfunction proxyDescriptor(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (\n    !desc ||\n    desc.get ||\n    desc.set ||\n    !desc.configurable ||\n    property === $PROXY ||\n    property === $NODE\n  )\n    return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  desc.set = v => (target[$PROXY][property] = v);\n  return desc;\n}\nconst proxyTraps = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      const isFunction = typeof value === \"function\";\n      if (getListener() && (!isFunction || target.hasOwnProperty(property)) && !(desc && desc.get))\n        value = getNode(nodes, property, value)();\n      else if (value != null && isFunction && value === Array.prototype[property]) {\n        return (...args) => batch(() => Array.prototype[property].apply(receiver, args));\n      }\n    }\n    return isWrappable(value) ? wrap(value) : value;\n  },\n  has(target, property) {\n    if (\n      property === $RAW ||\n      property === $PROXY ||\n      property === $TRACK ||\n      property === $NODE ||\n      property === $HAS ||\n      property === \"__proto__\"\n    )\n      return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set(target, property, value) {\n    batch(() => setProperty(target, property, unwrap(value)));\n    return true;\n  },\n  deleteProperty(target, property) {\n    batch(() => setProperty(target, property, undefined, true));\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor\n};\nfunction wrap(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: (p = new Proxy(value, proxyTraps))\n    });\n    const keys = Object.keys(value),\n      desc = Object.getOwnPropertyDescriptors(value);\n    const proto = Object.getPrototypeOf(value);\n    const isClass =\n      value !== null &&\n      typeof value === \"object\" &&\n      !Array.isArray(value) &&\n      proto !== Object.prototype;\n    if (isClass) {\n      const descriptors = Object.getOwnPropertyDescriptors(proto);\n      keys.push(...Object.keys(descriptors));\n      Object.assign(desc, descriptors);\n    }\n    for (let i = 0, l = keys.length; i < l; i++) {\n      const prop = keys[i];\n      if (isClass && prop === \"constructor\") continue;\n      if (desc[prop].get) {\n        const get = desc[prop].get.bind(p);\n        Object.defineProperty(value, prop, {\n          get,\n          configurable: true\n        });\n      }\n      if (desc[prop].set) {\n        const og = desc[prop].set,\n          set = v => batch(() => og.call(p, v));\n        Object.defineProperty(value, prop, {\n          set,\n          configurable: true\n        });\n      }\n    }\n  }\n  return p;\n}\nfunction createMutable(state, options) {\n  const unwrappedStore = unwrap(state || {});\n  const wrappedStore = wrap(unwrappedStore);\n  return wrappedStore;\n}\nfunction modifyMutable(state, modifier) {\n  batch(() => modifier(unwrap(state)));\n}\n\nconst $ROOT = Symbol(\"store-root\");\nfunction applyState(target, parent, property, merge, key) {\n  const previous = parent[property];\n  if (target === previous) return;\n  const isArray = Array.isArray(target);\n  if (\n    property !== $ROOT &&\n    (!isWrappable(target) ||\n      !isWrappable(previous) ||\n      isArray !== Array.isArray(previous) ||\n      (key && target[key] !== previous[key]))\n  ) {\n    setProperty(parent, property, target);\n    return;\n  }\n  if (isArray) {\n    if (\n      target.length &&\n      previous.length &&\n      (!merge || (key && target[0] && target[0][key] != null))\n    ) {\n      let i, j, start, end, newEnd, item, newIndicesNext, keyVal;\n      for (\n        start = 0, end = Math.min(previous.length, target.length);\n        start < end &&\n        (previous[start] === target[start] ||\n          (key && previous[start] && target[start] && previous[start][key] === target[start][key]));\n        start++\n      ) {\n        applyState(target[start], previous, start, merge, key);\n      }\n      const temp = new Array(target.length),\n        newIndices = new Map();\n      for (\n        end = previous.length - 1, newEnd = target.length - 1;\n        end >= start &&\n        newEnd >= start &&\n        (previous[end] === target[newEnd] ||\n          (key && previous[start] && target[start] && previous[end][key] === target[newEnd][key]));\n        end--, newEnd--\n      ) {\n        temp[newEnd] = previous[end];\n      }\n      if (start > newEnd || start > end) {\n        for (j = start; j <= newEnd; j++) setProperty(previous, j, target[j]);\n        for (; j < target.length; j++) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        }\n        if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n        return;\n      }\n      newIndicesNext = new Array(newEnd + 1);\n      for (j = newEnd; j >= start; j--) {\n        item = target[j];\n        keyVal = key && item ? item[key] : item;\n        i = newIndices.get(keyVal);\n        newIndicesNext[j] = i === undefined ? -1 : i;\n        newIndices.set(keyVal, j);\n      }\n      for (i = start; i <= end; i++) {\n        item = previous[i];\n        keyVal = key && item ? item[key] : item;\n        j = newIndices.get(keyVal);\n        if (j !== undefined && j !== -1) {\n          temp[j] = previous[i];\n          j = newIndicesNext[j];\n          newIndices.set(keyVal, j);\n        }\n      }\n      for (j = start; j < target.length; j++) {\n        if (j in temp) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        } else setProperty(previous, j, target[j]);\n      }\n    } else {\n      for (let i = 0, len = target.length; i < len; i++) {\n        applyState(target[i], previous, i, merge, key);\n      }\n    }\n    if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n    return;\n  }\n  const targetKeys = Object.keys(target);\n  for (let i = 0, len = targetKeys.length; i < len; i++) {\n    applyState(target[targetKeys[i]], previous, targetKeys[i], merge, key);\n  }\n  const previousKeys = Object.keys(previous);\n  for (let i = 0, len = previousKeys.length; i < len; i++) {\n    if (target[previousKeys[i]] === undefined) setProperty(previous, previousKeys[i], undefined);\n  }\n}\nfunction reconcile(value, options = {}) {\n  const { merge, key = \"id\" } = options,\n    v = unwrap(value);\n  return state => {\n    if (!isWrappable(state) || !isWrappable(v)) return v;\n    const res = applyState(\n      v,\n      {\n        [$ROOT]: state\n      },\n      $ROOT,\n      merge,\n      key\n    );\n    return res === undefined ? state : res;\n  };\n}\nconst producers = new WeakMap();\nconst setterTraps = {\n  get(target, property) {\n    if (property === $RAW) return target;\n    const value = target[property];\n    let proxy;\n    return isWrappable(value)\n      ? producers.get(value) ||\n          (producers.set(value, (proxy = new Proxy(value, setterTraps))), proxy)\n      : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined, true);\n    return true;\n  }\n};\nfunction produce(fn) {\n  return state => {\n    if (isWrappable(state)) {\n      let proxy;\n      if (!(proxy = producers.get(state))) {\n        producers.set(state, (proxy = new Proxy(state, setterTraps)));\n      }\n      fn(proxy);\n    }\n    return state;\n  };\n}\n\nconst DEV = undefined;\n\nexport { $RAW, DEV, createMutable, createStore, modifyMutable, produce, reconcile, unwrap };\n","import { useStore, useSetAtom } from '../chunk/XPRVX24J.js';\nexport { Provider, useSetAtom, useStore } from '../chunk/XPRVX24J.js';\nexport { atom, createStore } from 'jotai/vanilla';\nimport { createResource, onCleanup } from 'solid-js';\nimport { createStore, unwrap, reconcile } from 'solid-js/store';\n\nfunction createDeepSignal(value) {\n  const [store, setStore] = createStore({\n    value\n  });\n  return [\n    () => store.value,\n    (v) => {\n      const unwrapped = unwrap(store.value);\n      typeof v === \"function\" && (v = v(unwrapped));\n      setStore(\"value\", reconcile(v));\n      return store.value;\n    }\n  ];\n}\n\n// src/useAtomValue.ts\nfunction isPromise(x) {\n  return x instanceof Promise;\n}\nfunction useAtomValue(atom2, options) {\n  const store = useStore(options);\n  const initial = store.get(atom2);\n  if (isPromise(initial)) {\n    const [atomValue2, { refetch }] = createResource(() => store.get(atom2), { storage: createDeepSignal });\n    const unsub2 = store.sub(atom2, () => refetch());\n    onCleanup(() => unsub2());\n    return atomValue2;\n  }\n  const [atomValue, setAtomValue] = createDeepSignal(initial);\n  const unsub = store.sub(atom2, () => {\n    const nextValue = store.get(atom2);\n    setAtomValue(() => nextValue);\n  });\n  onCleanup(() => unsub());\n  return atomValue;\n}\n\n// src/useAtom.ts\nfunction useAtom(atom2, options) {\n  return [\n    useAtomValue(atom2, options),\n    // We do wrong type assertion here, which results in throwing an error.\n    useSetAtom(atom2, options)\n  ];\n}\n\nexport { useAtom, useAtomValue };\n","'use strict';\r\n\r\n// Last time updated: 2021-03-09 3:20:22 AM UTC\r\n\r\n// ________________\r\n// RecordRTC v5.6.2\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/RecordRTC\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\n// ____________\r\n// RecordRTC.js\r\n\r\n/**\r\n * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. \r\n * @summary Record audio, video or screen inside the browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTC\r\n * @class\r\n * @example\r\n * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {\r\n *     type: 'video', // audio or video or gif or canvas\r\n *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc\r\n * });\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction RecordRTC(mediaStream, config) {\r\n    if (!mediaStream) {\r\n        throw 'First parameter is required.';\r\n    }\r\n\r\n    config = config || {\r\n        type: 'video'\r\n    };\r\n\r\n    config = new RecordRTCConfiguration(mediaStream, config);\r\n\r\n    // a reference to user's recordRTC object\r\n    var self = this;\r\n\r\n    function startRecording(config2) {\r\n        if (!config.disableLogs) {\r\n            console.log('RecordRTC version: ', self.version);\r\n        }\r\n\r\n        if (!!config2) {\r\n            // allow users to set options using startRecording method\r\n            // config2 is similar to main \"config\" object (second parameter over RecordRTC constructor)\r\n            config = new RecordRTCConfiguration(mediaStream, config2);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('started recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder.record();\r\n\r\n            setState('recording');\r\n\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n            return self;\r\n        }\r\n\r\n        initRecorder(function() {\r\n            if (self.recordingDuration) {\r\n                handleRecordingDuration();\r\n            }\r\n        });\r\n\r\n        return self;\r\n    }\r\n\r\n    function initRecorder(initCallback) {\r\n        if (initCallback) {\r\n            config.initCallback = function() {\r\n                initCallback();\r\n                initCallback = config.initCallback = null; // recorder.initRecorder should be call-backed once.\r\n            };\r\n        }\r\n\r\n        var Recorder = new GetRecorderType(mediaStream, config);\r\n\r\n        mediaRecorder = new Recorder(mediaStream, config);\r\n        mediaRecorder.record();\r\n\r\n        setState('recording');\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Initialized recorderType:', mediaRecorder.constructor.name, 'for output-type:', config.type);\r\n        }\r\n    }\r\n\r\n    function stopRecording(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'paused') {\r\n            self.resumeRecording();\r\n\r\n            setTimeout(function() {\r\n                stopRecording(callback);\r\n            }, 1);\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording' && !config.disableLogs) {\r\n            console.warn('Recording state should be: \"recording\", however current state is: ', self.state);\r\n        }\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Stopped recording ' + config.type + ' stream.');\r\n        }\r\n\r\n        if (config.type !== 'gif') {\r\n            mediaRecorder.stop(_callback);\r\n        } else {\r\n            mediaRecorder.stop();\r\n            _callback();\r\n        }\r\n\r\n        setState('stopped');\r\n\r\n        function _callback(__blob) {\r\n            if (!mediaRecorder) {\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, '');\r\n                } else {\r\n                    callback('');\r\n                }\r\n                return;\r\n            }\r\n\r\n            Object.keys(mediaRecorder).forEach(function(key) {\r\n                if (typeof mediaRecorder[key] === 'function') {\r\n                    return;\r\n                }\r\n\r\n                self[key] = mediaRecorder[key];\r\n            });\r\n\r\n            var blob = mediaRecorder.blob;\r\n\r\n            if (!blob) {\r\n                if (__blob) {\r\n                    mediaRecorder.blob = blob = __blob;\r\n                } else {\r\n                    throw 'Recording failed.';\r\n                }\r\n            }\r\n\r\n            if (blob && !config.disableLogs) {\r\n                console.log(blob.type, '->', bytesToSize(blob.size));\r\n            }\r\n\r\n            if (callback) {\r\n                var url;\r\n\r\n                try {\r\n                    url = URL.createObjectURL(blob);\r\n                } catch (e) {}\r\n\r\n                if (typeof callback.call === 'function') {\r\n                    callback.call(self, url);\r\n                } else {\r\n                    callback(url);\r\n                }\r\n            }\r\n\r\n            if (!config.autoWriteToDisk) {\r\n                return;\r\n            }\r\n\r\n            getDataURL(function(dataURL) {\r\n                var parameter = {};\r\n                parameter[config.type + 'Blob'] = dataURL;\r\n                DiskStorage.Store(parameter);\r\n            });\r\n        }\r\n    }\r\n\r\n    function pauseRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'recording') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to pause the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('paused');\r\n\r\n        mediaRecorder.pause();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Paused recording.');\r\n        }\r\n    }\r\n\r\n    function resumeRecording() {\r\n        if (!mediaRecorder) {\r\n            warningLog();\r\n            return;\r\n        }\r\n\r\n        if (self.state !== 'paused') {\r\n            if (!config.disableLogs) {\r\n                console.warn('Unable to resume the recording. Recording state: ', self.state);\r\n            }\r\n            return;\r\n        }\r\n\r\n        setState('recording');\r\n\r\n        // not all libs have this method yet\r\n        mediaRecorder.resume();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Resumed recording.');\r\n        }\r\n    }\r\n\r\n    function readFile(_blob) {\r\n        postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n    }\r\n\r\n    function getDataURL(callback, _mediaRecorder) {\r\n        if (!callback) {\r\n            throw 'Pass a callback function over getDataURL.';\r\n        }\r\n\r\n        var blob = _mediaRecorder ? _mediaRecorder.blob : (mediaRecorder || {}).blob;\r\n\r\n        if (!blob) {\r\n            if (!config.disableLogs) {\r\n                console.warn('Blob encoder did not finish its job yet.');\r\n            }\r\n\r\n            setTimeout(function() {\r\n                getDataURL(callback, _mediaRecorder);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (typeof Worker !== 'undefined' && !navigator.mozGetUserMedia) {\r\n            var webWorker = processInWebWorker(readFile);\r\n\r\n            webWorker.onmessage = function(event) {\r\n                callback(event.data);\r\n            };\r\n\r\n            webWorker.postMessage(blob);\r\n        } else {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(blob);\r\n            reader.onload = function(event) {\r\n                callback(event.target.result);\r\n            };\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            try {\r\n                var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                    'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n                ], {\r\n                    type: 'application/javascript'\r\n                }));\r\n\r\n                var worker = new Worker(blob);\r\n                URL.revokeObjectURL(blob);\r\n                return worker;\r\n            } catch (e) {}\r\n        }\r\n    }\r\n\r\n    function handleRecordingDuration(counter) {\r\n        counter = counter || 0;\r\n\r\n        if (self.state === 'paused') {\r\n            setTimeout(function() {\r\n                handleRecordingDuration(counter);\r\n            }, 1000);\r\n            return;\r\n        }\r\n\r\n        if (self.state === 'stopped') {\r\n            return;\r\n        }\r\n\r\n        if (counter >= self.recordingDuration) {\r\n            stopRecording(self.onRecordingStopped);\r\n            return;\r\n        }\r\n\r\n        counter += 1000; // 1-second\r\n\r\n        setTimeout(function() {\r\n            handleRecordingDuration(counter);\r\n        }, 1000);\r\n    }\r\n\r\n    function setState(state) {\r\n        if (!self) {\r\n            return;\r\n        }\r\n\r\n        self.state = state;\r\n\r\n        if (typeof self.onStateChanged.call === 'function') {\r\n            self.onStateChanged.call(self, state);\r\n        } else {\r\n            self.onStateChanged(state);\r\n        }\r\n    }\r\n\r\n    var WARNING = 'It seems that recorder is destroyed or \"startRecording\" is not invoked for ' + config.type + ' recorder.';\r\n\r\n    function warningLog() {\r\n        if (config.disableLogs === true) {\r\n            return;\r\n        }\r\n\r\n        console.warn(WARNING);\r\n    }\r\n\r\n    var mediaRecorder;\r\n\r\n    var returnObject = {\r\n        /**\r\n         * This method starts the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var recorder = RecordRTC(mediaStream, {\r\n         *     type: 'video'\r\n         * });\r\n         * recorder.startRecording();\r\n         */\r\n        startRecording: startRecording,\r\n\r\n        /**\r\n         * This method stops the recording. It is strongly recommended to get \"blob\" or \"URI\" inside the callback to make sure all recorders finished their job.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     // use either \"this\" or \"recorder\" object; both are identical\r\n         *     video.src = this.toURL();\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        stopRecording: stopRecording,\r\n\r\n        /**\r\n         * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Firefox is unable to pause the recording. Fix it.\r\n         * @example\r\n         * recorder.pauseRecording();  // pause the recording\r\n         * recorder.resumeRecording(); // resume again\r\n         */\r\n        pauseRecording: pauseRecording,\r\n\r\n        /**\r\n         * This method resumes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.pauseRecording();  // first of all, pause the recording\r\n         * recorder.resumeRecording(); // now resume it\r\n         */\r\n        resumeRecording: resumeRecording,\r\n\r\n        /**\r\n         * This method initializes the recording.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * recorder.initRecorder();\r\n         */\r\n        initRecorder: initRecorder,\r\n\r\n        /**\r\n         * Ask RecordRTC to auto-stop the recording after 5 minutes.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var fiveMinutes = 5 * 1000 * 60;\r\n         * recorder.setRecordingDuration(fiveMinutes, function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         * \r\n         * // or otherwise\r\n         * recorder.setRecordingDuration(fiveMinutes).onRecordingStopped(function() {\r\n         *    var blob = this.getBlob();\r\n         *    video.src = this.toURL();\r\n         * });\r\n         */\r\n        setRecordingDuration: function(recordingDuration, callback) {\r\n            if (typeof recordingDuration === 'undefined') {\r\n                throw 'recordingDuration is required.';\r\n            }\r\n\r\n            if (typeof recordingDuration !== 'number') {\r\n                throw 'recordingDuration must be a number.';\r\n            }\r\n\r\n            self.recordingDuration = recordingDuration;\r\n            self.onRecordingStopped = callback || function() {};\r\n\r\n            return {\r\n                onRecordingStopped: function(callback) {\r\n                    self.onRecordingStopped = callback;\r\n                }\r\n            };\r\n        },\r\n\r\n        /**\r\n         * This method can be used to clear/reset all the recorded data.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo Figure out the difference between \"reset\" and \"clearRecordedData\" methods.\r\n         * @example\r\n         * recorder.clearRecordedData();\r\n         */\r\n        clearRecordedData: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            mediaRecorder.clearRecordedData();\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('Cleared old recorded data.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the recorded blob. Use this method inside the \"stopRecording\" callback.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.getBlob();\r\n         *\r\n         *     var file = new File([blob], 'filename.webm', {\r\n         *         type: 'video/webm'\r\n         *     });\r\n         *\r\n         *     var formData = new FormData();\r\n         *     formData.append('file', file); // upload \"File\" object rather than a \"Blob\"\r\n         *     uploadToServer(formData);\r\n         * });\r\n         * @returns {Blob} Returns recorded data as \"Blob\" object.\r\n         */\r\n        getBlob: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return mediaRecorder.blob;\r\n        },\r\n\r\n        /**\r\n         * Get data-URI instead of Blob.\r\n         * @param {function} callback - Callback to get the Data-URI.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     recorder.getDataURL(function(dataURI) {\r\n         *         video.src = dataURI;\r\n         *     });\r\n         * });\r\n         */\r\n        getDataURL: getDataURL,\r\n\r\n        /**\r\n         * Get virtual/temporary URL. Usage of this URL is limited to current tab.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     video.src = this.toURL();\r\n         * });\r\n         * @returns {String} Returns a virtual/temporary URL for the recorded \"Blob\".\r\n         */\r\n        toURL: function() {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            return URL.createObjectURL(mediaRecorder.blob);\r\n        },\r\n\r\n        /**\r\n         * Get internal recording object (i.e. internal module) e.g. MutliStreamRecorder, MediaStreamRecorder, StereoAudioRecorder or WhammyRecorder etc.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * var internalRecorder = recorder.getInternalRecorder();\r\n         * if(internalRecorder instanceof MultiStreamRecorder) {\r\n         *     internalRecorder.addStreams([newAudioStream]);\r\n         *     internalRecorder.resetVideoStreams([screenStream]);\r\n         * }\r\n         * @returns {Object} Returns internal recording object.\r\n         */\r\n        getInternalRecorder: function() {\r\n            return mediaRecorder;\r\n        },\r\n\r\n        /**\r\n         * Invoke save-as dialog to save the recorded blob into your disk.\r\n         * @param {string} fileName - Set your own file name.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     this.save('file-name');\r\n         *\r\n         *     // or manually:\r\n         *     invokeSaveAsDialog(this.getBlob(), 'filename.webm');\r\n         * });\r\n         */\r\n        save: function(fileName) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            invokeSaveAsDialog(mediaRecorder.blob, fileName);\r\n        },\r\n\r\n        /**\r\n         * This method gets a blob from indexed-DB storage.\r\n         * @param {function} callback - Callback to get the recorded blob.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.getFromDisk(function(dataURL) {\r\n         *     video.src = dataURL;\r\n         * });\r\n         */\r\n        getFromDisk: function(callback) {\r\n            if (!mediaRecorder) {\r\n                warningLog();\r\n                return;\r\n            }\r\n\r\n            RecordRTC.getFromDisk(config.type, callback);\r\n        },\r\n\r\n        /**\r\n         * This method appends an array of webp images to the recorded video-blob. It takes an \"array\" object.\r\n         * @type {Array.<Array>}\r\n         * @param {Array} arrayOfWebPImages - Array of webp images.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @todo This method should be deprecated.\r\n         * @example\r\n         * var arrayOfWebPImages = [];\r\n         * arrayOfWebPImages.push({\r\n         *     duration: index,\r\n         *     image: 'data:image/webp;base64,...'\r\n         * });\r\n         * recorder.setAdvertisementArray(arrayOfWebPImages);\r\n         */\r\n        setAdvertisementArray: function(arrayOfWebPImages) {\r\n            config.advertisement = [];\r\n\r\n            var length = arrayOfWebPImages.length;\r\n            for (var i = 0; i < length; i++) {\r\n                config.advertisement.push({\r\n                    duration: i,\r\n                    image: arrayOfWebPImages[i]\r\n                });\r\n            }\r\n        },\r\n\r\n        /**\r\n         * It is equivalent to <code class=\"str\">\"recorder.getBlob()\"</code> method. Usage of \"getBlob\" is recommended, though.\r\n         * @property {Blob} blob - Recorded Blob can be accessed using this property.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var blob = this.blob;\r\n         *\r\n         *     // below one is recommended\r\n         *     var blob = this.getBlob();\r\n         * });\r\n         */\r\n        blob: null,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} bufferSize - Buffer-size used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used this buffer-size: ' + this.bufferSize);\r\n         * });\r\n         */\r\n        bufferSize: 0,\r\n\r\n        /**\r\n         * This works only with {recorderType:StereoAudioRecorder}. Use this property on \"stopRecording\" to verify the encoder's sample-rates.\r\n         * @property {number} sampleRate - Sample-rates used to encode the WAV container\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     alert('Recorder used these sample-rates: ' + this.sampleRate);\r\n         * });\r\n         */\r\n        sampleRate: 0,\r\n\r\n        /**\r\n         * {recorderType:StereoAudioRecorder} returns ArrayBuffer object.\r\n         * @property {ArrayBuffer} buffer - Audio ArrayBuffer, supported only in Chrome.\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @readonly\r\n         * @example\r\n         * recorder.stopRecording(function() {\r\n         *     var arrayBuffer = this.buffer;\r\n         *     alert(arrayBuffer.byteLength);\r\n         * });\r\n         */\r\n        buffer: null,\r\n\r\n        /**\r\n         * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.reset();\r\n         * recorder.startRecording();\r\n         */\r\n        reset: function() {\r\n            if (self.state === 'recording' && !config.disableLogs) {\r\n                console.warn('Stop an active recorder.');\r\n            }\r\n\r\n            if (mediaRecorder && typeof mediaRecorder.clearRecordedData === 'function') {\r\n                mediaRecorder.clearRecordedData();\r\n            }\r\n            mediaRecorder = null;\r\n            setState('inactive');\r\n            self.blob = null;\r\n        },\r\n\r\n        /**\r\n         * This method is called whenever recorder's state changes. Use this as an \"event\".\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @instance\r\n         * @example\r\n         * recorder.onStateChanged = function(state) {\r\n         *     console.log('Recorder state: ', state);\r\n         * };\r\n         */\r\n        onStateChanged: function(state) {\r\n            if (!config.disableLogs) {\r\n                console.log('Recorder state changed:', state);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * A recorder can have inactive, recording, paused or stopped states.\r\n         * @property {String} state - A recorder's state can be: recording, paused, stopped or inactive.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * // this looper function will keep you updated about the recorder's states.\r\n         * (function looper() {\r\n         *     document.querySelector('h1').innerHTML = 'Recorder\\'s state is: ' + recorder.state;\r\n         *     if(recorder.state === 'stopped') return; // ignore+stop\r\n         *     setTimeout(looper, 1000); // update after every 3-seconds\r\n         * })();\r\n         * recorder.startRecording();\r\n         */\r\n        state: 'inactive',\r\n\r\n        /**\r\n         * Get recorder's readonly state.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * var state = recorder.getState();\r\n         * @returns {String} Returns recording state.\r\n         */\r\n        getState: function() {\r\n            return self.state;\r\n        },\r\n\r\n        /**\r\n         * Destroy RecordRTC instance. Clear all recorders and objects.\r\n         * @method\r\n         * @memberof RecordRTC\r\n         * @example\r\n         * recorder.destroy();\r\n         */\r\n        destroy: function() {\r\n            var disableLogsCache = config.disableLogs;\r\n\r\n            config = {\r\n                disableLogs: true\r\n            };\r\n            self.reset();\r\n            setState('destroyed');\r\n            returnObject = self = null;\r\n\r\n            if (Storage.AudioContextConstructor) {\r\n                Storage.AudioContextConstructor.close();\r\n                Storage.AudioContextConstructor = null;\r\n            }\r\n\r\n            config.disableLogs = disableLogsCache;\r\n\r\n            if (!config.disableLogs) {\r\n                console.log('RecordRTC is destroyed.');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * RecordRTC version number\r\n         * @property {String} version - Release version number.\r\n         * @memberof RecordRTC\r\n         * @static\r\n         * @readonly\r\n         * @example\r\n         * alert(recorder.version);\r\n         */\r\n        version: '5.6.2'\r\n    };\r\n\r\n    if (!this) {\r\n        self = returnObject;\r\n        return returnObject;\r\n    }\r\n\r\n    // if someone wants to use RecordRTC with the \"new\" keyword.\r\n    for (var prop in returnObject) {\r\n        this[prop] = returnObject[prop];\r\n    }\r\n\r\n    self = this;\r\n\r\n    return returnObject;\r\n}\r\n\r\nRecordRTC.version = '5.6.2';\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = RecordRTC;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('RecordRTC', [], function() {\r\n        return RecordRTC;\r\n    });\r\n}\n\r\nRecordRTC.getFromDisk = function(type, callback) {\r\n    if (!callback) {\r\n        throw 'callback is mandatory.';\r\n    }\r\n\r\n    console.log('Getting recorded ' + (type === 'all' ? 'blobs' : type + ' blob ') + ' from disk!');\r\n    DiskStorage.Fetch(function(dataURL, _type) {\r\n        if (type !== 'all' && _type === type + 'Blob' && callback) {\r\n            callback(dataURL);\r\n        }\r\n\r\n        if (type === 'all' && callback) {\r\n            callback(dataURL, _type.replace('Blob', ''));\r\n        }\r\n    });\r\n};\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof RecordRTC\r\n * @example\r\n * RecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nRecordRTC.writeToDisk = function(options) {\r\n    console.log('Writing recorded blob(s) to disk!');\r\n    options = options || {};\r\n    if (options.audio && options.video && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                options.gif.getDataURL(function(gifDataURL) {\r\n                    DiskStorage.Store({\r\n                        audioBlob: audioDataURL,\r\n                        videoBlob: videoDataURL,\r\n                        gifBlob: gifDataURL\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.video) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.video.getDataURL(function(videoDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    videoBlob: videoDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio && options.gif) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    audioBlob: audioDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.video && options.gif) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            options.gif.getDataURL(function(gifDataURL) {\r\n                DiskStorage.Store({\r\n                    videoBlob: videoDataURL,\r\n                    gifBlob: gifDataURL\r\n                });\r\n            });\r\n        });\r\n    } else if (options.audio) {\r\n        options.audio.getDataURL(function(audioDataURL) {\r\n            DiskStorage.Store({\r\n                audioBlob: audioDataURL\r\n            });\r\n        });\r\n    } else if (options.video) {\r\n        options.video.getDataURL(function(videoDataURL) {\r\n            DiskStorage.Store({\r\n                videoBlob: videoDataURL\r\n            });\r\n        });\r\n    } else if (options.gif) {\r\n        options.gif.getDataURL(function(gifDataURL) {\r\n            DiskStorage.Store({\r\n                gifBlob: gifDataURL\r\n            });\r\n        });\r\n    }\r\n};\n\r\n// __________________________\r\n// RecordRTC-Configuration.js\r\n\r\n/**\r\n * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid \"config\" object.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCConfiguration\r\n * @class\r\n * @example\r\n * var options = RecordRTCConfiguration(mediaStream, options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}\r\n */\r\n\r\nfunction RecordRTCConfiguration(mediaStream, config) {\r\n    if (!config.recorderType && !config.type) {\r\n        if (!!config.audio && !!config.video) {\r\n            config.type = 'video';\r\n        } else if (!!config.audio && !config.video) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    if (config.recorderType && !config.type) {\r\n        if (config.recorderType === WhammyRecorder || config.recorderType === CanvasRecorder || (typeof WebAssemblyRecorder !== 'undefined' && config.recorderType === WebAssemblyRecorder)) {\r\n            config.type = 'video';\r\n        } else if (config.recorderType === GifRecorder) {\r\n            config.type = 'gif';\r\n        } else if (config.recorderType === StereoAudioRecorder) {\r\n            config.type = 'audio';\r\n        } else if (config.recorderType === MediaStreamRecorder) {\r\n            if (getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (!getTracks(mediaStream, 'audio').length && getTracks(mediaStream, 'video').length) {\r\n                config.type = 'video';\r\n            } else if (getTracks(mediaStream, 'audio').length && !getTracks(mediaStream, 'video').length) {\r\n                config.type = 'audio';\r\n            } else {\r\n                // config.type = 'UnKnown';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (typeof MediaStreamRecorder !== 'undefined' && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (!config.mimeType) {\r\n            config.mimeType = 'video/webm';\r\n        }\r\n\r\n        if (!config.type) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n\r\n        if (!config.bitsPerSecond) {\r\n            // config.bitsPerSecond = 128000;\r\n        }\r\n    }\r\n\r\n    // consider default type=audio\r\n    if (!config.type) {\r\n        if (config.mimeType) {\r\n            config.type = config.mimeType.split('/')[0];\r\n        }\r\n        if (!config.type) {\r\n            config.type = 'audio';\r\n        }\r\n    }\r\n\r\n    return config;\r\n}\n\r\n// __________________\r\n// GetRecorderType.js\r\n\r\n/**\r\n * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.\r\n * @summary It returns best recorder-type available for your browser.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GetRecorderType\r\n * @class\r\n * @example\r\n * var RecorderType = GetRecorderType(options);\r\n * var recorder = new RecorderType(options);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {type:\"video\", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction GetRecorderType(mediaStream, config) {\r\n    var recorder;\r\n\r\n    // StereoAudioRecorder can work with all three: Edge, Firefox and Chrome\r\n    // todo: detect if it is Edge, then auto use: StereoAudioRecorder\r\n    if (isChrome || isEdge || isOpera) {\r\n        // Media Stream Recording API has not been implemented in chrome yet;\r\n        // That's why using WebAudio API to record stereo audio in WAV format\r\n        recorder = StereoAudioRecorder;\r\n    }\r\n\r\n    if (typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype && !isChrome) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    // video recorder (in WebM format)\r\n    if (config.type === 'video' && (isChrome || isOpera)) {\r\n        recorder = WhammyRecorder;\r\n\r\n        if (typeof WebAssemblyRecorder !== 'undefined' && typeof ReadableStream !== 'undefined') {\r\n            recorder = WebAssemblyRecorder;\r\n        }\r\n    }\r\n\r\n    // video recorder (in Gif format)\r\n    if (config.type === 'gif') {\r\n        recorder = GifRecorder;\r\n    }\r\n\r\n    // html2canvas recording!\r\n    if (config.type === 'canvas') {\r\n        recorder = CanvasRecorder;\r\n    }\r\n\r\n    if (isMediaRecorderCompatible() && recorder !== CanvasRecorder && recorder !== GifRecorder && typeof MediaRecorder !== 'undefined' && 'requestData' in MediaRecorder.prototype) {\r\n        if (getTracks(mediaStream, 'video').length || getTracks(mediaStream, 'audio').length) {\r\n            // audio-only recording\r\n            if (config.type === 'audio') {\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('audio/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n                // else recorder = StereoAudioRecorder;\r\n            } else {\r\n                // video or screen tracks\r\n                if (typeof MediaRecorder.isTypeSupported === 'function' && MediaRecorder.isTypeSupported('video/webm')) {\r\n                    recorder = MediaStreamRecorder;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    if (mediaStream instanceof Array && mediaStream.length) {\r\n        recorder = MultiStreamRecorder;\r\n    }\r\n\r\n    if (config.recorderType) {\r\n        recorder = config.recorderType;\r\n    }\r\n\r\n    if (!config.disableLogs && !!recorder && !!recorder.name) {\r\n        console.log('Using recorderType:', recorder.name || recorder.constructor.name);\r\n    }\r\n\r\n    if (!recorder && isSafari) {\r\n        recorder = MediaStreamRecorder;\r\n    }\r\n\r\n    return recorder;\r\n}\n\r\n// _____________\r\n// MRecordRTC.js\r\n\r\n/**\r\n * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.\r\n * @summary MRecordRTC stands for \"Multiple-RecordRTC\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MRecordRTC\r\n * @class\r\n * @example\r\n * var recorder = new MRecordRTC();\r\n * recorder.addStream(MediaStream);\r\n * recorder.mediaType = {\r\n *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder\r\n *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n *     gif: true    // or GifRecorder\r\n * };\r\n * // mimeType is optional and should be set only in advance cases.\r\n * recorder.mimeType = {\r\n *     audio: 'audio/wav',\r\n *     video: 'video/webm',\r\n *     gif:   'image/gif'\r\n * };\r\n * recorder.startRecording();\r\n * @see For further information:\r\n * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction MRecordRTC(mediaStream) {\r\n\r\n    /**\r\n     * This method attaches MediaStream object to {@link MRecordRTC}.\r\n     * @param {MediaStream} mediaStream - A MediaStream object, either fetched using getUserMedia API, or generated using captureStreamUntilEnded or WebAudio API.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.addStream(MediaStream);\r\n     */\r\n    this.addStream = function(_mediaStream) {\r\n        if (_mediaStream) {\r\n            mediaStream = _mediaStream;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This property can be used to set the recording type e.g. audio, or video, or gif, or canvas.\r\n     * @property {object} mediaType - {audio: true, video: true, gif: true}\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * var recorder = new MRecordRTC();\r\n     * recorder.mediaType = {\r\n     *     audio: true, // TRUE or StereoAudioRecorder or MediaStreamRecorder\r\n     *     video: true, // TRUE or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder\r\n     *     gif  : true  // TRUE or GifRecorder\r\n     * };\r\n     */\r\n    this.mediaType = {\r\n        audio: true,\r\n        video: true\r\n    };\r\n\r\n    /**\r\n     * This method starts recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.startRecording();\r\n     */\r\n    this.startRecording = function() {\r\n        var mediaType = this.mediaType;\r\n        var recorderType;\r\n        var mimeType = this.mimeType || {\r\n            audio: null,\r\n            video: null,\r\n            gif: null\r\n        };\r\n\r\n        if (typeof mediaType.audio !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'audio').length) {\r\n            mediaType.audio = false;\r\n        }\r\n\r\n        if (typeof mediaType.video !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.video = false;\r\n        }\r\n\r\n        if (typeof mediaType.gif !== 'function' && isMediaRecorderCompatible() && !getTracks(mediaStream, 'video').length) {\r\n            mediaType.gif = false;\r\n        }\r\n\r\n        if (!mediaType.audio && !mediaType.video && !mediaType.gif) {\r\n            throw 'MediaStream must have either audio or video tracks.';\r\n        }\r\n\r\n        if (!!mediaType.audio) {\r\n            recorderType = null;\r\n            if (typeof mediaType.audio === 'function') {\r\n                recorderType = mediaType.audio;\r\n            }\r\n\r\n            this.audioRecorder = new RecordRTC(mediaStream, {\r\n                type: 'audio',\r\n                bufferSize: this.bufferSize,\r\n                sampleRate: this.sampleRate,\r\n                numberOfAudioChannels: this.numberOfAudioChannels || 2,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.audio,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp\r\n            });\r\n\r\n            if (!mediaType.video) {\r\n                this.audioRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.video) {\r\n            recorderType = null;\r\n            if (typeof mediaType.video === 'function') {\r\n                recorderType = mediaType.video;\r\n            }\r\n\r\n            var newStream = mediaStream;\r\n\r\n            if (isMediaRecorderCompatible() && !!mediaType.audio && typeof mediaType.audio === 'function') {\r\n                var videoTrack = getTracks(mediaStream, 'video')[0];\r\n\r\n                if (isFirefox) {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n\r\n                    if (recorderType && recorderType === WhammyRecorder) {\r\n                        // Firefox does NOT supports webp-encoding yet\r\n                        // But Firefox do supports WebAssemblyRecorder\r\n                        recorderType = MediaStreamRecorder;\r\n                    }\r\n                } else {\r\n                    newStream = new MediaStream();\r\n                    newStream.addTrack(videoTrack);\r\n                }\r\n            }\r\n\r\n            this.videoRecorder = new RecordRTC(newStream, {\r\n                type: 'video',\r\n                video: this.video,\r\n                canvas: this.canvas,\r\n                frameInterval: this.frameInterval || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.video,\r\n                timeSlice: this.timeSlice,\r\n                onTimeStamp: this.onTimeStamp,\r\n                workerPath: this.workerPath,\r\n                webAssemblyPath: this.webAssemblyPath,\r\n                frameRate: this.frameRate, // used by WebAssemblyRecorder; values: usually 30; accepts any.\r\n                bitrate: this.bitrate // used by WebAssemblyRecorder; values: 0 to 1000+\r\n            });\r\n\r\n            if (!mediaType.audio) {\r\n                this.videoRecorder.startRecording();\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.audio && !!mediaType.video) {\r\n            var self = this;\r\n\r\n            var isSingleRecorder = isMediaRecorderCompatible() === true;\r\n\r\n            if (mediaType.audio instanceof StereoAudioRecorder && !!mediaType.video) {\r\n                isSingleRecorder = false;\r\n            } else if (mediaType.audio !== true && mediaType.video !== true && mediaType.audio !== mediaType.video) {\r\n                isSingleRecorder = false;\r\n            }\r\n\r\n            if (isSingleRecorder === true) {\r\n                self.audioRecorder = null;\r\n                self.videoRecorder.startRecording();\r\n            } else {\r\n                self.videoRecorder.initRecorder(function() {\r\n                    self.audioRecorder.initRecorder(function() {\r\n                        // Both recorders are ready to record things accurately\r\n                        self.videoRecorder.startRecording();\r\n                        self.audioRecorder.startRecording();\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        if (!!mediaType.gif) {\r\n            recorderType = null;\r\n            if (typeof mediaType.gif === 'function') {\r\n                recorderType = mediaType.gif;\r\n            }\r\n            this.gifRecorder = new RecordRTC(mediaStream, {\r\n                type: 'gif',\r\n                frameRate: this.frameRate || 200,\r\n                quality: this.quality || 10,\r\n                disableLogs: this.disableLogs,\r\n                recorderType: recorderType,\r\n                mimeType: mimeType.gif\r\n            });\r\n            this.gifRecorder.startRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording.\r\n     * @param {function} callback - Callback function is invoked when all encoders finished their jobs.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.stopRecording(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     */\r\n    this.stopRecording = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'audio');\r\n            });\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'video');\r\n            });\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.stopRecording(function(blobURL) {\r\n                callback(blobURL, 'gif');\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.pauseRecording();\r\n     */\r\n    this.pauseRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.pauseRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.pauseRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes recording.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.resumeRecording();\r\n     */\r\n    this.resumeRecording = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.resumeRecording();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.resumeRecording();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs.\r\n     * @param {function} callback - All recorded blobs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getBlob(function(recording){\r\n     *     var audioBlob = recording.audio;\r\n     *     var videoBlob = recording.video;\r\n     *     var gifBlob   = recording.gif;\r\n     * });\r\n     * // or\r\n     * var audioBlob = recorder.getBlob().audio;\r\n     * var videoBlob = recorder.getBlob().video;\r\n     */\r\n    this.getBlob = function(callback) {\r\n        var output = {};\r\n\r\n        if (this.audioRecorder) {\r\n            output.audio = this.audioRecorder.getBlob();\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            output.video = this.videoRecorder.getBlob();\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            output.gif = this.gifRecorder.getBlob();\r\n        }\r\n\r\n        if (callback) {\r\n            callback(output);\r\n        }\r\n\r\n        return output;\r\n    };\r\n\r\n    /**\r\n     * Destroy all recorder instances.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.destroy();\r\n     */\r\n    this.destroy = function() {\r\n        if (this.audioRecorder) {\r\n            this.audioRecorder.destroy();\r\n            this.audioRecorder = null;\r\n        }\r\n\r\n        if (this.videoRecorder) {\r\n            this.videoRecorder.destroy();\r\n            this.videoRecorder = null;\r\n        }\r\n\r\n        if (this.gifRecorder) {\r\n            this.gifRecorder.destroy();\r\n            this.gifRecorder = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to manually get all recorded blobs' DataURLs.\r\n     * @param {function} callback - All recorded blobs' DataURLs are passed back to the \"callback\" function.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.getDataURL(function(recording){\r\n     *     var audioDataURL = recording.audio;\r\n     *     var videoDataURL = recording.video;\r\n     *     var gifDataURL   = recording.gif;\r\n     * });\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        this.getBlob(function(blob) {\r\n            if (blob.audio && blob.video) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    getDataURL(blob.video, function(_videoDataURL) {\r\n                        callback({\r\n                            audio: _audioDataURL,\r\n                            video: _videoDataURL\r\n                        });\r\n                    });\r\n                });\r\n            } else if (blob.audio) {\r\n                getDataURL(blob.audio, function(_audioDataURL) {\r\n                    callback({\r\n                        audio: _audioDataURL\r\n                    });\r\n                });\r\n            } else if (blob.video) {\r\n                getDataURL(blob.video, function(_videoDataURL) {\r\n                    callback({\r\n                        video: _videoDataURL\r\n                    });\r\n                });\r\n            }\r\n        });\r\n\r\n        function getDataURL(blob, callback00) {\r\n            if (typeof Worker !== 'undefined') {\r\n                var webWorker = processInWebWorker(function readFile(_blob) {\r\n                    postMessage(new FileReaderSync().readAsDataURL(_blob));\r\n                });\r\n\r\n                webWorker.onmessage = function(event) {\r\n                    callback00(event.data);\r\n                };\r\n\r\n                webWorker.postMessage(blob);\r\n            } else {\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onload = function(event) {\r\n                    callback00(event.target.result);\r\n                };\r\n            }\r\n        }\r\n\r\n        function processInWebWorker(_function) {\r\n            var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n                'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n            ], {\r\n                type: 'application/javascript'\r\n            }));\r\n\r\n            var worker = new Worker(blob);\r\n            var url;\r\n            if (typeof URL !== 'undefined') {\r\n                url = URL;\r\n            } else if (typeof webkitURL !== 'undefined') {\r\n                url = webkitURL;\r\n            } else {\r\n                throw 'Neither URL nor webkitURL detected.';\r\n            }\r\n            url.revokeObjectURL(blob);\r\n            return worker;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method can be used to ask {@link MRecordRTC} to write all recorded blobs into IndexedDB storage.\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.writeToDisk();\r\n     */\r\n    this.writeToDisk = function() {\r\n        RecordRTC.writeToDisk({\r\n            audio: this.audioRecorder,\r\n            video: this.videoRecorder,\r\n            gif: this.gifRecorder\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method can be used to invoke a save-as dialog for all recorded blobs.\r\n     * @param {object} args - {audio: 'audio-name', video: 'video-name', gif: 'gif-name'}\r\n     * @method\r\n     * @memberof MRecordRTC\r\n     * @example\r\n     * recorder.save({\r\n     *     audio: 'audio-file-name',\r\n     *     video: 'video-file-name',\r\n     *     gif  : 'gif-file-name'\r\n     * });\r\n     */\r\n    this.save = function(args) {\r\n        args = args || {\r\n            audio: true,\r\n            video: true,\r\n            gif: true\r\n        };\r\n\r\n        if (!!args.audio && this.audioRecorder) {\r\n            this.audioRecorder.save(typeof args.audio === 'string' ? args.audio : '');\r\n        }\r\n\r\n        if (!!args.video && this.videoRecorder) {\r\n            this.videoRecorder.save(typeof args.video === 'string' ? args.video : '');\r\n        }\r\n        if (!!args.gif && this.gifRecorder) {\r\n            this.gifRecorder.save(typeof args.gif === 'string' ? args.gif : '');\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * This method can be used to get all recorded blobs from IndexedDB storage.\r\n * @param {string} type - 'all' or 'audio' or 'video' or 'gif'\r\n * @param {function} callback - Callback function to get all stored blobs.\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.getFromDisk('all', function(dataURL, type){\r\n *     if(type === 'audio') { }\r\n *     if(type === 'video') { }\r\n *     if(type === 'gif')   { }\r\n * });\r\n */\r\nMRecordRTC.getFromDisk = RecordRTC.getFromDisk;\r\n\r\n/**\r\n * This method can be used to store recorded blobs into IndexedDB storage.\r\n * @param {object} options - {audio: Blob, video: Blob, gif: Blob}\r\n * @method\r\n * @memberof MRecordRTC\r\n * @example\r\n * MRecordRTC.writeToDisk({\r\n *     audio: audioBlob,\r\n *     video: videoBlob,\r\n *     gif  : gifBlob\r\n * });\r\n */\r\nMRecordRTC.writeToDisk = RecordRTC.writeToDisk;\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MRecordRTC = MRecordRTC;\r\n}\n\r\nvar browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n(function(that) {\r\n    if (!that) {\r\n        return;\r\n    }\r\n\r\n    if (typeof window !== 'undefined') {\r\n        return;\r\n    }\r\n\r\n    if (typeof global === 'undefined') {\r\n        return;\r\n    }\r\n\r\n    global.navigator = {\r\n        userAgent: browserFakeUserAgent,\r\n        getUserMedia: function() {}\r\n    };\r\n\r\n    if (!global.console) {\r\n        global.console = {};\r\n    }\r\n\r\n    if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n        global.console.error = global.console.log = global.console.log || function() {\r\n            console.log(arguments);\r\n        };\r\n    }\r\n\r\n    if (typeof document === 'undefined') {\r\n        /*global document:true */\r\n        that.document = {\r\n            documentElement: {\r\n                appendChild: function() {\r\n                    return '';\r\n                }\r\n            }\r\n        };\r\n\r\n        document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n            var obj = {\r\n                getContext: function() {\r\n                    return obj;\r\n                },\r\n                play: function() {},\r\n                pause: function() {},\r\n                drawImage: function() {},\r\n                toDataURL: function() {\r\n                    return '';\r\n                },\r\n                style: {}\r\n            };\r\n            return obj;\r\n        };\r\n\r\n        that.HTMLVideoElement = function() {};\r\n    }\r\n\r\n    if (typeof location === 'undefined') {\r\n        /*global location:true */\r\n        that.location = {\r\n            protocol: 'file:',\r\n            href: '',\r\n            hash: ''\r\n        };\r\n    }\r\n\r\n    if (typeof screen === 'undefined') {\r\n        /*global screen:true */\r\n        that.screen = {\r\n            width: 0,\r\n            height: 0\r\n        };\r\n    }\r\n\r\n    if (typeof URL === 'undefined') {\r\n        /*global screen:true */\r\n        that.URL = {\r\n            createObjectURL: function() {\r\n                return '';\r\n            },\r\n            revokeObjectURL: function() {\r\n                return '';\r\n            }\r\n        };\r\n    }\r\n\r\n    /*global window:true */\r\n    that.window = global;\r\n})(typeof global !== 'undefined' ? global : null);\n\r\n// _____________________________\r\n// Cross-Browser-Declarations.js\r\n\r\n// animation-frame used in WebM recording\r\n\r\n/*jshint -W079 */\r\nvar requestAnimationFrame = window.requestAnimationFrame;\r\nif (typeof requestAnimationFrame === 'undefined') {\r\n    if (typeof webkitRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = webkitRequestAnimationFrame;\r\n    } else if (typeof mozRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = mozRequestAnimationFrame;\r\n    } else if (typeof msRequestAnimationFrame !== 'undefined') {\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = msRequestAnimationFrame;\r\n    } else if (typeof requestAnimationFrame === 'undefined') {\r\n        // via: https://gist.github.com/paulirish/1579671\r\n        var lastTime = 0;\r\n\r\n        /*global requestAnimationFrame:true */\r\n        requestAnimationFrame = function(callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar cancelAnimationFrame = window.cancelAnimationFrame;\r\nif (typeof cancelAnimationFrame === 'undefined') {\r\n    if (typeof webkitCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = webkitCancelAnimationFrame;\r\n    } else if (typeof mozCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = mozCancelAnimationFrame;\r\n    } else if (typeof msCancelAnimationFrame !== 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = msCancelAnimationFrame;\r\n    } else if (typeof cancelAnimationFrame === 'undefined') {\r\n        /*global cancelAnimationFrame:true */\r\n        cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n    }\r\n}\r\n\r\n// WebAudio API representer\r\nvar AudioContext = window.AudioContext;\r\n\r\nif (typeof AudioContext === 'undefined') {\r\n    if (typeof webkitAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    if (typeof mozAudioContext !== 'undefined') {\r\n        /*global AudioContext:true */\r\n        AudioContext = mozAudioContext;\r\n    }\r\n}\r\n\r\n/*jshint -W079 */\r\nvar URL = window.URL;\r\n\r\nif (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n    /*global URL:true */\r\n    URL = webkitURL;\r\n}\r\n\r\nif (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n    if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n    }\r\n\r\n    if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n        navigator.getUserMedia = navigator.mozGetUserMedia;\r\n    }\r\n}\r\n\r\nvar isEdge = navigator.userAgent.indexOf('Edge') !== -1 && (!!navigator.msSaveBlob || !!navigator.msSaveOrOpenBlob);\r\nvar isOpera = !!window.opera || navigator.userAgent.indexOf('OPR/') !== -1;\r\nvar isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1 && ('netscape' in window) && / rv:/.test(navigator.userAgent);\r\nvar isChrome = (!isOpera && !isEdge && !!navigator.webkitGetUserMedia) || isElectron() || navigator.userAgent.toLowerCase().indexOf('chrome/') !== -1;\r\n\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nif (isSafari && !isChrome && navigator.userAgent.indexOf('CriOS') !== -1) {\r\n    isSafari = false;\r\n    isChrome = true;\r\n}\r\n\r\nvar MediaStream = window.MediaStream;\r\n\r\nif (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n    MediaStream = webkitMediaStream;\r\n}\r\n\r\n/*global MediaStream:true */\r\nif (typeof MediaStream !== 'undefined') {\r\n    // override \"stop\" method for all browsers\r\n    if (typeof MediaStream.prototype.stop === 'undefined') {\r\n        MediaStream.prototype.stop = function() {\r\n            this.getTracks().forEach(function(track) {\r\n                track.stop();\r\n            });\r\n        };\r\n    }\r\n}\r\n\r\n// below function via: http://goo.gl/B3ae8c\r\n/**\r\n * Return human-readable file size.\r\n * @param {number} bytes - Pass bytes and get formatted string.\r\n * @returns {string} - formatted string\r\n * @example\r\n * bytesToSize(1024*1024*5) === '5 GB'\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction bytesToSize(bytes) {\r\n    var k = 1000;\r\n    var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    if (bytes === 0) {\r\n        return '0 Bytes';\r\n    }\r\n    var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\r\n    return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object. This parameter is required.\r\n * @param {string} fileName - Optional file name e.g. \"Recorded-Video.webm\"\r\n * @example\r\n * invokeSaveAsDialog(blob or file, [optional] fileName);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction invokeSaveAsDialog(file, fileName) {\r\n    if (!file) {\r\n        throw 'Blob object is required.';\r\n    }\r\n\r\n    if (!file.type) {\r\n        try {\r\n            file.type = 'video/webm';\r\n        } catch (e) {}\r\n    }\r\n\r\n    var fileExtension = (file.type || 'video/webm').split('/')[1];\r\n    if (fileExtension.indexOf(';') !== -1) {\r\n        // extended mimetype, e.g. 'video/webm;codecs=vp8,opus'\r\n        fileExtension = fileExtension.split(';')[0];\r\n    }\r\n    if (fileName && fileName.indexOf('.') !== -1) {\r\n        var splitted = fileName.split('.');\r\n        fileName = splitted[0];\r\n        fileExtension = splitted[1];\r\n    }\r\n\r\n    var fileFullName = (fileName || (Math.round(Math.random() * 9999999999) + 888888888)) + '.' + fileExtension;\r\n\r\n    if (typeof navigator.msSaveOrOpenBlob !== 'undefined') {\r\n        return navigator.msSaveOrOpenBlob(file, fileFullName);\r\n    } else if (typeof navigator.msSaveBlob !== 'undefined') {\r\n        return navigator.msSaveBlob(file, fileFullName);\r\n    }\r\n\r\n    var hyperlink = document.createElement('a');\r\n    hyperlink.href = URL.createObjectURL(file);\r\n    hyperlink.download = fileFullName;\r\n\r\n    hyperlink.style = 'display:none;opacity:0;color:transparent;';\r\n    (document.body || document.documentElement).appendChild(hyperlink);\r\n\r\n    if (typeof hyperlink.click === 'function') {\r\n        hyperlink.click();\r\n    } else {\r\n        hyperlink.target = '_blank';\r\n        hyperlink.dispatchEvent(new MouseEvent('click', {\r\n            view: window,\r\n            bubbles: true,\r\n            cancelable: true\r\n        }));\r\n    }\r\n\r\n    URL.revokeObjectURL(hyperlink.href);\r\n}\r\n\r\n/**\r\n * from: https://github.com/cheton/is-electron/blob/master/index.js\r\n **/\r\nfunction isElectron() {\r\n    // Renderer process\r\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\r\n        return true;\r\n    }\r\n\r\n    // Main process\r\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\r\n        return true;\r\n    }\r\n\r\n    // Detect the user agent when the `nodeIntegration` option is set to true\r\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction getTracks(stream, kind) {\r\n    if (!stream || !stream.getTracks) {\r\n        return [];\r\n    }\r\n\r\n    return stream.getTracks().filter(function(t) {\r\n        return t.kind === (kind || 'audio');\r\n    });\r\n}\r\n\r\nfunction setSrcObject(stream, element) {\r\n    if ('srcObject' in element) {\r\n        element.srcObject = stream;\r\n    } else if ('mozSrcObject' in element) {\r\n        element.mozSrcObject = stream;\r\n    } else {\r\n        element.srcObject = stream;\r\n    }\r\n}\r\n\r\n/**\r\n * @param {Blob} file - File or Blob object.\r\n * @param {function} callback - Callback function.\r\n * @example\r\n * getSeekableBlob(blob or file, callback);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\nfunction getSeekableBlob(inputBlob, callback) {\r\n    // EBML.js copyrights goes to: https://github.com/legokichi/ts-ebml\r\n    if (typeof EBML === 'undefined') {\r\n        throw new Error('Please link: https://www.webrtc-experiment.com/EBML.js');\r\n    }\r\n\r\n    var reader = new EBML.Reader();\r\n    var decoder = new EBML.Decoder();\r\n    var tools = EBML.tools;\r\n\r\n    var fileReader = new FileReader();\r\n    fileReader.onload = function(e) {\r\n        var ebmlElms = decoder.decode(this.result);\r\n        ebmlElms.forEach(function(element) {\r\n            reader.read(element);\r\n        });\r\n        reader.stop();\r\n        var refinedMetadataBuf = tools.makeMetadataSeekable(reader.metadatas, reader.duration, reader.cues);\r\n        var body = this.result.slice(reader.metadataSize);\r\n        var newBlob = new Blob([refinedMetadataBuf, body], {\r\n            type: 'video/webm'\r\n        });\r\n\r\n        callback(newBlob);\r\n    };\r\n    fileReader.readAsArrayBuffer(inputBlob);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.invokeSaveAsDialog = invokeSaveAsDialog;\r\n    RecordRTC.getTracks = getTracks;\r\n    RecordRTC.getSeekableBlob = getSeekableBlob;\r\n    RecordRTC.bytesToSize = bytesToSize;\r\n    RecordRTC.isElectron = isElectron;\r\n}\r\n\r\n// __________ (used to handle stuff like http://goo.gl/xmE5eg) issue #129\r\n// Storage.js\r\n\r\n/**\r\n * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. \"new AudioContext\".\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * Storage.AudioContext === webkitAudioContext\r\n * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Storage = {};\r\n\r\nif (typeof AudioContext !== 'undefined') {\r\n    Storage.AudioContext = AudioContext;\r\n} else if (typeof webkitAudioContext !== 'undefined') {\r\n    Storage.AudioContext = webkitAudioContext;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Storage = Storage;\r\n}\n\r\nfunction isMediaRecorderCompatible() {\r\n    if (isFirefox || isSafari || isEdge) {\r\n        return true;\r\n    }\r\n\r\n    var nVer = navigator.appVersion;\r\n    var nAgt = navigator.userAgent;\r\n    var fullVersion = '' + parseFloat(navigator.appVersion);\r\n    var majorVersion = parseInt(navigator.appVersion, 10);\r\n    var nameOffset, verOffset, ix;\r\n\r\n    if (isChrome || isOpera) {\r\n        verOffset = nAgt.indexOf('Chrome');\r\n        fullVersion = nAgt.substring(verOffset + 7);\r\n    }\r\n\r\n    // trim the fullVersion string at semicolon/space if present\r\n    if ((ix = fullVersion.indexOf(';')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    if ((ix = fullVersion.indexOf(' ')) !== -1) {\r\n        fullVersion = fullVersion.substring(0, ix);\r\n    }\r\n\r\n    majorVersion = parseInt('' + fullVersion, 10);\r\n\r\n    if (isNaN(majorVersion)) {\r\n        fullVersion = '' + parseFloat(navigator.appVersion);\r\n        majorVersion = parseInt(navigator.appVersion, 10);\r\n    }\r\n\r\n    return majorVersion >= 49;\r\n}\n\r\n// ______________________\r\n// MediaStreamRecorder.js\r\n\r\n/**\r\n * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.\r\n * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://github.com/muaz-khan|Muaz Khan}\r\n * @typedef MediaStreamRecorder\r\n * @class\r\n * @example\r\n * var config = {\r\n *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis\r\n *     audioBitsPerSecond : 256 * 8 * 1024,\r\n *     videoBitsPerSecond : 256 * 8 * 1024,\r\n *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two\r\n *     checkForInactiveTracks: true,\r\n *     timeSlice: 1000, // concatenate intervals based blobs\r\n *     ondataavailable: function() {} // get intervals based blobs\r\n * }\r\n * var recorder = new MediaStreamRecorder(mediaStream, config);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs:true, initCallback: function, mimeType: \"video/webm\", timeSlice: 1000}\r\n * @throws Will throw an error if first argument \"MediaStream\" is missing. Also throws error if \"MediaRecorder API\" are not supported by the browser.\r\n */\r\n\r\nfunction MediaStreamRecorder(mediaStream, config) {\r\n    var self = this;\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    if (typeof MediaRecorder === 'undefined') {\r\n        throw 'Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.';\r\n    }\r\n\r\n    config = config || {\r\n        // bitsPerSecond: 256 * 8 * 1024,\r\n        mimeType: 'video/webm'\r\n    };\r\n\r\n    if (config.type === 'audio') {\r\n        if (getTracks(mediaStream, 'video').length && getTracks(mediaStream, 'audio').length) {\r\n            var stream;\r\n            if (!!navigator.mozGetUserMedia) {\r\n                stream = new MediaStream();\r\n                stream.addTrack(getTracks(mediaStream, 'audio')[0]);\r\n            } else {\r\n                // webkitMediaStream\r\n                stream = new MediaStream(getTracks(mediaStream, 'audio'));\r\n            }\r\n            mediaStream = stream;\r\n        }\r\n\r\n        if (!config.mimeType || config.mimeType.toString().toLowerCase().indexOf('audio') === -1) {\r\n            config.mimeType = isChrome ? 'audio/webm' : 'audio/ogg';\r\n        }\r\n\r\n        if (config.mimeType && config.mimeType.toString().toLowerCase() !== 'audio/ogg' && !!navigator.mozGetUserMedia) {\r\n            // forcing better codecs on Firefox (via #166)\r\n            config.mimeType = 'audio/ogg';\r\n        }\r\n    }\r\n\r\n    var arrayOfBlobs = [];\r\n\r\n    /**\r\n     * This method returns array of blobs. Use only with \"timeSlice\". Its useful to preview recording anytime, without using the \"stop\" method.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var arrayOfBlobs = recorder.getArrayOfBlobs();\r\n     * @returns {Array} Returns array of recorded blobs.\r\n     */\r\n    this.getArrayOfBlobs = function() {\r\n        return arrayOfBlobs;\r\n    };\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // set defaults\r\n        self.blob = null;\r\n        self.clearRecordedData();\r\n        self.timestamps = [];\r\n        allStates = [];\r\n        arrayOfBlobs = [];\r\n\r\n        var recorderHints = config;\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Passing following config over MediaRecorder API.', recorderHints);\r\n        }\r\n\r\n        if (mediaRecorder) {\r\n            // mandatory to make sure Firefox doesn't fails to record streams 3-4 times without reloading the page.\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (isChrome && !isMediaRecorderCompatible()) {\r\n            // to support video-only recording on stable\r\n            recorderHints = 'video/vp8';\r\n        }\r\n\r\n        if (typeof MediaRecorder.isTypeSupported === 'function' && recorderHints.mimeType) {\r\n            if (!MediaRecorder.isTypeSupported(recorderHints.mimeType)) {\r\n                if (!config.disableLogs) {\r\n                    console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n                }\r\n\r\n                recorderHints.mimeType = config.type === 'audio' ? 'audio/webm' : 'video/webm';\r\n            }\r\n        }\r\n\r\n        // using MediaRecorder API here\r\n        try {\r\n            mediaRecorder = new MediaRecorder(mediaStream, recorderHints);\r\n\r\n            // reset\r\n            config.mimeType = recorderHints.mimeType;\r\n        } catch (e) {\r\n            // chrome-based fallback\r\n            mediaRecorder = new MediaRecorder(mediaStream);\r\n        }\r\n\r\n        // old hack?\r\n        if (recorderHints.mimeType && !MediaRecorder.isTypeSupported && 'canRecordMimeType' in mediaRecorder && mediaRecorder.canRecordMimeType(recorderHints.mimeType) === false) {\r\n            if (!config.disableLogs) {\r\n                console.warn('MediaRecorder API seems unable to record mimeType:', recorderHints.mimeType);\r\n            }\r\n        }\r\n\r\n        // Dispatching OnDataAvailable Handler\r\n        mediaRecorder.ondataavailable = function(e) {\r\n            if (e.data) {\r\n                allStates.push('ondataavailable: ' + bytesToSize(e.data.size));\r\n            }\r\n\r\n            if (typeof config.timeSlice === 'number') {\r\n                if (e.data && e.data.size) {\r\n                    arrayOfBlobs.push(e.data);\r\n                    updateTimeStamp();\r\n\r\n                    if (typeof config.ondataavailable === 'function') {\r\n                        // intervals based blobs\r\n                        var blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                            type: getMimeType(recorderHints)\r\n                        });\r\n                        config.ondataavailable(blob);\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n\r\n            if (!e.data || !e.data.size || e.data.size < 100 || self.blob) {\r\n                // make sure that stopRecording always getting fired\r\n                // even if there is invalid data\r\n                if (self.recordingCallback) {\r\n                    self.recordingCallback(new Blob([], {\r\n                        type: getMimeType(recorderHints)\r\n                    }));\r\n                    self.recordingCallback = null;\r\n                }\r\n                return;\r\n            }\r\n\r\n            self.blob = config.getNativeBlob ? e.data : new Blob([e.data], {\r\n                type: getMimeType(recorderHints)\r\n            });\r\n\r\n            if (self.recordingCallback) {\r\n                self.recordingCallback(self.blob);\r\n                self.recordingCallback = null;\r\n            }\r\n        };\r\n\r\n        mediaRecorder.onstart = function() {\r\n            allStates.push('started');\r\n        };\r\n\r\n        mediaRecorder.onpause = function() {\r\n            allStates.push('paused');\r\n        };\r\n\r\n        mediaRecorder.onresume = function() {\r\n            allStates.push('resumed');\r\n        };\r\n\r\n        mediaRecorder.onstop = function() {\r\n            allStates.push('stopped');\r\n        };\r\n\r\n        mediaRecorder.onerror = function(error) {\r\n            if (!error) {\r\n                return;\r\n            }\r\n\r\n            if (!error.name) {\r\n                error.name = 'UnknownError';\r\n            }\r\n\r\n            allStates.push('error: ' + error);\r\n\r\n            if (!config.disableLogs) {\r\n                // via: https://w3c.github.io/mediacapture-record/MediaRecorder.html#exception-summary\r\n                if (error.name.toString().toLowerCase().indexOf('invalidstate') !== -1) {\r\n                    console.error('The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('notsupported') !== -1) {\r\n                    console.error('MIME type (', recorderHints.mimeType, ') is not supported.', error);\r\n                } else if (error.name.toString().toLowerCase().indexOf('security') !== -1) {\r\n                    console.error('MediaRecorder security error', error);\r\n                }\r\n\r\n                // older code below\r\n                else if (error.name === 'OutOfMemory') {\r\n                    console.error('The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'IllegalStreamModification') {\r\n                    console.error('A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'OtherRecordingError') {\r\n                    console.error('Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.', error);\r\n                } else if (error.name === 'GenericError') {\r\n                    console.error('The UA cannot provide the codec or recording option that has been requested.', error);\r\n                } else {\r\n                    console.error('MediaRecorder Error', error);\r\n                }\r\n            }\r\n\r\n            (function(looper) {\r\n                if (!self.manuallyStopped && mediaRecorder && mediaRecorder.state === 'inactive') {\r\n                    delete config.timeslice;\r\n\r\n                    // 10 minutes, enough?\r\n                    mediaRecorder.start(10 * 60 * 1000);\r\n                    return;\r\n                }\r\n\r\n                setTimeout(looper, 1000);\r\n            })();\r\n\r\n            if (mediaRecorder.state !== 'inactive' && mediaRecorder.state !== 'stopped') {\r\n                mediaRecorder.stop();\r\n            }\r\n        };\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            updateTimeStamp();\r\n            mediaRecorder.start(config.timeSlice);\r\n        } else {\r\n            // default is 60 minutes; enough?\r\n            // use config => {timeSlice: 1000} otherwise\r\n\r\n            mediaRecorder.start(3.6e+6);\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback(); // old code\r\n        }\r\n    };\r\n\r\n    /**\r\n     * @property {Array} timestamps - Array of time stamps\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * console.log(recorder.timestamps);\r\n     */\r\n    this.timestamps = [];\r\n\r\n    function updateTimeStamp() {\r\n        self.timestamps.push(new Date().getTime());\r\n\r\n        if (typeof config.onTimeStamp === 'function') {\r\n            config.onTimeStamp(self.timestamps[self.timestamps.length - 1], self.timestamps);\r\n        }\r\n    }\r\n\r\n    function getMimeType(secondObject) {\r\n        if (mediaRecorder && mediaRecorder.mimeType) {\r\n            return mediaRecorder.mimeType;\r\n        }\r\n\r\n        return secondObject.mimeType || 'video/webm';\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        self.manuallyStopped = true; // used inside the mediaRecorder.onerror\r\n\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        this.recordingCallback = callback;\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.stop();\r\n        }\r\n\r\n        if (typeof config.timeSlice === 'number') {\r\n            setTimeout(function() {\r\n                self.blob = new Blob(arrayOfBlobs, {\r\n                    type: getMimeType(config)\r\n                });\r\n\r\n                self.recordingCallback(self.blob);\r\n            }, 100);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'recording') {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        if (mediaRecorder.state === 'paused') {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder && mediaRecorder.state === 'recording') {\r\n            self.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        arrayOfBlobs = [];\r\n        mediaRecorder = null;\r\n        self.timestamps = [];\r\n    }\r\n\r\n    // Reference to \"MediaRecorder\" object\r\n    var mediaRecorder;\r\n\r\n    /**\r\n     * Access to native MediaRecorder API\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @instance\r\n     * @example\r\n     * var internal = recorder.getInternalRecorder();\r\n     * internal.ondataavailable = function() {}; // override\r\n     * internal.stream, internal.onpause, internal.onstop, etc.\r\n     * @returns {Object} Returns internal recording object.\r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return mediaRecorder;\r\n    };\r\n\r\n    function isMediaStreamActive() {\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * recorder.stop(function() {\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n\r\n\r\n    /**\r\n     * Get MediaRecorder readonly state.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getState();\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        if (!mediaRecorder) {\r\n            return 'inactive';\r\n        }\r\n\r\n        return mediaRecorder.state || 'inactive';\r\n    };\r\n\r\n    // list of all recording states\r\n    var allStates = [];\r\n\r\n    /**\r\n     * Get MediaRecorder all recording states.\r\n     * @method\r\n     * @memberof MediaStreamRecorder\r\n     * @example\r\n     * var state = recorder.getAllStates();\r\n     * @returns {Array} Returns all recording states\r\n     */\r\n    this.getAllStates = function() {\r\n        return allStates;\r\n    };\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = false; // disable to minimize CPU usage\r\n    }\r\n\r\n    var self = this;\r\n\r\n    // this method checks if media stream is stopped\r\n    // or if any track is ended.\r\n    (function looper() {\r\n        if (!mediaRecorder || config.checkForInactiveTracks === false) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            self.stop();\r\n            return;\r\n        }\r\n\r\n        setTimeout(looper, 1000); // check every second\r\n    })();\r\n\r\n    // for debugging\r\n    this.name = 'MediaStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MediaStreamRecorder = MediaStreamRecorder;\r\n}\r\n\r\n// source code from: http://typedarray.org/wp-content/projects/WebAudioRecorder/script.js\r\n// https://github.com/mattdiamond/Recorderjs#license-mit\r\n// ______________________\r\n// StereoAudioRecorder.js\r\n\r\n/**\r\n * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring \"stereo\" audio-recording in chrome.\r\n * @summary JavaScript standalone object for stereo audio recording.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef StereoAudioRecorder\r\n * @class\r\n * @example\r\n * var recorder = new StereoAudioRecorder(MediaStream, {\r\n *     sampleRate: 44100,\r\n *     bufferSize: 4096\r\n * });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}\r\n */\r\n\r\nfunction StereoAudioRecorder(mediaStream, config) {\r\n    if (!getTracks(mediaStream, 'audio').length) {\r\n        throw 'Your stream has no audio tracks.';\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var self = this;\r\n\r\n    // variables\r\n    var leftchannel = [];\r\n    var rightchannel = [];\r\n    var recording = false;\r\n    var recordingLength = 0;\r\n    var jsAudioNode;\r\n\r\n    var numberOfAudioChannels = 2;\r\n\r\n    /**\r\n     * Set sample rates such as 8K or 16K. Reference: http://stackoverflow.com/a/28977136/552182\r\n     * @property {number} desiredSampRate - Desired Bits per sample * 1000\r\n     * @memberof StereoAudioRecorder\r\n     * @instance\r\n     * @example\r\n     * var recorder = StereoAudioRecorder(mediaStream, {\r\n     *   desiredSampRate: 16 * 1000 // bits-per-sample * 1000\r\n     * });\r\n     */\r\n    var desiredSampRate = config.desiredSampRate;\r\n\r\n    // backward compatibility\r\n    if (config.leftChannel === true) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (config.numberOfAudioChannels === 1) {\r\n        numberOfAudioChannels = 1;\r\n    }\r\n\r\n    if (!numberOfAudioChannels || numberOfAudioChannels < 1) {\r\n        numberOfAudioChannels = 2;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('StereoAudioRecorder is set to record number of channels: ' + numberOfAudioChannels);\r\n    }\r\n\r\n    // if any Track within the MediaStream is muted or not enabled at any time, \r\n    // the browser will only record black frames \r\n    // or silence since that is the content produced by the Track\r\n    // so we need to stopRecording as soon as any single track ends.\r\n    if (typeof config.checkForInactiveTracks === 'undefined') {\r\n        config.checkForInactiveTracks = true;\r\n    }\r\n\r\n    function isMediaStreamActive() {\r\n        if (config.checkForInactiveTracks === false) {\r\n            // always return \"true\"\r\n            return true;\r\n        }\r\n\r\n        if ('active' in mediaStream) {\r\n            if (!mediaStream.active) {\r\n                return false;\r\n            }\r\n        } else if ('ended' in mediaStream) { // old hack\r\n            if (mediaStream.ended) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        resetVariables();\r\n\r\n        isAudioProcessStarted = isPaused = false;\r\n        recording = true;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            looper();\r\n        }\r\n    };\r\n\r\n    function mergeLeftRightBuffers(config, callback) {\r\n        function mergeAudioBuffers(config, cb) {\r\n            var numberOfAudioChannels = config.numberOfAudioChannels;\r\n\r\n            // todo: \"slice(0)\" --- is it causes loop? Should be removed?\r\n            var leftBuffers = config.leftBuffers.slice(0);\r\n            var rightBuffers = config.rightBuffers.slice(0);\r\n            var sampleRate = config.sampleRate;\r\n            var internalInterleavedLength = config.internalInterleavedLength;\r\n            var desiredSampRate = config.desiredSampRate;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n                rightBuffers = mergeBuffers(rightBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                    rightBuffers = interpolateArray(rightBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                leftBuffers = mergeBuffers(leftBuffers, internalInterleavedLength);\r\n\r\n                if (desiredSampRate) {\r\n                    leftBuffers = interpolateArray(leftBuffers, desiredSampRate, sampleRate);\r\n                }\r\n            }\r\n\r\n            // set sample rate as desired sample rate\r\n            if (desiredSampRate) {\r\n                sampleRate = desiredSampRate;\r\n            }\r\n\r\n            // for changing the sampling rate, reference:\r\n            // http://stackoverflow.com/a/28977136/552182\r\n            function interpolateArray(data, newSampleRate, oldSampleRate) {\r\n                var fitCount = Math.round(data.length * (newSampleRate / oldSampleRate));\r\n                var newData = [];\r\n                var springFactor = Number((data.length - 1) / (fitCount - 1));\r\n                newData[0] = data[0];\r\n                for (var i = 1; i < fitCount - 1; i++) {\r\n                    var tmp = i * springFactor;\r\n                    var before = Number(Math.floor(tmp)).toFixed();\r\n                    var after = Number(Math.ceil(tmp)).toFixed();\r\n                    var atPoint = tmp - before;\r\n                    newData[i] = linearInterpolate(data[before], data[after], atPoint);\r\n                }\r\n                newData[fitCount - 1] = data[data.length - 1];\r\n                return newData;\r\n            }\r\n\r\n            function linearInterpolate(before, after, atPoint) {\r\n                return before + (after - before) * atPoint;\r\n            }\r\n\r\n            function mergeBuffers(channelBuffer, rLength) {\r\n                var result = new Float64Array(rLength);\r\n                var offset = 0;\r\n                var lng = channelBuffer.length;\r\n\r\n                for (var i = 0; i < lng; i++) {\r\n                    var buffer = channelBuffer[i];\r\n                    result.set(buffer, offset);\r\n                    offset += buffer.length;\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function interleave(leftChannel, rightChannel) {\r\n                var length = leftChannel.length + rightChannel.length;\r\n\r\n                var result = new Float64Array(length);\r\n\r\n                var inputIndex = 0;\r\n\r\n                for (var index = 0; index < length;) {\r\n                    result[index++] = leftChannel[inputIndex];\r\n                    result[index++] = rightChannel[inputIndex];\r\n                    inputIndex++;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            function writeUTFBytes(view, offset, string) {\r\n                var lng = string.length;\r\n                for (var i = 0; i < lng; i++) {\r\n                    view.setUint8(offset + i, string.charCodeAt(i));\r\n                }\r\n            }\r\n\r\n            // interleave both channels together\r\n            var interleaved;\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                interleaved = interleave(leftBuffers, rightBuffers);\r\n            }\r\n\r\n            if (numberOfAudioChannels === 1) {\r\n                interleaved = leftBuffers;\r\n            }\r\n\r\n            var interleavedLength = interleaved.length;\r\n\r\n            // create wav file\r\n            var resultingBufferLength = 44 + interleavedLength * 2;\r\n\r\n            var buffer = new ArrayBuffer(resultingBufferLength);\r\n\r\n            var view = new DataView(buffer);\r\n\r\n            // RIFF chunk descriptor/identifier \r\n            writeUTFBytes(view, 0, 'RIFF');\r\n\r\n            // RIFF chunk length\r\n            // changed \"44\" to \"36\" via #401\r\n            view.setUint32(4, 36 + interleavedLength * 2, true);\r\n\r\n            // RIFF type \r\n            writeUTFBytes(view, 8, 'WAVE');\r\n\r\n            // format chunk identifier \r\n            // FMT sub-chunk\r\n            writeUTFBytes(view, 12, 'fmt ');\r\n\r\n            // format chunk length \r\n            view.setUint32(16, 16, true);\r\n\r\n            // sample format (raw)\r\n            view.setUint16(20, 1, true);\r\n\r\n            // stereo (2 channels)\r\n            view.setUint16(22, numberOfAudioChannels, true);\r\n\r\n            // sample rate \r\n            view.setUint32(24, sampleRate, true);\r\n\r\n            // byte rate (sample rate * block align)\r\n            view.setUint32(28, sampleRate * numberOfAudioChannels * 2, true);\r\n\r\n            // block align (channel count * bytes per sample) \r\n            view.setUint16(32, numberOfAudioChannels * 2, true);\r\n\r\n            // bits per sample \r\n            view.setUint16(34, 16, true);\r\n\r\n            // data sub-chunk\r\n            // data chunk identifier \r\n            writeUTFBytes(view, 36, 'data');\r\n\r\n            // data chunk length \r\n            view.setUint32(40, interleavedLength * 2, true);\r\n\r\n            // write the PCM samples\r\n            var lng = interleavedLength;\r\n            var index = 44;\r\n            var volume = 1;\r\n            for (var i = 0; i < lng; i++) {\r\n                view.setInt16(index, interleaved[i] * (0x7FFF * volume), true);\r\n                index += 2;\r\n            }\r\n\r\n            if (cb) {\r\n                return cb({\r\n                    buffer: buffer,\r\n                    view: view\r\n                });\r\n            }\r\n\r\n            postMessage({\r\n                buffer: buffer,\r\n                view: view\r\n            });\r\n        }\r\n\r\n        if (config.noWorker) {\r\n            mergeAudioBuffers(config, function(data) {\r\n                callback(data.buffer, data.view);\r\n            });\r\n            return;\r\n        }\r\n\r\n\r\n        var webWorker = processInWebWorker(mergeAudioBuffers);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            callback(event.data.buffer, event.data.view);\r\n\r\n            // release memory\r\n            URL.revokeObjectURL(webWorker.workerURL);\r\n\r\n            // kill webworker (or Chrome will kill your page after ~25 calls)\r\n            webWorker.terminate();\r\n        };\r\n\r\n        webWorker.postMessage(config);\r\n    }\r\n\r\n    function processInWebWorker(_function) {\r\n        var workerURL = URL.createObjectURL(new Blob([_function.toString(),\r\n            ';this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(workerURL);\r\n        worker.workerURL = workerURL;\r\n        return worker;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        // stop recording\r\n        recording = false;\r\n\r\n        mergeLeftRightBuffers({\r\n            desiredSampRate: desiredSampRate,\r\n            sampleRate: sampleRate,\r\n            numberOfAudioChannels: numberOfAudioChannels,\r\n            internalInterleavedLength: recordingLength,\r\n            leftBuffers: leftchannel,\r\n            rightBuffers: numberOfAudioChannels === 1 ? [] : rightchannel,\r\n            noWorker: config.noWorker\r\n        }, function(buffer, view) {\r\n            /**\r\n             * @property {Blob} blob - The recorded blob object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            self.blob = new Blob([view], {\r\n                type: 'audio/wav'\r\n            });\r\n\r\n            /**\r\n             * @property {ArrayBuffer} buffer - The recorded buffer object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var buffer = recorder.buffer;\r\n             * });\r\n             */\r\n            self.buffer = new ArrayBuffer(view.buffer.byteLength);\r\n\r\n            /**\r\n             * @property {DataView} view - The recorded data-view object.\r\n             * @memberof StereoAudioRecorder\r\n             * @example\r\n             * recorder.stop(function(){\r\n             *     var view = recorder.view;\r\n             * });\r\n             */\r\n            self.view = view;\r\n\r\n            self.sampleRate = desiredSampRate || sampleRate;\r\n            self.bufferSize = bufferSize;\r\n\r\n            // recorded audio length\r\n            self.length = recordingLength;\r\n\r\n            isAudioProcessStarted = false;\r\n\r\n            if (callback) {\r\n                callback(self.blob);\r\n            }\r\n        });\r\n    };\r\n\r\n    if (typeof RecordRTC.Storage === 'undefined') {\r\n        RecordRTC.Storage = {\r\n            AudioContextConstructor: null,\r\n            AudioContext: window.AudioContext || window.webkitAudioContext\r\n        };\r\n    }\r\n\r\n    if (!RecordRTC.Storage.AudioContextConstructor || RecordRTC.Storage.AudioContextConstructor.state === 'closed') {\r\n        RecordRTC.Storage.AudioContextConstructor = new RecordRTC.Storage.AudioContext();\r\n    }\r\n\r\n    var context = RecordRTC.Storage.AudioContextConstructor;\r\n\r\n    // creates an audio node from the microphone incoming stream\r\n    var audioInput = context.createMediaStreamSource(mediaStream);\r\n\r\n    var legalBufferValues = [0, 256, 512, 1024, 2048, 4096, 8192, 16384];\r\n\r\n    /**\r\n     * From the spec: This value controls how frequently the audioprocess event is\r\n     * dispatched and how many sample-frames need to be processed each call.\r\n     * Lower values for buffer size will result in a lower (better) latency.\r\n     * Higher values will be necessary to avoid audio breakup and glitches\r\n     * The size of the buffer (in sample-frames) which needs to\r\n     * be processed each time onprocessaudio is called.\r\n     * Legal values are (256, 512, 1024, 2048, 4096, 8192, 16384).\r\n     * @property {number} bufferSize - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     bufferSize: 4096\r\n     * });\r\n     */\r\n\r\n    // \"0\" means, let chrome decide the most accurate buffer-size for current platform.\r\n    var bufferSize = typeof config.bufferSize === 'undefined' ? 4096 : config.bufferSize;\r\n\r\n    if (legalBufferValues.indexOf(bufferSize) === -1) {\r\n        if (!config.disableLogs) {\r\n            console.log('Legal values for buffer-size are ' + JSON.stringify(legalBufferValues, null, '\\t'));\r\n        }\r\n    }\r\n\r\n    if (context.createJavaScriptNode) {\r\n        jsAudioNode = context.createJavaScriptNode(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else if (context.createScriptProcessor) {\r\n        jsAudioNode = context.createScriptProcessor(bufferSize, numberOfAudioChannels, numberOfAudioChannels);\r\n    } else {\r\n        throw 'WebAudio API has no support on this browser.';\r\n    }\r\n\r\n    // connect the stream to the script processor\r\n    audioInput.connect(jsAudioNode);\r\n\r\n    if (!config.bufferSize) {\r\n        bufferSize = jsAudioNode.bufferSize; // device buffer-size\r\n    }\r\n\r\n    /**\r\n     * The sample rate (in sample-frames per second) at which the\r\n     * AudioContext handles audio. It is assumed that all AudioNodes\r\n     * in the context run at this rate. In making this assumption,\r\n     * sample-rate converters or \"varispeed\" processors are not supported\r\n     * in real-time processing.\r\n     * The sampleRate parameter describes the sample-rate of the\r\n     * linear PCM audio data in the buffer in sample-frames per second.\r\n     * An implementation must support sample-rates in at least\r\n     * the range 22050 to 96000.\r\n     * @property {number} sampleRate - Buffer-size for how frequently the audioprocess event is dispatched.\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder = new StereoAudioRecorder(mediaStream, {\r\n     *     sampleRate: 44100\r\n     * });\r\n     */\r\n    var sampleRate = typeof config.sampleRate !== 'undefined' ? config.sampleRate : context.sampleRate || 44100;\r\n\r\n    if (sampleRate < 22050 || sampleRate > 96000) {\r\n        // Ref: http://stackoverflow.com/a/26303918/552182\r\n        if (!config.disableLogs) {\r\n            console.log('sample-rate must be under range 22050 and 96000.');\r\n        }\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        if (config.desiredSampRate) {\r\n            console.log('Desired sample-rate: ' + config.desiredSampRate);\r\n        }\r\n    }\r\n\r\n    var isPaused = false;\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (isMediaStreamActive() === false) {\r\n            throw 'Please make sure MediaStream is active.';\r\n        }\r\n\r\n        if (!recording) {\r\n            if (!config.disableLogs) {\r\n                console.log('Seems recording has been restarted.');\r\n            }\r\n            this.record();\r\n            return;\r\n        }\r\n\r\n        isPaused = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof StereoAudioRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        config.checkForInactiveTracks = false;\r\n\r\n        if (recording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function resetVariables() {\r\n        leftchannel = [];\r\n        rightchannel = [];\r\n        recordingLength = 0;\r\n        isAudioProcessStarted = false;\r\n        recording = false;\r\n        isPaused = false;\r\n        context = null;\r\n\r\n        self.leftchannel = leftchannel;\r\n        self.rightchannel = rightchannel;\r\n        self.numberOfAudioChannels = numberOfAudioChannels;\r\n        self.desiredSampRate = desiredSampRate;\r\n        self.sampleRate = sampleRate;\r\n        self.recordingLength = recordingLength;\r\n\r\n        intervalsBasedBuffers = {\r\n            left: [],\r\n            right: [],\r\n            recordingLength: 0\r\n        };\r\n    }\r\n\r\n    function clearRecordedDataCB() {\r\n        if (jsAudioNode) {\r\n            jsAudioNode.onaudioprocess = null;\r\n            jsAudioNode.disconnect();\r\n            jsAudioNode = null;\r\n        }\r\n\r\n        if (audioInput) {\r\n            audioInput.disconnect();\r\n            audioInput = null;\r\n        }\r\n\r\n        resetVariables();\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'StereoAudioRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var isAudioProcessStarted = false;\r\n\r\n    function onAudioProcessDataAvailable(e) {\r\n        if (isPaused) {\r\n            return;\r\n        }\r\n\r\n        if (isMediaStreamActive() === false) {\r\n            if (!config.disableLogs) {\r\n                console.log('MediaStream seems stopped.');\r\n            }\r\n            jsAudioNode.disconnect();\r\n            recording = false;\r\n        }\r\n\r\n        if (!recording) {\r\n            if (audioInput) {\r\n                audioInput.disconnect();\r\n                audioInput = null;\r\n            }\r\n            return;\r\n        }\r\n\r\n        /**\r\n         * This method is called on \"onaudioprocess\" event's first invocation.\r\n         * @method {function} onAudioProcessStarted\r\n         * @memberof StereoAudioRecorder\r\n         * @example\r\n         * recorder.onAudioProcessStarted: function() { };\r\n         */\r\n        if (!isAudioProcessStarted) {\r\n            isAudioProcessStarted = true;\r\n            if (config.onAudioProcessStarted) {\r\n                config.onAudioProcessStarted();\r\n            }\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        }\r\n\r\n        var left = e.inputBuffer.getChannelData(0);\r\n\r\n        // we clone the samples\r\n        var chLeft = new Float32Array(left);\r\n        leftchannel.push(chLeft);\r\n\r\n        if (numberOfAudioChannels === 2) {\r\n            var right = e.inputBuffer.getChannelData(1);\r\n            var chRight = new Float32Array(right);\r\n            rightchannel.push(chRight);\r\n        }\r\n\r\n        recordingLength += bufferSize;\r\n\r\n        // export raw PCM\r\n        self.recordingLength = recordingLength;\r\n\r\n        if (typeof config.timeSlice !== 'undefined') {\r\n            intervalsBasedBuffers.recordingLength += bufferSize;\r\n            intervalsBasedBuffers.left.push(chLeft);\r\n\r\n            if (numberOfAudioChannels === 2) {\r\n                intervalsBasedBuffers.right.push(chRight);\r\n            }\r\n        }\r\n    }\r\n\r\n    jsAudioNode.onaudioprocess = onAudioProcessDataAvailable;\r\n\r\n    // to prevent self audio to be connected with speakers\r\n    if (context.createMediaStreamDestination) {\r\n        jsAudioNode.connect(context.createMediaStreamDestination());\r\n    } else {\r\n        jsAudioNode.connect(context.destination);\r\n    }\r\n\r\n    // export raw PCM\r\n    this.leftchannel = leftchannel;\r\n    this.rightchannel = rightchannel;\r\n    this.numberOfAudioChannels = numberOfAudioChannels;\r\n    this.desiredSampRate = desiredSampRate;\r\n    this.sampleRate = sampleRate;\r\n    self.recordingLength = recordingLength;\r\n\r\n    // helper for intervals based blobs\r\n    var intervalsBasedBuffers = {\r\n        left: [],\r\n        right: [],\r\n        recordingLength: 0\r\n    };\r\n\r\n    // this looper is used to support intervals based blobs (via timeSlice+ondataavailable)\r\n    function looper() {\r\n        if (!recording || typeof config.ondataavailable !== 'function' || typeof config.timeSlice === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (intervalsBasedBuffers.left.length) {\r\n            mergeLeftRightBuffers({\r\n                desiredSampRate: desiredSampRate,\r\n                sampleRate: sampleRate,\r\n                numberOfAudioChannels: numberOfAudioChannels,\r\n                internalInterleavedLength: intervalsBasedBuffers.recordingLength,\r\n                leftBuffers: intervalsBasedBuffers.left,\r\n                rightBuffers: numberOfAudioChannels === 1 ? [] : intervalsBasedBuffers.right\r\n            }, function(buffer, view) {\r\n                var blob = new Blob([view], {\r\n                    type: 'audio/wav'\r\n                });\r\n                config.ondataavailable(blob);\r\n\r\n                setTimeout(looper, config.timeSlice);\r\n            });\r\n\r\n            intervalsBasedBuffers = {\r\n                left: [],\r\n                right: [],\r\n                recordingLength: 0\r\n            };\r\n        } else {\r\n            setTimeout(looper, config.timeSlice);\r\n        }\r\n    }\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.StereoAudioRecorder = StereoAudioRecorder;\r\n}\r\n\r\n// _________________\r\n// CanvasRecorder.js\r\n\r\n/**\r\n * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.\r\n * @summary HTML2Canvas recording into video WebM.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef CanvasRecorder\r\n * @class\r\n * @example\r\n * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.\r\n * @param {object} config - {disableLogs:true, initCallback: function}\r\n */\r\n\r\nfunction CanvasRecorder(htmlElement, config) {\r\n    if (typeof html2canvas === 'undefined') {\r\n        throw 'Please link: https://www.webrtc-experiment.com/screenshot.js';\r\n    }\r\n\r\n    config = config || {};\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    // via DetectRTC.js\r\n    var isCanvasSupportsStreamCapturing = false;\r\n    ['captureStream', 'mozCaptureStream', 'webkitCaptureStream'].forEach(function(item) {\r\n        if (item in document.createElement('canvas')) {\r\n            isCanvasSupportsStreamCapturing = true;\r\n        }\r\n    });\r\n\r\n    var _isChrome = (!!window.webkitRTCPeerConnection || !!window.webkitGetUserMedia) && !!window.chrome;\r\n\r\n    var chromeVersion = 50;\r\n    var matchArray = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\r\n    if (_isChrome && matchArray && matchArray[2]) {\r\n        chromeVersion = parseInt(matchArray[2], 10);\r\n    }\r\n\r\n    if (_isChrome && chromeVersion < 52) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    if (config.useWhammyRecorder) {\r\n        isCanvasSupportsStreamCapturing = false;\r\n    }\r\n\r\n    var globalCanvas, mediaStreamRecorder;\r\n\r\n    if (isCanvasSupportsStreamCapturing) {\r\n        if (!config.disableLogs) {\r\n            console.log('Your browser supports both MediRecorder API and canvas.captureStream!');\r\n        }\r\n\r\n        if (htmlElement instanceof HTMLCanvasElement) {\r\n            globalCanvas = htmlElement;\r\n        } else if (htmlElement instanceof CanvasRenderingContext2D) {\r\n            globalCanvas = htmlElement.canvas;\r\n        } else {\r\n            throw 'Please pass either HTMLCanvasElement or CanvasRenderingContext2D.';\r\n        }\r\n    } else if (!!navigator.mozGetUserMedia) {\r\n        if (!config.disableLogs) {\r\n            console.error('Canvas recording is NOT supported in Firefox.');\r\n        }\r\n    }\r\n\r\n    var isRecording;\r\n\r\n    /**\r\n     * This method records Canvas.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        isRecording = true;\r\n\r\n        if (isCanvasSupportsStreamCapturing && !config.useWhammyRecorder) {\r\n            // CanvasCaptureMediaStream\r\n            var canvasMediaStream;\r\n            if ('captureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.captureStream(25); // 25 FPS\r\n            } else if ('mozCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.mozCaptureStream(25);\r\n            } else if ('webkitCaptureStream' in globalCanvas) {\r\n                canvasMediaStream = globalCanvas.webkitCaptureStream(25);\r\n            }\r\n\r\n            try {\r\n                var mdStream = new MediaStream();\r\n                mdStream.addTrack(getTracks(canvasMediaStream, 'video')[0]);\r\n                canvasMediaStream = mdStream;\r\n            } catch (e) {}\r\n\r\n            if (!canvasMediaStream) {\r\n                throw 'captureStream API are NOT available.';\r\n            }\r\n\r\n            // Note: Jan 18, 2016 status is that, \r\n            // Firefox MediaRecorder API can't record CanvasCaptureMediaStream object.\r\n            mediaStreamRecorder = new MediaStreamRecorder(canvasMediaStream, {\r\n                mimeType: config.mimeType || 'video/webm'\r\n            });\r\n            mediaStreamRecorder.record();\r\n        } else {\r\n            whammy.frames = [];\r\n            lastTime = new Date().getTime();\r\n            drawCanvasFrame();\r\n        }\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    this.getWebPImages = function(callback) {\r\n        if (htmlElement.nodeName.toLowerCase() !== 'canvas') {\r\n            callback();\r\n            return;\r\n        }\r\n\r\n        var framesLength = whammy.frames.length;\r\n        whammy.frames.forEach(function(frame, idx) {\r\n            var framesRemaining = framesLength - idx;\r\n            if (!config.disableLogs) {\r\n                console.log(framesRemaining + '/' + framesLength + ' frames remaining');\r\n            }\r\n\r\n            if (config.onEncodingCallback) {\r\n                config.onEncodingCallback(framesRemaining, framesLength);\r\n            }\r\n\r\n            var webp = frame.image.toDataURL('image/webp', 1);\r\n            whammy.frames[idx].image = webp;\r\n        });\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('Generating WebM');\r\n        }\r\n\r\n        callback();\r\n    };\r\n\r\n    /**\r\n     * This method stops recording Canvas.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        isRecording = false;\r\n\r\n        var that = this;\r\n\r\n        if (isCanvasSupportsStreamCapturing && mediaStreamRecorder) {\r\n            mediaStreamRecorder.stop(callback);\r\n            return;\r\n        }\r\n\r\n        this.getWebPImages(function() {\r\n            /**\r\n             * @property {Blob} blob - Recorded frames in video/webm blob.\r\n             * @memberof CanvasRecorder\r\n             * @example\r\n             * recorder.stop(function() {\r\n             *     var blob = recorder.blob;\r\n             * });\r\n             */\r\n            whammy.compile(function(blob) {\r\n                if (!config.disableLogs) {\r\n                    console.log('Recording finished!');\r\n                }\r\n\r\n                that.blob = blob;\r\n\r\n                if (that.blob.forEach) {\r\n                    that.blob = new Blob([], {\r\n                        type: 'video/webm'\r\n                    });\r\n                }\r\n\r\n                if (callback) {\r\n                    callback(that.blob);\r\n                }\r\n\r\n                whammy.frames = [];\r\n            });\r\n        });\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.pause();\r\n            return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (mediaStreamRecorder instanceof MediaStreamRecorder) {\r\n            mediaStreamRecorder.resume();\r\n            return;\r\n        }\r\n\r\n        if (!isRecording) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof CanvasRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (isRecording) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isRecording = false;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'CanvasRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    function cloneCanvas() {\r\n        //create a new canvas\r\n        var newCanvas = document.createElement('canvas');\r\n        var context = newCanvas.getContext('2d');\r\n\r\n        //set dimensions\r\n        newCanvas.width = htmlElement.width;\r\n        newCanvas.height = htmlElement.height;\r\n\r\n        //apply the old canvas to the new one\r\n        context.drawImage(htmlElement, 0, 0);\r\n\r\n        //return the new canvas\r\n        return newCanvas;\r\n    }\r\n\r\n    function drawCanvasFrame() {\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawCanvasFrame, 500);\r\n        }\r\n\r\n        if (htmlElement.nodeName.toLowerCase() === 'canvas') {\r\n            var duration = new Date().getTime() - lastTime;\r\n            // via #206, by Jack i.e. @Seymourr\r\n            lastTime = new Date().getTime();\r\n\r\n            whammy.frames.push({\r\n                image: cloneCanvas(),\r\n                duration: duration\r\n            });\r\n\r\n            if (isRecording) {\r\n                setTimeout(drawCanvasFrame, config.frameInterval);\r\n            }\r\n            return;\r\n        }\r\n\r\n        html2canvas(htmlElement, {\r\n            grabMouse: typeof config.showMousePointer === 'undefined' || config.showMousePointer,\r\n            onrendered: function(canvas) {\r\n                var duration = new Date().getTime() - lastTime;\r\n                if (!duration) {\r\n                    return setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n\r\n                // via #206, by Jack i.e. @Seymourr\r\n                lastTime = new Date().getTime();\r\n\r\n                whammy.frames.push({\r\n                    image: canvas.toDataURL('image/webp', 1),\r\n                    duration: duration\r\n                });\r\n\r\n                if (isRecording) {\r\n                    setTimeout(drawCanvasFrame, config.frameInterval);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    var lastTime = new Date().getTime();\r\n\r\n    var whammy = new Whammy.Video(100);\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.CanvasRecorder = CanvasRecorder;\r\n}\n\r\n// _________________\r\n// WhammyRecorder.js\r\n\r\n/**\r\n * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.\r\n * @summary Video recording feature in Chrome.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WhammyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WhammyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}\r\n */\r\n\r\nfunction WhammyRecorder(mediaStream, config) {\r\n\r\n    config = config || {};\r\n\r\n    if (!config.frameInterval) {\r\n        config.frameInterval = 10;\r\n    }\r\n\r\n    if (!config.disableLogs) {\r\n        console.log('Using frames-interval:', config.frameInterval);\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (!config.width) {\r\n            config.width = 320;\r\n        }\r\n\r\n        if (!config.height) {\r\n            config.height = 240;\r\n        }\r\n\r\n        if (!config.video) {\r\n            config.video = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        if (!config.canvas) {\r\n            config.canvas = {\r\n                width: config.width,\r\n                height: config.height\r\n            };\r\n        }\r\n\r\n        canvas.width = config.canvas.width || 320;\r\n        canvas.height = config.canvas.height || 240;\r\n\r\n        context = canvas.getContext('2d');\r\n\r\n        // setting defaults\r\n        if (config.video && config.video instanceof HTMLVideoElement) {\r\n            video = config.video.cloneNode();\r\n\r\n            if (config.initCallback) {\r\n                config.initCallback();\r\n            }\r\n        } else {\r\n            video = document.createElement('video');\r\n\r\n            setSrcObject(mediaStream, video);\r\n\r\n            video.onloadedmetadata = function() { // \"onloadedmetadata\" may NOT work in FF?\r\n                if (config.initCallback) {\r\n                    config.initCallback();\r\n                }\r\n            };\r\n\r\n            video.width = config.video.width;\r\n            video.height = config.video.height;\r\n        }\r\n\r\n        video.muted = true;\r\n        video.play();\r\n\r\n        lastTime = new Date().getTime();\r\n        whammy = new Whammy.Video();\r\n\r\n        if (!config.disableLogs) {\r\n            console.log('canvas resolutions', canvas.width, '*', canvas.height);\r\n            console.log('video width/height', video.width || canvas.width, '*', video.height || canvas.height);\r\n        }\r\n\r\n        drawFrames(config.frameInterval);\r\n    };\r\n\r\n    /**\r\n     * Draw and push frames to Whammy\r\n     * @param {integer} frameInterval - set minimum interval (in milliseconds) between each time we push a frame to Whammy\r\n     */\r\n    function drawFrames(frameInterval) {\r\n        frameInterval = typeof frameInterval !== 'undefined' ? frameInterval : 10;\r\n\r\n        var duration = new Date().getTime() - lastTime;\r\n        if (!duration) {\r\n            return setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n\r\n        if (isPausedRecording) {\r\n            lastTime = new Date().getTime();\r\n            return setTimeout(drawFrames, 100);\r\n        }\r\n\r\n        // via #206, by Jack i.e. @Seymourr\r\n        lastTime = new Date().getTime();\r\n\r\n        if (video.paused) {\r\n            // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n            // Tweak for Android Chrome\r\n            video.play();\r\n        }\r\n\r\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n        whammy.frames.push({\r\n            duration: duration,\r\n            image: canvas.toDataURL('image/webp')\r\n        });\r\n\r\n        if (!isStopDrawing) {\r\n            setTimeout(drawFrames, frameInterval, frameInterval);\r\n        }\r\n    }\r\n\r\n    function asyncLoop(o) {\r\n        var i = -1,\r\n            length = o.length;\r\n\r\n        (function loop() {\r\n            i++;\r\n            if (i === length) {\r\n                o.callback();\r\n                return;\r\n            }\r\n\r\n            // \"setTimeout\" added by Jim McLeod\r\n            setTimeout(function() {\r\n                o.functionToLoop(loop, i);\r\n            }, 1);\r\n        })();\r\n    }\r\n\r\n\r\n    /**\r\n     * remove black frames from the beginning to the specified frame\r\n     * @param {Array} _frames - array of frames to be checked\r\n     * @param {number} _framesToCheck - number of frame until check will be executed (-1 - will drop all frames until frame not matched will be found)\r\n     * @param {number} _pixTolerance - 0 - very strict (only black pixel color) ; 1 - all\r\n     * @param {number} _frameTolerance - 0 - very strict (only black frame color) ; 1 - all\r\n     * @returns {Array} - array of frames\r\n     */\r\n    // pull#293 by @volodalexey\r\n    function dropBlackFrames(_frames, _framesToCheck, _pixTolerance, _frameTolerance, callback) {\r\n        var localCanvas = document.createElement('canvas');\r\n        localCanvas.width = canvas.width;\r\n        localCanvas.height = canvas.height;\r\n        var context2d = localCanvas.getContext('2d');\r\n        var resultFrames = [];\r\n\r\n        var checkUntilNotBlack = _framesToCheck === -1;\r\n        var endCheckFrame = (_framesToCheck && _framesToCheck > 0 && _framesToCheck <= _frames.length) ?\r\n            _framesToCheck : _frames.length;\r\n        var sampleColor = {\r\n            r: 0,\r\n            g: 0,\r\n            b: 0\r\n        };\r\n        var maxColorDifference = Math.sqrt(\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2) +\r\n            Math.pow(255, 2)\r\n        );\r\n        var pixTolerance = _pixTolerance && _pixTolerance >= 0 && _pixTolerance <= 1 ? _pixTolerance : 0;\r\n        var frameTolerance = _frameTolerance && _frameTolerance >= 0 && _frameTolerance <= 1 ? _frameTolerance : 0;\r\n        var doNotCheckNext = false;\r\n\r\n        asyncLoop({\r\n            length: endCheckFrame,\r\n            functionToLoop: function(loop, f) {\r\n                var matchPixCount, endPixCheck, maxPixCount;\r\n\r\n                var finishImage = function() {\r\n                    if (!doNotCheckNext && maxPixCount - matchPixCount <= maxPixCount * frameTolerance) {\r\n                        // console.log('removed black frame : ' + f + ' ; frame duration ' + _frames[f].duration);\r\n                    } else {\r\n                        // console.log('frame is passed : ' + f);\r\n                        if (checkUntilNotBlack) {\r\n                            doNotCheckNext = true;\r\n                        }\r\n                        resultFrames.push(_frames[f]);\r\n                    }\r\n                    loop();\r\n                };\r\n\r\n                if (!doNotCheckNext) {\r\n                    var image = new Image();\r\n                    image.onload = function() {\r\n                        context2d.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n                        var imageData = context2d.getImageData(0, 0, canvas.width, canvas.height);\r\n                        matchPixCount = 0;\r\n                        endPixCheck = imageData.data.length;\r\n                        maxPixCount = imageData.data.length / 4;\r\n\r\n                        for (var pix = 0; pix < endPixCheck; pix += 4) {\r\n                            var currentColor = {\r\n                                r: imageData.data[pix],\r\n                                g: imageData.data[pix + 1],\r\n                                b: imageData.data[pix + 2]\r\n                            };\r\n                            var colorDifference = Math.sqrt(\r\n                                Math.pow(currentColor.r - sampleColor.r, 2) +\r\n                                Math.pow(currentColor.g - sampleColor.g, 2) +\r\n                                Math.pow(currentColor.b - sampleColor.b, 2)\r\n                            );\r\n                            // difference in color it is difference in color vectors (r1,g1,b1) <=> (r2,g2,b2)\r\n                            if (colorDifference <= maxColorDifference * pixTolerance) {\r\n                                matchPixCount++;\r\n                            }\r\n                        }\r\n                        finishImage();\r\n                    };\r\n                    image.src = _frames[f].image;\r\n                } else {\r\n                    finishImage();\r\n                }\r\n            },\r\n            callback: function() {\r\n                resultFrames = resultFrames.concat(_frames.slice(endCheckFrame));\r\n\r\n                if (resultFrames.length <= 0) {\r\n                    // at least one last frame should be available for next manipulation\r\n                    // if total duration of all frames will be < 1000 than ffmpeg doesn't work well...\r\n                    resultFrames.push(_frames[_frames.length - 1]);\r\n                }\r\n                callback(resultFrames);\r\n            }\r\n        });\r\n    }\r\n\r\n    var isStopDrawing = false;\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        isStopDrawing = true;\r\n\r\n        var _this = this;\r\n        // analyse of all frames takes some time!\r\n        setTimeout(function() {\r\n            // e.g. dropBlackFrames(frames, 10, 1, 1) - will cut all 10 frames\r\n            // e.g. dropBlackFrames(frames, 10, 0.5, 0.5) - will analyse 10 frames\r\n            // e.g. dropBlackFrames(frames, 10) === dropBlackFrames(frames, 10, 0, 0) - will analyse 10 frames with strict black color\r\n            dropBlackFrames(whammy.frames, -1, null, null, function(frames) {\r\n                whammy.frames = frames;\r\n\r\n                // to display advertisement images!\r\n                if (config.advertisement && config.advertisement.length) {\r\n                    whammy.frames = config.advertisement.concat(whammy.frames);\r\n                }\r\n\r\n                /**\r\n                 * @property {Blob} blob - Recorded frames in video/webm blob.\r\n                 * @memberof WhammyRecorder\r\n                 * @example\r\n                 * recorder.stop(function() {\r\n                 *     var blob = recorder.blob;\r\n                 * });\r\n                 */\r\n                whammy.compile(function(blob) {\r\n                    _this.blob = blob;\r\n\r\n                    if (_this.blob.forEach) {\r\n                        _this.blob = new Blob([], {\r\n                            type: 'video/webm'\r\n                        });\r\n                    }\r\n\r\n                    if (callback) {\r\n                        callback(_this.blob);\r\n                    }\r\n                });\r\n            });\r\n        }, 10);\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n\r\n        if (isStopDrawing) {\r\n            this.record();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WhammyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (!isStopDrawing) {\r\n            this.stop(clearRecordedDataCB);\r\n        }\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        whammy.frames = [];\r\n        isStopDrawing = true;\r\n        isPausedRecording = false;\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'WhammyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    var video;\r\n    var lastTime;\r\n    var whammy;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WhammyRecorder = WhammyRecorder;\r\n}\n\r\n// https://github.com/antimatter15/whammy/blob/master/LICENSE\r\n// _________\r\n// Whammy.js\r\n\r\n// todo: Firefox now supports webp for webm containers!\r\n// their MediaRecorder implementation works well!\r\n// should we provide an option to record via Whammy.js or MediaRecorder API is a better solution?\r\n\r\n/**\r\n * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}\r\n * @summary A real time javascript webm encoder based on a canvas hack.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef Whammy\r\n * @class\r\n * @example\r\n * var recorder = new Whammy().Video(15);\r\n * recorder.add(context || canvas || dataURL);\r\n * var output = recorder.compile();\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\nvar Whammy = (function() {\r\n    // a more abstract-ish API\r\n\r\n    function WhammyVideo(duration) {\r\n        this.frames = [];\r\n        this.duration = duration || 1;\r\n        this.quality = 0.8;\r\n    }\r\n\r\n    /**\r\n     * Pass Canvas or Context or image/webp(string) to {@link Whammy} encoder.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.add(canvas || context || 'image/webp');\r\n     * @param {string} frame - Canvas || Context || image/webp\r\n     * @param {number} duration - Stick a duration (in milliseconds)\r\n     */\r\n    WhammyVideo.prototype.add = function(frame, duration) {\r\n        if ('canvas' in frame) { //CanvasRenderingContext2D\r\n            frame = frame.canvas;\r\n        }\r\n\r\n        if ('toDataURL' in frame) {\r\n            frame = frame.toDataURL('image/webp', this.quality);\r\n        }\r\n\r\n        if (!(/^data:image\\/webp;base64,/ig).test(frame)) {\r\n            throw 'Input must be formatted properly as a base64 encoded DataURI of type image/webp';\r\n        }\r\n        this.frames.push({\r\n            image: frame,\r\n            duration: duration || this.duration\r\n        });\r\n    };\r\n\r\n    function processInWebWorker(_function) {\r\n        var blob = URL.createObjectURL(new Blob([_function.toString(),\r\n            'this.onmessage =  function (eee) {' + _function.name + '(eee.data);}'\r\n        ], {\r\n            type: 'application/javascript'\r\n        }));\r\n\r\n        var worker = new Worker(blob);\r\n        URL.revokeObjectURL(blob);\r\n        return worker;\r\n    }\r\n\r\n    function whammyInWebWorker(frames) {\r\n        function ArrayToWebM(frames) {\r\n            var info = checkFrames(frames);\r\n            if (!info) {\r\n                return [];\r\n            }\r\n\r\n            var clusterMaxDuration = 30000;\r\n\r\n            var EBML = [{\r\n                'id': 0x1a45dfa3, // EBML\r\n                'data': [{\r\n                    'data': 1,\r\n                    'id': 0x4286 // EBMLVersion\r\n                }, {\r\n                    'data': 1,\r\n                    'id': 0x42f7 // EBMLReadVersion\r\n                }, {\r\n                    'data': 4,\r\n                    'id': 0x42f2 // EBMLMaxIDLength\r\n                }, {\r\n                    'data': 8,\r\n                    'id': 0x42f3 // EBMLMaxSizeLength\r\n                }, {\r\n                    'data': 'webm',\r\n                    'id': 0x4282 // DocType\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4287 // DocTypeVersion\r\n                }, {\r\n                    'data': 2,\r\n                    'id': 0x4285 // DocTypeReadVersion\r\n                }]\r\n            }, {\r\n                'id': 0x18538067, // Segment\r\n                'data': [{\r\n                    'id': 0x1549a966, // Info\r\n                    'data': [{\r\n                        'data': 1e6, //do things in millisecs (num of nanosecs for duration scale)\r\n                        'id': 0x2ad7b1 // TimecodeScale\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x4d80 // MuxingApp\r\n                    }, {\r\n                        'data': 'whammy',\r\n                        'id': 0x5741 // WritingApp\r\n                    }, {\r\n                        'data': doubleToString(info.duration),\r\n                        'id': 0x4489 // Duration\r\n                    }]\r\n                }, {\r\n                    'id': 0x1654ae6b, // Tracks\r\n                    'data': [{\r\n                        'id': 0xae, // TrackEntry\r\n                        'data': [{\r\n                            'data': 1,\r\n                            'id': 0xd7 // TrackNumber\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x73c5 // TrackUID\r\n                        }, {\r\n                            'data': 0,\r\n                            'id': 0x9c // FlagLacing\r\n                        }, {\r\n                            'data': 'und',\r\n                            'id': 0x22b59c // Language\r\n                        }, {\r\n                            'data': 'V_VP8',\r\n                            'id': 0x86 // CodecID\r\n                        }, {\r\n                            'data': 'VP8',\r\n                            'id': 0x258688 // CodecName\r\n                        }, {\r\n                            'data': 1,\r\n                            'id': 0x83 // TrackType\r\n                        }, {\r\n                            'id': 0xe0, // Video\r\n                            'data': [{\r\n                                'data': info.width,\r\n                                'id': 0xb0 // PixelWidth\r\n                            }, {\r\n                                'data': info.height,\r\n                                'id': 0xba // PixelHeight\r\n                            }]\r\n                        }]\r\n                    }]\r\n                }]\r\n            }];\r\n\r\n            //Generate clusters (max duration)\r\n            var frameNumber = 0;\r\n            var clusterTimecode = 0;\r\n            while (frameNumber < frames.length) {\r\n\r\n                var clusterFrames = [];\r\n                var clusterDuration = 0;\r\n                do {\r\n                    clusterFrames.push(frames[frameNumber]);\r\n                    clusterDuration += frames[frameNumber].duration;\r\n                    frameNumber++;\r\n                } while (frameNumber < frames.length && clusterDuration < clusterMaxDuration);\r\n\r\n                var clusterCounter = 0;\r\n                var cluster = {\r\n                    'id': 0x1f43b675, // Cluster\r\n                    'data': getClusterData(clusterTimecode, clusterCounter, clusterFrames)\r\n                }; //Add cluster to segment\r\n                EBML[1].data.push(cluster);\r\n                clusterTimecode += clusterDuration;\r\n            }\r\n\r\n            return generateEBML(EBML);\r\n        }\r\n\r\n        function getClusterData(clusterTimecode, clusterCounter, clusterFrames) {\r\n            return [{\r\n                'data': clusterTimecode,\r\n                'id': 0xe7 // Timecode\r\n            }].concat(clusterFrames.map(function(webp) {\r\n                var block = makeSimpleBlock({\r\n                    discardable: 0,\r\n                    frame: webp.data.slice(4),\r\n                    invisible: 0,\r\n                    keyframe: 1,\r\n                    lacing: 0,\r\n                    trackNum: 1,\r\n                    timecode: Math.round(clusterCounter)\r\n                });\r\n                clusterCounter += webp.duration;\r\n                return {\r\n                    data: block,\r\n                    id: 0xa3\r\n                };\r\n            }));\r\n        }\r\n\r\n        // sums the lengths of all the frames and gets the duration\r\n\r\n        function checkFrames(frames) {\r\n            if (!frames[0]) {\r\n                postMessage({\r\n                    error: 'Something went wrong. Maybe WebP format is not supported in the current browser.'\r\n                });\r\n                return;\r\n            }\r\n\r\n            var width = frames[0].width,\r\n                height = frames[0].height,\r\n                duration = frames[0].duration;\r\n\r\n            for (var i = 1; i < frames.length; i++) {\r\n                duration += frames[i].duration;\r\n            }\r\n            return {\r\n                duration: duration,\r\n                width: width,\r\n                height: height\r\n            };\r\n        }\r\n\r\n        function numToBuffer(num) {\r\n            var parts = [];\r\n            while (num > 0) {\r\n                parts.push(num & 0xff);\r\n                num = num >> 8;\r\n            }\r\n            return new Uint8Array(parts.reverse());\r\n        }\r\n\r\n        function strToBuffer(str) {\r\n            return new Uint8Array(str.split('').map(function(e) {\r\n                return e.charCodeAt(0);\r\n            }));\r\n        }\r\n\r\n        function bitsToBuffer(bits) {\r\n            var data = [];\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data.push(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return new Uint8Array(data);\r\n        }\r\n\r\n        function generateEBML(json) {\r\n            var ebml = [];\r\n            for (var i = 0; i < json.length; i++) {\r\n                var data = json[i].data;\r\n\r\n                if (typeof data === 'object') {\r\n                    data = generateEBML(data);\r\n                }\r\n\r\n                if (typeof data === 'number') {\r\n                    data = bitsToBuffer(data.toString(2));\r\n                }\r\n\r\n                if (typeof data === 'string') {\r\n                    data = strToBuffer(data);\r\n                }\r\n\r\n                var len = data.size || data.byteLength || data.length;\r\n                var zeroes = Math.ceil(Math.ceil(Math.log(len) / Math.log(2)) / 8);\r\n                var sizeToString = len.toString(2);\r\n                var padded = (new Array((zeroes * 7 + 7 + 1) - sizeToString.length)).join('0') + sizeToString;\r\n                var size = (new Array(zeroes)).join('0') + '1' + padded;\r\n\r\n                ebml.push(numToBuffer(json[i].id));\r\n                ebml.push(bitsToBuffer(size));\r\n                ebml.push(data);\r\n            }\r\n\r\n            return new Blob(ebml, {\r\n                type: 'video/webm'\r\n            });\r\n        }\r\n\r\n        function toBinStrOld(bits) {\r\n            var data = '';\r\n            var pad = (bits.length % 8) ? (new Array(1 + 8 - (bits.length % 8))).join('0') : '';\r\n            bits = pad + bits;\r\n            for (var i = 0; i < bits.length; i += 8) {\r\n                data += String.fromCharCode(parseInt(bits.substr(i, 8), 2));\r\n            }\r\n            return data;\r\n        }\r\n\r\n        function makeSimpleBlock(data) {\r\n            var flags = 0;\r\n\r\n            if (data.keyframe) {\r\n                flags |= 128;\r\n            }\r\n\r\n            if (data.invisible) {\r\n                flags |= 8;\r\n            }\r\n\r\n            if (data.lacing) {\r\n                flags |= (data.lacing << 1);\r\n            }\r\n\r\n            if (data.discardable) {\r\n                flags |= 1;\r\n            }\r\n\r\n            if (data.trackNum > 127) {\r\n                throw 'TrackNumber > 127 not supported';\r\n            }\r\n\r\n            var out = [data.trackNum | 0x80, data.timecode >> 8, data.timecode & 0xff, flags].map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).join('') + data.frame;\r\n\r\n            return out;\r\n        }\r\n\r\n        function parseWebP(riff) {\r\n            var VP8 = riff.RIFF[0].WEBP[0];\r\n\r\n            var frameStart = VP8.indexOf('\\x9d\\x01\\x2a'); // A VP8 keyframe starts with the 0x9d012a header\r\n            for (var i = 0, c = []; i < 4; i++) {\r\n                c[i] = VP8.charCodeAt(frameStart + 3 + i);\r\n            }\r\n\r\n            var width, height, tmp;\r\n\r\n            //the code below is literally copied verbatim from the bitstream spec\r\n            tmp = (c[1] << 8) | c[0];\r\n            width = tmp & 0x3FFF;\r\n            tmp = (c[3] << 8) | c[2];\r\n            height = tmp & 0x3FFF;\r\n            return {\r\n                width: width,\r\n                height: height,\r\n                data: VP8,\r\n                riff: riff\r\n            };\r\n        }\r\n\r\n        function getStrLength(string, offset) {\r\n            return parseInt(string.substr(offset + 4, 4).split('').map(function(i) {\r\n                var unpadded = i.charCodeAt(0).toString(2);\r\n                return (new Array(8 - unpadded.length + 1)).join('0') + unpadded;\r\n            }).join(''), 2);\r\n        }\r\n\r\n        function parseRIFF(string) {\r\n            var offset = 0;\r\n            var chunks = {};\r\n\r\n            while (offset < string.length) {\r\n                var id = string.substr(offset, 4);\r\n                var len = getStrLength(string, offset);\r\n                var data = string.substr(offset + 4 + 4, len);\r\n                offset += 4 + 4 + len;\r\n                chunks[id] = chunks[id] || [];\r\n\r\n                if (id === 'RIFF' || id === 'LIST') {\r\n                    chunks[id].push(parseRIFF(data));\r\n                } else {\r\n                    chunks[id].push(data);\r\n                }\r\n            }\r\n            return chunks;\r\n        }\r\n\r\n        function doubleToString(num) {\r\n            return [].slice.call(\r\n                new Uint8Array((new Float64Array([num])).buffer), 0).map(function(e) {\r\n                return String.fromCharCode(e);\r\n            }).reverse().join('');\r\n        }\r\n\r\n        var webm = new ArrayToWebM(frames.map(function(frame) {\r\n            var webp = parseWebP(parseRIFF(atob(frame.image.slice(23))));\r\n            webp.duration = frame.duration;\r\n            return webp;\r\n        }));\r\n\r\n        postMessage(webm);\r\n    }\r\n\r\n    /**\r\n     * Encodes frames in WebM container. It uses WebWorkinvoke to invoke 'ArrayToWebM' method.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof Whammy\r\n     * @example\r\n     * recorder = new Whammy().Video(0.8, 100);\r\n     * recorder.compile(function(blob) {\r\n     *    // blob.size - blob.type\r\n     * });\r\n     */\r\n    WhammyVideo.prototype.compile = function(callback) {\r\n        var webWorker = processInWebWorker(whammyInWebWorker);\r\n\r\n        webWorker.onmessage = function(event) {\r\n            if (event.data.error) {\r\n                console.error(event.data.error);\r\n                return;\r\n            }\r\n            callback(event.data);\r\n        };\r\n\r\n        webWorker.postMessage(this.frames);\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * A more abstract-ish API.\r\n         * @method\r\n         * @memberof Whammy\r\n         * @example\r\n         * recorder = new Whammy().Video(0.8, 100);\r\n         * @param {?number} speed - 0.8\r\n         * @param {?number} quality - 100\r\n         */\r\n        Video: WhammyVideo\r\n    };\r\n})();\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.Whammy = Whammy;\r\n}\n\r\n// ______________ (indexed-db)\r\n// DiskStorage.js\r\n\r\n/**\r\n * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.\r\n * @summary Writing blobs into IndexedDB.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @example\r\n * DiskStorage.Store({\r\n *     audioBlob: yourAudioBlob,\r\n *     videoBlob: yourVideoBlob,\r\n *     gifBlob  : yourGifBlob\r\n * });\r\n * DiskStorage.Fetch(function(dataURL, type) {\r\n *     if(type === 'audioBlob') { }\r\n *     if(type === 'videoBlob') { }\r\n *     if(type === 'gifBlob')   { }\r\n * });\r\n * // DiskStorage.dataStoreName = 'recordRTC';\r\n * // DiskStorage.onError = function(error) { };\r\n * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n * @property {function} Fetch - This method fetches stored blobs from IndexedDB.\r\n * @property {function} Store - This method stores blobs in IndexedDB.\r\n * @property {function} onError - This function is invoked for any known/unknown error.\r\n * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n */\r\n\r\n\r\nvar DiskStorage = {\r\n    /**\r\n     * This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.init();\r\n     */\r\n    init: function() {\r\n        var self = this;\r\n\r\n        if (typeof indexedDB === 'undefined' || typeof indexedDB.open === 'undefined') {\r\n            console.error('IndexedDB API are not available in this browser.');\r\n            return;\r\n        }\r\n\r\n        var dbVersion = 1;\r\n        var dbName = this.dbName || location.href.replace(/\\/|:|#|%|\\.|\\[|\\]/g, ''),\r\n            db;\r\n        var request = indexedDB.open(dbName, dbVersion);\r\n\r\n        function createObjectStore(dataBase) {\r\n            dataBase.createObjectStore(self.dataStoreName);\r\n        }\r\n\r\n        function putInDB() {\r\n            var transaction = db.transaction([self.dataStoreName], 'readwrite');\r\n\r\n            if (self.videoBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.videoBlob, 'videoBlob');\r\n            }\r\n\r\n            if (self.gifBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.gifBlob, 'gifBlob');\r\n            }\r\n\r\n            if (self.audioBlob) {\r\n                transaction.objectStore(self.dataStoreName).put(self.audioBlob, 'audioBlob');\r\n            }\r\n\r\n            function getFromStore(portionName) {\r\n                transaction.objectStore(self.dataStoreName).get(portionName).onsuccess = function(event) {\r\n                    if (self.callback) {\r\n                        self.callback(event.target.result, portionName);\r\n                    }\r\n                };\r\n            }\r\n\r\n            getFromStore('audioBlob');\r\n            getFromStore('videoBlob');\r\n            getFromStore('gifBlob');\r\n        }\r\n\r\n        request.onerror = self.onError;\r\n\r\n        request.onsuccess = function() {\r\n            db = request.result;\r\n            db.onerror = self.onError;\r\n\r\n            if (db.setVersion) {\r\n                if (db.version !== dbVersion) {\r\n                    var setVersion = db.setVersion(dbVersion);\r\n                    setVersion.onsuccess = function() {\r\n                        createObjectStore(db);\r\n                        putInDB();\r\n                    };\r\n                } else {\r\n                    putInDB();\r\n                }\r\n            } else {\r\n                putInDB();\r\n            }\r\n        };\r\n        request.onupgradeneeded = function(event) {\r\n            createObjectStore(event.target.result);\r\n        };\r\n    },\r\n    /**\r\n     * This method fetches stored blobs from IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Fetch(function(dataURL, type) {\r\n     *     if(type === 'audioBlob') { }\r\n     *     if(type === 'videoBlob') { }\r\n     *     if(type === 'gifBlob')   { }\r\n     * });\r\n     */\r\n    Fetch: function(callback) {\r\n        this.callback = callback;\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This method stores blobs in IndexedDB.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.Store({\r\n     *     audioBlob: yourAudioBlob,\r\n     *     videoBlob: yourVideoBlob,\r\n     *     gifBlob  : yourGifBlob\r\n     * });\r\n     */\r\n    Store: function(config) {\r\n        this.audioBlob = config.audioBlob;\r\n        this.videoBlob = config.videoBlob;\r\n        this.gifBlob = config.gifBlob;\r\n\r\n        this.init();\r\n\r\n        return this;\r\n    },\r\n    /**\r\n     * This function is invoked for any known/unknown error.\r\n     * @method\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.onError = function(error){\r\n     *     alerot( JSON.stringify(error) );\r\n     * };\r\n     */\r\n    onError: function(error) {\r\n        console.error(JSON.stringify(error, null, '\\t'));\r\n    },\r\n\r\n    /**\r\n     * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.\r\n     * @memberof DiskStorage\r\n     * @internal\r\n     * @example\r\n     * DiskStorage.dataStoreName = 'recordRTC';\r\n     */\r\n    dataStoreName: 'recordRTC',\r\n    dbName: null\r\n};\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.DiskStorage = DiskStorage;\r\n}\n\r\n// ______________\r\n// GifRecorder.js\r\n\r\n/**\r\n * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef GifRecorder\r\n * @class\r\n * @example\r\n * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     img.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.\r\n * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}\r\n */\r\n\r\nfunction GifRecorder(mediaStream, config) {\r\n    if (typeof GIFEncoder === 'undefined') {\r\n        var script = document.createElement('script');\r\n        script.src = 'https://www.webrtc-experiment.com/gif-recorder.js';\r\n        (document.body || document.documentElement).appendChild(script);\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    var isHTMLObject = mediaStream instanceof CanvasRenderingContext2D || mediaStream instanceof HTMLCanvasElement;\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        if (typeof GIFEncoder === 'undefined') {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isLoadedMetaData) {\r\n            setTimeout(self.record, 1000);\r\n            return;\r\n        }\r\n\r\n        if (!isHTMLObject) {\r\n            if (!config.width) {\r\n                config.width = video.offsetWidth || 320;\r\n            }\r\n\r\n            if (!config.height) {\r\n                config.height = video.offsetHeight || 240;\r\n            }\r\n\r\n            if (!config.video) {\r\n                config.video = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            if (!config.canvas) {\r\n                config.canvas = {\r\n                    width: config.width,\r\n                    height: config.height\r\n                };\r\n            }\r\n\r\n            canvas.width = config.canvas.width || 320;\r\n            canvas.height = config.canvas.height || 240;\r\n\r\n            video.width = config.video.width || 320;\r\n            video.height = config.video.height || 240;\r\n        }\r\n\r\n        // external library to record as GIF images\r\n        gifEncoder = new GIFEncoder();\r\n\r\n        // void setRepeat(int iter) \r\n        // Sets the number of times the set of GIF frames should be played. \r\n        // Default is 1; 0 means play indefinitely.\r\n        gifEncoder.setRepeat(0);\r\n\r\n        // void setFrameRate(Number fps) \r\n        // Sets frame rate in frames per second. \r\n        // Equivalent to setDelay(1000/fps).\r\n        // Using \"setDelay\" instead of \"setFrameRate\"\r\n        gifEncoder.setDelay(config.frameRate || 200);\r\n\r\n        // void setQuality(int quality) \r\n        // Sets quality of color quantization (conversion of images to the \r\n        // maximum 256 colors allowed by the GIF specification). \r\n        // Lower values (minimum = 1) produce better colors, \r\n        // but slow processing significantly. 10 is the default, \r\n        // and produces good color mapping at reasonable speeds. \r\n        // Values greater than 20 do not yield significant improvements in speed.\r\n        gifEncoder.setQuality(config.quality || 10);\r\n\r\n        // Boolean start() \r\n        // This writes the GIF Header and returns false if it fails.\r\n        gifEncoder.start();\r\n\r\n        if (typeof config.onGifRecordingStarted === 'function') {\r\n            config.onGifRecordingStarted();\r\n        }\r\n\r\n        startTime = Date.now();\r\n\r\n        function drawVideoFrame(time) {\r\n            if (self.clearedRecordedData === true) {\r\n                return;\r\n            }\r\n\r\n            if (isPausedRecording) {\r\n                return setTimeout(function() {\r\n                    drawVideoFrame(time);\r\n                }, 100);\r\n            }\r\n\r\n            lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n            if (typeof lastFrameTime === undefined) {\r\n                lastFrameTime = time;\r\n            }\r\n\r\n            // ~10 fps\r\n            if (time - lastFrameTime < 90) {\r\n                return;\r\n            }\r\n\r\n            if (!isHTMLObject && video.paused) {\r\n                // via: https://github.com/muaz-khan/WebRTC-Experiment/pull/316\r\n                // Tweak for Android Chrome\r\n                video.play();\r\n            }\r\n\r\n            if (!isHTMLObject) {\r\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n            }\r\n\r\n            if (config.onGifPreview) {\r\n                config.onGifPreview(canvas.toDataURL('image/png'));\r\n            }\r\n\r\n            gifEncoder.addFrame(context);\r\n            lastFrameTime = time;\r\n        }\r\n\r\n        lastAnimationFrame = requestAnimationFrame(drawVideoFrame);\r\n\r\n        if (config.initCallback) {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     img.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        callback = callback || function() {};\r\n\r\n        if (lastAnimationFrame) {\r\n            cancelAnimationFrame(lastAnimationFrame);\r\n        }\r\n\r\n        endTime = Date.now();\r\n\r\n        /**\r\n         * @property {Blob} blob - The recorded blob object.\r\n         * @memberof GifRecorder\r\n         * @example\r\n         * recorder.stop(function(){\r\n         *     var blob = recorder.blob;\r\n         * });\r\n         */\r\n        this.blob = new Blob([new Uint8Array(gifEncoder.stream().bin)], {\r\n            type: 'image/gif'\r\n        });\r\n\r\n        callback(this.blob);\r\n\r\n        // bug: find a way to clear old recorded blobs\r\n        gifEncoder.stream().bin = [];\r\n    };\r\n\r\n    var isPausedRecording = false;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPausedRecording = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPausedRecording = false;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof GifRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        self.clearedRecordedData = true;\r\n        clearRecordedDataCB();\r\n    };\r\n\r\n    function clearRecordedDataCB() {\r\n        if (gifEncoder) {\r\n            gifEncoder.stream().bin = [];\r\n        }\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'GifRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n\r\n    if (isHTMLObject) {\r\n        if (mediaStream instanceof CanvasRenderingContext2D) {\r\n            context = mediaStream;\r\n            canvas = context.canvas;\r\n        } else if (mediaStream instanceof HTMLCanvasElement) {\r\n            context = mediaStream.getContext('2d');\r\n            canvas = mediaStream;\r\n        }\r\n    }\r\n\r\n    var isLoadedMetaData = true;\r\n\r\n    if (!isHTMLObject) {\r\n        var video = document.createElement('video');\r\n        video.muted = true;\r\n        video.autoplay = true;\r\n        video.playsInline = true;\r\n\r\n        isLoadedMetaData = false;\r\n        video.onloadedmetadata = function() {\r\n            isLoadedMetaData = true;\r\n        };\r\n\r\n        setSrcObject(mediaStream, video);\r\n\r\n        video.play();\r\n    }\r\n\r\n    var lastAnimationFrame = null;\r\n    var startTime, endTime, lastFrameTime;\r\n\r\n    var gifEncoder;\r\n\r\n    var self = this;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.GifRecorder = GifRecorder;\r\n}\n\r\n// Last time updated: 2019-06-21 4:09:42 AM UTC\r\n\r\n// ________________________\r\n// MultiStreamsMixer v1.2.2\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/MultiStreamsMixer\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nfunction MultiStreamsMixer(arrayOfMediaStreams, elementClass) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (typeof RecordRTC !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    },\r\n                    style: {}\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    // requires: chrome://flags/#enable-experimental-web-platform-features\r\n\r\n    elementClass = elementClass || 'multi-streams-mixer';\r\n\r\n    var videos = [];\r\n    var isStopDrawingFrames = false;\r\n\r\n    var canvas = document.createElement('canvas');\r\n    var context = canvas.getContext('2d');\r\n    canvas.style.opacity = 0;\r\n    canvas.style.position = 'absolute';\r\n    canvas.style.zIndex = -1;\r\n    canvas.style.top = '-1000em';\r\n    canvas.style.left = '-1000em';\r\n    canvas.className = elementClass;\r\n    (document.body || document.documentElement).appendChild(canvas);\r\n\r\n    this.disableLogs = false;\r\n    this.frameInterval = 10;\r\n\r\n    this.width = 360;\r\n    this.height = 240;\r\n\r\n    // use gain node to prevent echo\r\n    this.useGainNode = true;\r\n\r\n    var self = this;\r\n\r\n    // _____________________________\r\n    // Cross-Browser-Declarations.js\r\n\r\n    // WebAudio API representer\r\n    var AudioContext = window.AudioContext;\r\n\r\n    if (typeof AudioContext === 'undefined') {\r\n        if (typeof webkitAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = webkitAudioContext;\r\n        }\r\n\r\n        if (typeof mozAudioContext !== 'undefined') {\r\n            /*global AudioContext:true */\r\n            AudioContext = mozAudioContext;\r\n        }\r\n    }\r\n\r\n    /*jshint -W079 */\r\n    var URL = window.URL;\r\n\r\n    if (typeof URL === 'undefined' && typeof webkitURL !== 'undefined') {\r\n        /*global URL:true */\r\n        URL = webkitURL;\r\n    }\r\n\r\n    if (typeof navigator !== 'undefined' && typeof navigator.getUserMedia === 'undefined') { // maybe window.navigator?\r\n        if (typeof navigator.webkitGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.webkitGetUserMedia;\r\n        }\r\n\r\n        if (typeof navigator.mozGetUserMedia !== 'undefined') {\r\n            navigator.getUserMedia = navigator.mozGetUserMedia;\r\n        }\r\n    }\r\n\r\n    var MediaStream = window.MediaStream;\r\n\r\n    if (typeof MediaStream === 'undefined' && typeof webkitMediaStream !== 'undefined') {\r\n        MediaStream = webkitMediaStream;\r\n    }\r\n\r\n    /*global MediaStream:true */\r\n    if (typeof MediaStream !== 'undefined') {\r\n        // override \"stop\" method for all browsers\r\n        if (typeof MediaStream.prototype.stop === 'undefined') {\r\n            MediaStream.prototype.stop = function() {\r\n                this.getTracks().forEach(function(track) {\r\n                    track.stop();\r\n                });\r\n            };\r\n        }\r\n    }\r\n\r\n    var Storage = {};\r\n\r\n    if (typeof AudioContext !== 'undefined') {\r\n        Storage.AudioContext = AudioContext;\r\n    } else if (typeof webkitAudioContext !== 'undefined') {\r\n        Storage.AudioContext = webkitAudioContext;\r\n    }\r\n\r\n    function setSrcObject(stream, element) {\r\n        if ('srcObject' in element) {\r\n            element.srcObject = stream;\r\n        } else if ('mozSrcObject' in element) {\r\n            element.mozSrcObject = stream;\r\n        } else {\r\n            element.srcObject = stream;\r\n        }\r\n    }\r\n\r\n    this.startDrawingFrames = function() {\r\n        drawVideosToCanvas();\r\n    };\r\n\r\n    function drawVideosToCanvas() {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var videosLength = videos.length;\r\n\r\n        var fullcanvas = false;\r\n        var remaining = [];\r\n        videos.forEach(function(video) {\r\n            if (!video.stream) {\r\n                video.stream = {};\r\n            }\r\n\r\n            if (video.stream.fullcanvas) {\r\n                fullcanvas = video;\r\n            } else {\r\n                // todo: video.stream.active or video.stream.live to fix blank frames issues?\r\n                remaining.push(video);\r\n            }\r\n        });\r\n\r\n        if (fullcanvas) {\r\n            canvas.width = fullcanvas.stream.width;\r\n            canvas.height = fullcanvas.stream.height;\r\n        } else if (remaining.length) {\r\n            canvas.width = videosLength > 1 ? remaining[0].width * 2 : remaining[0].width;\r\n\r\n            var height = 1;\r\n            if (videosLength === 3 || videosLength === 4) {\r\n                height = 2;\r\n            }\r\n            if (videosLength === 5 || videosLength === 6) {\r\n                height = 3;\r\n            }\r\n            if (videosLength === 7 || videosLength === 8) {\r\n                height = 4;\r\n            }\r\n            if (videosLength === 9 || videosLength === 10) {\r\n                height = 5;\r\n            }\r\n            canvas.height = remaining[0].height * height;\r\n        } else {\r\n            canvas.width = self.width || 360;\r\n            canvas.height = self.height || 240;\r\n        }\r\n\r\n        if (fullcanvas && fullcanvas instanceof HTMLVideoElement) {\r\n            drawImage(fullcanvas);\r\n        }\r\n\r\n        remaining.forEach(function(video, idx) {\r\n            drawImage(video, idx);\r\n        });\r\n\r\n        setTimeout(drawVideosToCanvas, self.frameInterval);\r\n    }\r\n\r\n    function drawImage(video, idx) {\r\n        if (isStopDrawingFrames) {\r\n            return;\r\n        }\r\n\r\n        var x = 0;\r\n        var y = 0;\r\n        var width = video.width;\r\n        var height = video.height;\r\n\r\n        if (idx === 1) {\r\n            x = video.width;\r\n        }\r\n\r\n        if (idx === 2) {\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 3) {\r\n            x = video.width;\r\n            y = video.height;\r\n        }\r\n\r\n        if (idx === 4) {\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 5) {\r\n            x = video.width;\r\n            y = video.height * 2;\r\n        }\r\n\r\n        if (idx === 6) {\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (idx === 7) {\r\n            x = video.width;\r\n            y = video.height * 3;\r\n        }\r\n\r\n        if (typeof video.stream.left !== 'undefined') {\r\n            x = video.stream.left;\r\n        }\r\n\r\n        if (typeof video.stream.top !== 'undefined') {\r\n            y = video.stream.top;\r\n        }\r\n\r\n        if (typeof video.stream.width !== 'undefined') {\r\n            width = video.stream.width;\r\n        }\r\n\r\n        if (typeof video.stream.height !== 'undefined') {\r\n            height = video.stream.height;\r\n        }\r\n\r\n        context.drawImage(video, x, y, width, height);\r\n\r\n        if (typeof video.stream.onRender === 'function') {\r\n            video.stream.onRender(context, x, y, width, height, idx);\r\n        }\r\n    }\r\n\r\n    function getMixedStream() {\r\n        isStopDrawingFrames = false;\r\n        var mixedVideoStream = getMixedVideoStream();\r\n\r\n        var mixedAudioStream = getMixedAudioStream();\r\n        if (mixedAudioStream) {\r\n            mixedAudioStream.getTracks().filter(function(t) {\r\n                return t.kind === 'audio';\r\n            }).forEach(function(track) {\r\n                mixedVideoStream.addTrack(track);\r\n            });\r\n        }\r\n\r\n        var fullcanvas;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (stream.fullcanvas) {\r\n                fullcanvas = true;\r\n            }\r\n        });\r\n\r\n        // mixedVideoStream.prototype.appendStreams = appendStreams;\r\n        // mixedVideoStream.prototype.resetVideoStreams = resetVideoStreams;\r\n        // mixedVideoStream.prototype.clearRecordedData = clearRecordedData;\r\n\r\n        return mixedVideoStream;\r\n    }\r\n\r\n    function getMixedVideoStream() {\r\n        resetVideoStreams();\r\n\r\n        var capturedStream;\r\n\r\n        if ('captureStream' in canvas) {\r\n            capturedStream = canvas.captureStream();\r\n        } else if ('mozCaptureStream' in canvas) {\r\n            capturedStream = canvas.mozCaptureStream();\r\n        } else if (!self.disableLogs) {\r\n            console.error('Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features');\r\n        }\r\n\r\n        var videoStream = new MediaStream();\r\n\r\n        capturedStream.getTracks().filter(function(t) {\r\n            return t.kind === 'video';\r\n        }).forEach(function(track) {\r\n            videoStream.addTrack(track);\r\n        });\r\n\r\n        canvas.stream = videoStream;\r\n\r\n        return videoStream;\r\n    }\r\n\r\n    function getMixedAudioStream() {\r\n        // via: @pehrsons\r\n        if (!Storage.AudioContextConstructor) {\r\n            Storage.AudioContextConstructor = new Storage.AudioContext();\r\n        }\r\n\r\n        self.audioContext = Storage.AudioContextConstructor;\r\n\r\n        self.audioSources = [];\r\n\r\n        if (self.useGainNode === true) {\r\n            self.gainNode = self.audioContext.createGain();\r\n            self.gainNode.connect(self.audioContext.destination);\r\n            self.gainNode.gain.value = 0; // don't hear self\r\n        }\r\n\r\n        var audioTracksLength = 0;\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            audioTracksLength++;\r\n\r\n            var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n\r\n            if (self.useGainNode === true) {\r\n                audioSource.connect(self.gainNode);\r\n            }\r\n\r\n            self.audioSources.push(audioSource);\r\n        });\r\n\r\n        if (!audioTracksLength) {\r\n            // because \"self.audioContext\" is not initialized\r\n            // that's why we've to ignore rest of the code\r\n            return;\r\n        }\r\n\r\n        self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n        self.audioSources.forEach(function(audioSource) {\r\n            audioSource.connect(self.audioDestination);\r\n        });\r\n        return self.audioDestination.stream;\r\n    }\r\n\r\n    function getVideo(stream) {\r\n        var video = document.createElement('video');\r\n\r\n        setSrcObject(stream, video);\r\n\r\n        video.className = elementClass;\r\n\r\n        video.muted = true;\r\n        video.volume = 0;\r\n\r\n        video.width = stream.width || self.width || 360;\r\n        video.height = stream.height || self.height || 240;\r\n\r\n        video.play();\r\n\r\n        return video;\r\n    }\r\n\r\n    this.appendStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        streams.forEach(function(stream) {\r\n            var newStream = new MediaStream();\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                var video = getVideo(stream);\r\n                video.stream = stream;\r\n                videos.push(video);\r\n\r\n                newStream.addTrack(stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                })[0]);\r\n            }\r\n\r\n            if (stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                }).length) {\r\n                var audioSource = self.audioContext.createMediaStreamSource(stream);\r\n                self.audioDestination = self.audioContext.createMediaStreamDestination();\r\n                audioSource.connect(self.audioDestination);\r\n\r\n                newStream.addTrack(self.audioDestination.stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'audio';\r\n                })[0]);\r\n            }\r\n\r\n            arrayOfMediaStreams.push(newStream);\r\n        });\r\n    };\r\n\r\n    this.releaseStreams = function() {\r\n        videos = [];\r\n        isStopDrawingFrames = true;\r\n\r\n        if (self.gainNode) {\r\n            self.gainNode.disconnect();\r\n            self.gainNode = null;\r\n        }\r\n\r\n        if (self.audioSources.length) {\r\n            self.audioSources.forEach(function(source) {\r\n                source.disconnect();\r\n            });\r\n            self.audioSources = [];\r\n        }\r\n\r\n        if (self.audioDestination) {\r\n            self.audioDestination.disconnect();\r\n            self.audioDestination = null;\r\n        }\r\n\r\n        if (self.audioContext) {\r\n            self.audioContext.close();\r\n        }\r\n\r\n        self.audioContext = null;\r\n\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        if (canvas.stream) {\r\n            canvas.stream.stop();\r\n            canvas.stream = null;\r\n        }\r\n    };\r\n\r\n    this.resetVideoStreams = function(streams) {\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        resetVideoStreams(streams);\r\n    };\r\n\r\n    function resetVideoStreams(streams) {\r\n        videos = [];\r\n        streams = streams || arrayOfMediaStreams;\r\n\r\n        // via: @adrian-ber\r\n        streams.forEach(function(stream) {\r\n            if (!stream.getTracks().filter(function(t) {\r\n                    return t.kind === 'video';\r\n                }).length) {\r\n                return;\r\n            }\r\n\r\n            var video = getVideo(stream);\r\n            video.stream = stream;\r\n            videos.push(video);\r\n        });\r\n    }\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamsMixer';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    this.getMixedStream = getMixedStream;\r\n\r\n}\r\n\r\nif (typeof RecordRTC === 'undefined') {\r\n    if (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n        module.exports = MultiStreamsMixer;\r\n    }\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('MultiStreamsMixer', [], function() {\r\n            return MultiStreamsMixer;\r\n        });\r\n    }\r\n}\n\r\n// ______________________\r\n// MultiStreamRecorder.js\r\n\r\n/*\r\n * Video conference recording, using captureStream API along with WebAudio and Canvas2D API.\r\n */\r\n\r\n/**\r\n * MultiStreamRecorder can record multiple videos in single container.\r\n * @summary Multi-videos recorder.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef MultiStreamRecorder\r\n * @class\r\n * @example\r\n * var options = {\r\n *     mimeType: 'video/webm'\r\n * }\r\n * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n *\r\n *     // or\r\n *     var blob = recorder.blob;\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStreams} mediaStreams - Array of MediaStreams.\r\n * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: \"video/webm\"}\r\n */\r\n\r\nfunction MultiStreamRecorder(arrayOfMediaStreams, options) {\r\n    arrayOfMediaStreams = arrayOfMediaStreams || [];\r\n    var self = this;\r\n\r\n    var mixer;\r\n    var mediaRecorder;\r\n\r\n    options = options || {\r\n        elementClass: 'multi-streams-mixer',\r\n        mimeType: 'video/webm',\r\n        video: {\r\n            width: 360,\r\n            height: 240\r\n        }\r\n    };\r\n\r\n    if (!options.frameInterval) {\r\n        options.frameInterval = 10;\r\n    }\r\n\r\n    if (!options.video) {\r\n        options.video = {};\r\n    }\r\n\r\n    if (!options.video.width) {\r\n        options.video.width = 360;\r\n    }\r\n\r\n    if (!options.video.height) {\r\n        options.video.height = 240;\r\n    }\r\n\r\n    /**\r\n     * This method records all MediaStreams.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        // github/muaz-khan/MultiStreamsMixer\r\n        mixer = new MultiStreamsMixer(arrayOfMediaStreams, options.elementClass || 'multi-streams-mixer');\r\n\r\n        if (getAllVideoTracks().length) {\r\n            mixer.frameInterval = options.frameInterval || 10;\r\n            mixer.width = options.video.width || 360;\r\n            mixer.height = options.video.height || 240;\r\n            mixer.startDrawingFrames();\r\n        }\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n\r\n        // record using MediaRecorder API\r\n        mediaRecorder = new MediaStreamRecorder(mixer.getMixedStream(), options);\r\n        mediaRecorder.record();\r\n    };\r\n\r\n    function getAllVideoTracks() {\r\n        var tracks = [];\r\n        arrayOfMediaStreams.forEach(function(stream) {\r\n            getTracks(stream, 'video').forEach(function(track) {\r\n                tracks.push(track);\r\n            });\r\n        });\r\n        return tracks;\r\n    }\r\n\r\n    /**\r\n     * This method stops recording MediaStream.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        if (!mediaRecorder) {\r\n            return;\r\n        }\r\n\r\n        mediaRecorder.stop(function(blob) {\r\n            self.blob = blob;\r\n\r\n            callback(blob);\r\n\r\n            self.clearRecordedData();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.pause();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.resume();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        if (mediaRecorder) {\r\n            mediaRecorder.clearRecordedData();\r\n            mediaRecorder = null;\r\n        }\r\n\r\n        if (mixer) {\r\n            mixer.releaseStreams();\r\n            mixer = null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Add extra media-streams to existing recordings.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.addStreams([newAudioStream, newVideoStream]);\r\n     */\r\n    this.addStreams = function(streams) {\r\n        if (!streams) {\r\n            throw 'First parameter is required.';\r\n        }\r\n\r\n        if (!(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        arrayOfMediaStreams.concat(streams);\r\n\r\n        if (!mediaRecorder || !mixer) {\r\n            return;\r\n        }\r\n\r\n        mixer.appendStreams(streams);\r\n\r\n        if (options.previewStream && typeof options.previewStream === 'function') {\r\n            options.previewStream(mixer.getMixedStream());\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Reset videos during live recording. Replace old videos e.g. replace cameras with full-screen.\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @param {MediaStreams} mediaStreams - Array of MediaStreams\r\n     * @example\r\n     * recorder.resetVideoStreams([newVideo1, newVideo2]);\r\n     */\r\n    this.resetVideoStreams = function(streams) {\r\n        if (!mixer) {\r\n            return;\r\n        }\r\n\r\n        if (streams && !(streams instanceof Array)) {\r\n            streams = [streams];\r\n        }\r\n\r\n        mixer.resetVideoStreams(streams);\r\n    };\r\n\r\n    /**\r\n     * Returns MultiStreamsMixer\r\n     * @method\r\n     * @memberof MultiStreamRecorder\r\n     * @example\r\n     * let mixer = recorder.getMixer();\r\n     * mixer.appendStreams([newStream]);\r\n     */\r\n    this.getMixer = function() {\r\n        return mixer;\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'MultiStreamRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.MultiStreamRecorder = MultiStreamRecorder;\r\n}\n\r\n// _____________________\r\n// RecordRTC.promises.js\r\n\r\n/**\r\n * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}\r\n * @summary Promises for {@link RecordRTC}\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef RecordRTCPromisesHandler\r\n * @class\r\n * @example\r\n * var recorder = new RecordRTCPromisesHandler(mediaStream, options);\r\n * recorder.startRecording()\r\n *         .then(successCB)\r\n *         .catch(errorCB);\r\n * // Note: You can access all RecordRTC API using \"recorder.recordRTC\" e.g. \r\n * recorder.recordRTC.onStateChanged = function(state) {};\r\n * recorder.recordRTC.setRecordingDuration(5000);\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.\r\n * @param {object} config - {type:\"video\", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}\r\n * @throws Will throw an error if \"new\" keyword is not used to initiate \"RecordRTCPromisesHandler\". Also throws error if first argument \"MediaStream\" is missing.\r\n * @requires {@link RecordRTC}\r\n */\r\n\r\nfunction RecordRTCPromisesHandler(mediaStream, options) {\r\n    if (!this) {\r\n        throw 'Use \"new RecordRTCPromisesHandler()\"';\r\n    }\r\n\r\n    if (typeof mediaStream === 'undefined') {\r\n        throw 'First argument \"MediaStream\" is required.';\r\n    }\r\n\r\n    var self = this;\r\n\r\n    /**\r\n     * @property {Blob} blob - Access/reach the native {@link RecordRTC} object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internal = recorder.recordRTC.getInternalRecorder();\r\n     * alert(internal instanceof MediaStreamRecorder);\r\n     * recorder.recordRTC.onStateChanged = function(state) {};\r\n     */\r\n    self.recordRTC = new RecordRTC(mediaStream, options);\r\n\r\n    /**\r\n     * This method records MediaStream.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.startRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.startRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.startRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method stops the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     var blob = recorder.getBlob();\r\n     * }).catch(errorCB);\r\n     */\r\n    this.stopRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.stopRecording(function(url) {\r\n                    self.blob = self.recordRTC.getBlob();\r\n\r\n                    if (!self.blob || !self.blob.size) {\r\n                        reject('Empty blob.', self.blob);\r\n                        return;\r\n                    }\r\n\r\n                    resolve(url);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method pauses the recording. You can resume recording using \"resumeRecording\" method.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.pauseRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.pauseRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.pauseRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.resumeRecording()\r\n     *         .then(successCB)\r\n     *         .catch(errorCB);\r\n     */\r\n    this.resumeRecording = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.resumeRecording();\r\n                resolve();\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns data-url for the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getDataURL().then(function(dataURL) {\r\n     *         window.open(dataURL);\r\n     *     }).catch(errorCB);;\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getDataURL = function(callback) {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                self.recordRTC.getDataURL(function(dataURL) {\r\n                    resolve(dataURL);\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the recorded blob.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.stopRecording().then(function() {\r\n     *     recorder.getBlob().then(function(blob) {})\r\n     * }).catch(errorCB);\r\n     */\r\n    this.getBlob = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getBlob());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method returns the internal recording object.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let internalRecorder = await recorder.getInternalRecorder();\r\n     * if(internalRecorder instanceof MultiStreamRecorder) {\r\n     *     internalRecorder.addStreams([newAudioStream]);\r\n     *     internalRecorder.resetVideoStreams([screenStream]);\r\n     * }\r\n     * @returns {Object} \r\n     */\r\n    this.getInternalRecorder = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getInternalRecorder());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This method resets the recorder. So that you can reuse single recorder instance many times.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.reset();\r\n     * recorder.startRecording(); // record again\r\n     */\r\n    this.reset = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.reset());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Destroy RecordRTC instance. Clear all recorders and objects.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * recorder.destroy().then(successCB).catch(errorCB);\r\n     */\r\n    this.destroy = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.destroy());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Get recorder's readonly state.\r\n     * @method\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * let state = await recorder.getState();\r\n     * // or\r\n     * recorder.getState().then(state => { console.log(state); })\r\n     * @returns {String} Returns recording state.\r\n     */\r\n    this.getState = function() {\r\n        return new Promise(function(resolve, reject) {\r\n            try {\r\n                resolve(self.recordRTC.getState());\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - Recorded data as \"Blob\" object.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @example\r\n     * await recorder.stopRecording();\r\n     * let blob = recorder.getBlob(); // or \"recorder.recordRTC.blob\"\r\n     * invokeSaveAsDialog(blob);\r\n     */\r\n    this.blob = null;\r\n\r\n    /**\r\n     * RecordRTC version number\r\n     * @property {String} version - Release version number.\r\n     * @memberof RecordRTCPromisesHandler\r\n     * @static\r\n     * @readonly\r\n     * @example\r\n     * alert(recorder.version);\r\n     */\r\n    this.version = '5.6.2';\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.RecordRTCPromisesHandler = RecordRTCPromisesHandler;\r\n}\n\r\n// ______________________\r\n// WebAssemblyRecorder.js\r\n\r\n/**\r\n * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.\r\n * @summary Video recording feature in Chrome, Firefox and maybe Edge.\r\n * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}\r\n * @author {@link https://MuazKhan.com|Muaz Khan}\r\n * @typedef WebAssemblyRecorder\r\n * @class\r\n * @example\r\n * var recorder = new WebAssemblyRecorder(mediaStream);\r\n * recorder.record();\r\n * recorder.stop(function(blob) {\r\n *     video.src = URL.createObjectURL(blob);\r\n * });\r\n * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}\r\n * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.\r\n * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}\r\n */\r\nfunction WebAssemblyRecorder(stream, config) {\r\n    // based on: github.com/GoogleChromeLabs/webm-wasm\r\n\r\n    if (typeof ReadableStream === 'undefined' || typeof WritableStream === 'undefined') {\r\n        // because it fixes readable/writable streams issues\r\n        console.error('Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js');\r\n    }\r\n\r\n    config = config || {};\r\n\r\n    config.width = config.width || 640;\r\n    config.height = config.height || 480;\r\n    config.frameRate = config.frameRate || 30;\r\n    config.bitrate = config.bitrate || 1200;\r\n    config.realtime = config.realtime || true;\r\n\r\n    function createBufferURL(buffer, type) {\r\n        return URL.createObjectURL(new Blob([buffer], {\r\n            type: type || ''\r\n        }));\r\n    }\r\n\r\n    var finished;\r\n\r\n    function cameraStream() {\r\n        return new ReadableStream({\r\n            start: function(controller) {\r\n                var cvs = document.createElement('canvas');\r\n                var video = document.createElement('video');\r\n                var first = true;\r\n                video.srcObject = stream;\r\n                video.muted = true;\r\n                video.height = config.height;\r\n                video.width = config.width;\r\n                video.volume = 0;\r\n                video.onplaying = function() {\r\n                    cvs.width = config.width;\r\n                    cvs.height = config.height;\r\n                    var ctx = cvs.getContext('2d');\r\n                    var frameTimeout = 1000 / config.frameRate;\r\n                    var cameraTimer = setInterval(function f() {\r\n                        if (finished) {\r\n                            clearInterval(cameraTimer);\r\n                            controller.close();\r\n                        }\r\n\r\n                        if (first) {\r\n                            first = false;\r\n                            if (config.onVideoProcessStarted) {\r\n                                config.onVideoProcessStarted();\r\n                            }\r\n                        }\r\n\r\n                        ctx.drawImage(video, 0, 0);\r\n                        if (controller._controlledReadableStream.state !== 'closed') {\r\n                            try {\r\n                                controller.enqueue(\r\n                                    ctx.getImageData(0, 0, config.width, config.height)\r\n                                );\r\n                            } catch (e) {}\r\n                        }\r\n                    }, frameTimeout);\r\n                };\r\n                video.play();\r\n            }\r\n        });\r\n    }\r\n\r\n    var worker;\r\n\r\n    function startRecording(stream, buffer) {\r\n        if (!config.workerPath && !buffer) {\r\n            finished = false;\r\n\r\n            // is it safe to use @latest ?\r\n\r\n            fetch(\r\n                'https://unpkg.com/webm-wasm@latest/dist/webm-worker.js'\r\n            ).then(function(r) {\r\n                r.arrayBuffer().then(function(buffer) {\r\n                    startRecording(stream, buffer);\r\n                });\r\n            });\r\n            return;\r\n        }\r\n\r\n        if (!config.workerPath && buffer instanceof ArrayBuffer) {\r\n            var blob = new Blob([buffer], {\r\n                type: 'text/javascript'\r\n            });\r\n            config.workerPath = URL.createObjectURL(blob);\r\n        }\r\n\r\n        if (!config.workerPath) {\r\n            console.error('workerPath parameter is missing.');\r\n        }\r\n\r\n        worker = new Worker(config.workerPath);\r\n\r\n        worker.postMessage(config.webAssemblyPath || 'https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm');\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === 'READY') {\r\n                worker.postMessage({\r\n                    width: config.width,\r\n                    height: config.height,\r\n                    bitrate: config.bitrate || 1200,\r\n                    timebaseDen: config.frameRate || 30,\r\n                    realtime: config.realtime\r\n                });\r\n\r\n                cameraStream().pipeTo(new WritableStream({\r\n                    write: function(image) {\r\n                        if (finished) {\r\n                            console.error('Got image, but recorder is finished!');\r\n                            return;\r\n                        }\r\n\r\n                        worker.postMessage(image.data.buffer, [image.data.buffer]);\r\n                    }\r\n                }));\r\n            } else if (!!event.data) {\r\n                if (!isPaused) {\r\n                    arrayOfBuffers.push(event.data);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * This method records video.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.record();\r\n     */\r\n    this.record = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n        startRecording(stream);\r\n\r\n        if (typeof config.initCallback === 'function') {\r\n            config.initCallback();\r\n        }\r\n    };\r\n\r\n    var isPaused;\r\n\r\n    /**\r\n     * This method pauses the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.pause();\r\n     */\r\n    this.pause = function() {\r\n        isPaused = true;\r\n    };\r\n\r\n    /**\r\n     * This method resumes the recording process.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.resume();\r\n     */\r\n    this.resume = function() {\r\n        isPaused = false;\r\n    };\r\n\r\n    function terminate(callback) {\r\n        if (!worker) {\r\n            if (callback) {\r\n                callback();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // Wait for null event data to indicate that the encoding is complete\r\n        worker.addEventListener('message', function(event) {\r\n            if (event.data === null) {\r\n                worker.terminate();\r\n                worker = null;\r\n\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        });\r\n\r\n        worker.postMessage(null);\r\n    }\r\n\r\n    var arrayOfBuffers = [];\r\n\r\n    /**\r\n     * This method stops recording video.\r\n     * @param {function} callback - Callback function, that is used to pass recorded blob back to the callee.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(blob) {\r\n     *     video.src = URL.createObjectURL(blob);\r\n     * });\r\n     */\r\n    this.stop = function(callback) {\r\n        finished = true;\r\n\r\n        var recorder = this;\r\n\r\n        terminate(function() {\r\n            recorder.blob = new Blob(arrayOfBuffers, {\r\n                type: 'video/webm'\r\n            });\r\n\r\n            callback(recorder.blob);\r\n        });\r\n    };\r\n\r\n    // for debugging\r\n    this.name = 'WebAssemblyRecorder';\r\n    this.toString = function() {\r\n        return this.name;\r\n    };\r\n\r\n    /**\r\n     * This method resets currently recorded data.\r\n     * @method\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.clearRecordedData();\r\n     */\r\n    this.clearRecordedData = function() {\r\n        arrayOfBuffers = [];\r\n        isPaused = false;\r\n        this.blob = null;\r\n\r\n        // todo: if recording-ON then STOP it first\r\n    };\r\n\r\n    /**\r\n     * @property {Blob} blob - The recorded blob object.\r\n     * @memberof WebAssemblyRecorder\r\n     * @example\r\n     * recorder.stop(function(){\r\n     *     var blob = recorder.blob;\r\n     * });\r\n     */\r\n    this.blob = null;\r\n}\r\n\r\nif (typeof RecordRTC !== 'undefined') {\r\n    RecordRTC.WebAssemblyRecorder = WebAssemblyRecorder;\r\n}\n","// The MIT License (MIT)\n//\n// Copyright (c) 2023 Nitai Aharoni\n// Copyright (c) 2024 Shane Vandegrift\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n//\n// -----------------------------------------------------------------------------\n//\n// Code taken from (with modifications):\n// https://github.com/nitaiaharoni1/whisper-speech-to-text/blob/8dfaf57bb20eadb2aa5958e8c8edd20e3ba34d57/src/WhisperSTT.ts\n\nimport { RecordRTCPromisesHandler } from 'recordrtc';\n\nconst AUDIO_TYPE = 'audio';\n\nexport class WhisperSTT {\n  private recorder: RecordRTCPromisesHandler | null;\n  private stream: MediaStream | null;\n  public isRecording: boolean;\n  public isStopped: boolean;\n  public isPaused: boolean;\n\n  constructor() {\n    this.recorder = null;\n    this.stream = null;\n    this.isRecording = false;\n    this.isStopped = true;\n    this.isPaused = false;\n  }\n\n  public pauseRecording = async (): Promise<void> => {\n    if (!this.recorder) {\n      throw new Error('Cannot pause recording: no recorder');\n    }\n    await this.recorder.pauseRecording();\n    this.isPaused = true;\n    this.isRecording = false;\n  };\n\n  public resumeRecording = async (): Promise<void> => {\n    if (!this.recorder) {\n      throw new Error('Cannot resume recording: no recorder');\n    }\n    await this.recorder.resumeRecording();\n    this.isPaused = false;\n    this.isRecording = true;\n  };\n\n  public startRecording = async (): Promise<void> => {\n    try {\n      this.stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      this.recorder = new RecordRTCPromisesHandler(this.stream, {\n        type: AUDIO_TYPE,\n      });\n      this.recorder.startRecording();\n      this.isRecording = true;\n      this.isStopped = false;\n    } catch (error: any) {\n      this.isRecording = false;\n      this.isStopped = true;\n      throw new Error(`Error starting recording: ${error.message}`);\n    }\n  };\n\n  public stopRecording = async (\n    onFinish: (blob: Blob) => void\n  ): Promise<void> => {\n    if (!this.isRecording || !this.recorder) {\n      throw new Error('Cannot stop recording: no recorder');\n    }\n    try {\n      await this.recorder.stopRecording();\n      const blob = await this.recorder.getBlob();\n      onFinish(blob);\n      this.stream?.getTracks().forEach((track) => {\n        track.stop();\n      });\n      this.recorder = null;\n      this.stream = null;\n      this.isRecording = false;\n      this.isStopped = true;\n      this.isPaused = false;\n    } catch (error: any) {\n      this.isRecording = false;\n      this.isStopped = true;\n      throw new Error(`Error stopping recording: ${error.message}`);\n    }\n  };\n\n  public abortRecording = async () => {\n    if (!this.isRecording || !this.recorder) {\n      throw new Error('Cannot stop recording: no recorder');\n    }\n    await this.recorder.stopRecording();\n    this.recorder = null;\n    this.stream = null;\n    this.isRecording = false;\n    this.isStopped = true;\n    this.isPaused = false;\n  };\n}\n","import { atom } from 'solid-jotai';\ntype RadarConfig = {\n  scale: number;\n  isDragging: boolean;\n  shiftPoint: {\n    x: number;\n    y: number;\n  };\n  lastShiftPoint: {\n    x: number;\n    y: number;\n  };\n  dragStartPoint: {\n    x: number;\n    y: number;\n  };\n};\nexport let radarAtom = atom<RadarConfig>({\n  scale: 1.0,\n  isDragging: false,\n  shiftPoint: {\n    x: 0,\n    y: 0,\n  },\n  lastShiftPoint: {\n    x: 0,\n    y: 0,\n  },\n  dragStartPoint: {\n    x: 0,\n    y: 0,\n  },\n});\n\nexport let isRecordingAtom = atom(false);\nexport let useTTSAtom = atom(false);\nexport let frequencyAtom = atom(118.5);\nexport let controlAtom = atom({\n  airspace: atom('KSFO'),\n  frequency: atom(118.5),\n});\n\nexport let renderAtom = atom<{\n  doInitialDraw: boolean;\n  lastDraw: number;\n}>({\n  doInitialDraw: true,\n  lastDraw: 0,\n});\n\nexport let selectedAircraftAtom = atom<string>('');\n","import { LandingState, Runway, TaxiingState, Vec2 } from './types';\n\nexport const timeScale = 1;\n\nexport const nauticalMilesToFeet = 6076.115;\nexport const knotToFeetPerSecond = 1.68781 * timeScale;\n\nexport const ENROUTE_TIME_MULTIPLIER = 10;\n\nexport function isSome<T>(value: T): value is NonNullable<T> {\n  return value !== undefined && value !== null;\n}\n\nexport function headingToDegrees(heading: number) {\n  return (heading + 360 + 90) % 360;\n}\n\nexport function degreesToHeading(degrees: number) {\n  return (degrees + 360 + 90) % 360;\n}\n\nexport const toDegrees = (degrees: number) => (degrees * 180) / Math.PI;\nexport const toRadians = (degrees: number) => (degrees * Math.PI) / 180;\n\nexport function movePoint(\n  point: Vec2,\n  length: number,\n  directionDegrees: number\n): Vec2 {\n  // Convert direction from degrees to radians\n  const directionRadians = toRadians(directionDegrees);\n  // Calculate the new coordinates\n  const newX = point[0] + length * Math.sin(directionRadians);\n  const newY = point[1] + length * Math.cos(directionRadians);\n  return [newX, newY];\n}\n\nexport function angleBetweenPoints(a: Vec2, b: Vec2): number {\n  let dx = b[0] - a[0];\n  let dy = b[1] - a[1];\n\n  return (toDegrees(Math.atan2(dy, dx)) + 360) % 360;\n}\n\nexport function midpointBetweenPoints(a: Vec2, b: Vec2): Vec2 {\n  return [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n}\n\nexport function projectPoint(origin: Vec2, point: Vec2, scale: number): Vec2 {\n  let angle = angleBetweenPoints(origin, point);\n  let distance = calculateDistance(origin, point);\n  return movePoint(point, distance * scale - distance, angle);\n}\n\nexport function inverseDegrees(degrees: number): number {\n  return (degrees + 180) % 360;\n}\n\nexport function runwayInfo(\n  runway: Runway\n  // scale: number\n): {\n  start: Vec2;\n  end: Vec2;\n  ils: {\n    altitudePoints: Vec2[];\n    end: Vec2;\n    maxAngle: Vec2;\n    minAngle: Vec2;\n  };\n} {\n  let pos: Vec2 = runway.pos;\n  let length = runway.length;\n\n  let start = movePoint(pos, length * 0.5, inverseDegrees(runway.heading));\n  let end = movePoint(pos, length * 0.5, runway.heading);\n\n  let maxIlsRangeMiles = 18;\n  let ilsPoints: Vec2[] = [];\n  let separate = 6.0 / 4;\n  for (let i = 1; i < 4; i += 1) {\n    let point = i * separate + 0;\n    ilsPoints.push(\n      movePoint(\n        start,\n        length + nauticalMilesToFeet * point,\n        inverseDegrees(runway.heading)\n      )\n    );\n  }\n\n  let ilsStart = movePoint(\n    start,\n    length / 2 + nauticalMilesToFeet * 20,\n    inverseDegrees(runway.heading)\n  );\n\n  let maxAngle = movePoint(\n    start,\n    length / 2 + nauticalMilesToFeet * maxIlsRangeMiles,\n    inverseDegrees(runway.heading + 5)\n  );\n  let minAngle = movePoint(\n    start,\n    length / 2 + nauticalMilesToFeet * maxIlsRangeMiles,\n    inverseDegrees((runway.heading + (360 - 5)) % 360)\n  );\n\n  return {\n    start,\n    end,\n    ils: { altitudePoints: ilsPoints, end: ilsStart, maxAngle, minAngle },\n  };\n}\n\nexport function calculateSquaredDistance(a: Vec2, b: Vec2): number {\n  return Math.pow(b[0] - a[0], 2) + Math.pow(b[1] - a[1], 2);\n}\n\nexport function calculateDistance(a: Vec2, b: Vec2): number {\n  return Math.sqrt(Math.pow(b[0] - a[0], 2) + Math.pow(b[1] - a[1], 2));\n}\n\nexport function formatTime(duration: number): string {\n  const isNegative = duration < 0;\n  let absDuration = Math.abs(duration);\n  let durationSeconds = Math.floor(absDuration / 1000);\n  let seconds = (durationSeconds % 60).toString().padStart(2, '0');\n  let minutes = Math.floor(durationSeconds / 60)\n    .toString()\n    .padStart(2, '0');\n  let timeString = `${minutes}:${seconds}`;\n  if (isNegative) {\n    timeString = `-${timeString}`;\n  }\n\n  return timeString;\n}\n\nexport function shortLandingState(state: LandingState): string {\n  switch (state) {\n    case 'before-turn':\n      return 'ILS';\n    case 'turning':\n      return 'TRN';\n    case 'correcting':\n      return 'ALN';\n    case 'localizer':\n      return 'LOC';\n    case 'glideslope':\n      return 'GLS';\n\n    default:\n      return 'UKN';\n  }\n}\n\nexport function shortTaxiingState(state: TaxiingState): string {\n  switch (state) {\n    case 'armed':\n      return 'ARM';\n    case 'stopped':\n      return 'STP';\n    case 'holding':\n      return 'HLD';\n    case 'override':\n      return 'OVR';\n\n    default:\n      return 'UKN';\n  }\n}\n","import { useAtom } from 'solid-jotai';\nimport { PrimitiveAtom, SetStateAction } from 'jotai';\nimport { Accessor, createEffect, createUniqueId, Resource } from 'solid-js';\nimport { isSome } from './lib';\n\ntype SetAtom<Args extends unknown[], Result> = (...args: Args) => Result;\n\nfunction getFromLocalStorage(id: string) {\n  let json = localStorage.getItem(id);\n  if (isSome(json)) {\n    return JSON.parse(json);\n  } else {\n    return null;\n  }\n}\n\nfunction setToLocalStorage<T>(id: string, val: T) {\n  let json = JSON.stringify(val);\n  localStorage.setItem(id, json);\n}\n\nexport function useStorageAtom<T>(\n  atom: PrimitiveAtom<T>\n): [\n  Resource<Awaited<T>> | Accessor<Awaited<T>>,\n  SetAtom<[SetStateAction<T>], void>,\n] {\n  const name = `storage-${createUniqueId()}`;\n  let [theAtom, setTheAtom] = useAtom(atom);\n\n  const local = getFromLocalStorage(name);\n  if (isSome(local)) {\n    setTheAtom(local);\n  }\n\n  createEffect(() => setToLocalStorage(name, theAtom()));\n\n  return [\n    theAtom,\n    (s) => {\n      setTheAtom(s);\n      setToLocalStorage(name, theAtom());\n    },\n  ];\n}\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return !Object.keys(b).some((key) => !partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItems.includes(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/thenable.ts\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nexport {\n  pendingThenable\n};\n//# sourceMappingURL=thenable.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let isResolved = false;\n  let continueFn;\n  const thenable = pendingThenable();\n  const cancel = (cancelOptions) => {\n    if (!isResolved) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onSuccess?.(value);\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onError?.(value);\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/notifyManager.ts\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = (cb) => setTimeout(cb, 0);\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { canFetch, createRetryer, isCancelledError } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#cache = config.cache;\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStale() {\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0;\n  }\n  isStaleByTime(staleTime = 0) {\n    return this.state.isInvalidated || this.state.data === void 0 || !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const queryFnContext = {\n        queryKey: this.queryKey,\n        meta: this.meta\n      };\n      addSignalProperty(queryFnContext);\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const context = {\n      fetchOptions,\n      options: this.options,\n      queryKey: this.queryKey,\n      state: this.state,\n      fetchFn\n    };\n    addSignalProperty(context);\n    this.options.behavior?.onFetch(\n      context,\n      this\n    );\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    const onError = (error) => {\n      if (!(isCancelledError(error) && error.silent)) {\n        this.#dispatch({\n          type: \"error\",\n          error\n        });\n      }\n      if (!isCancelledError(error)) {\n        this.#cache.config.onError?.(\n          error,\n          this\n        );\n        this.#cache.config.onSettled?.(\n          this.state.data,\n          error,\n          this\n        );\n      }\n      this.scheduleGc();\n    };\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onSuccess: (data) => {\n        if (data === void 0) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(\n              `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n            );\n          }\n          onError(new Error(`${this.queryHash} data is undefined`));\n          return;\n        }\n        try {\n          this.setData(data);\n        } catch (error) {\n          onError(error);\n          return;\n        }\n        this.#cache.config.onSuccess?.(data, this);\n        this.#cache.config.onSettled?.(\n          data,\n          this.state.error,\n          this\n        );\n        this.scheduleGc();\n      },\n      onError,\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    return this.#retryer.start();\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n        case \"error\":\n          const error = action.error;\n          if (isCancelledError(error) && error.revert && this.#revertState) {\n            return { ...this.#revertState, fetchStatus: \"idle\" };\n          }\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (!restored) {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Map();\n    this.#mutationId = Date.now();\n  }\n  #mutations;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    const scope = scopeFor(mutation);\n    const mutations = this.#mutations.get(scope) ?? [];\n    mutations.push(mutation);\n    this.#mutations.set(scope, mutations);\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    const scope = scopeFor(mutation);\n    if (this.#mutations.has(scope)) {\n      const mutations = this.#mutations.get(scope)?.filter((x) => x !== mutation);\n      if (mutations) {\n        if (mutations.length === 0) {\n          this.#mutations.delete(scope);\n        } else {\n          this.#mutations.set(scope, mutations);\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const firstPendingMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m.state.status === \"pending\");\n    return !firstPendingMutation || firstPendingMutation === mutation;\n  }\n  runNext(mutation) {\n    const foundMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m !== mutation && m.state.isPaused);\n    return foundMutation?.continue() ?? Promise.resolve();\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((mutation) => {\n        this.remove(mutation);\n      });\n    });\n  }\n  getAll() {\n    return [...this.#mutations.values()].flat();\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id ?? String(mutation.mutationId);\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const queryFnContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n            direction: previous ? \"backward\" : \"forward\",\n            meta: context.options.meta\n          };\n          addSignalProperty(queryFnContext);\n          const page = await queryFn(\n            queryFnContext\n          );\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data)\n    return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam)\n    return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1)\n      return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0)\n      return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const cachedData = this.getQueryData(options.queryKey);\n    if (cachedData === void 0)\n      return this.fetchQuery(options);\n    else {\n      const defaultedOptions = this.defaultQueryOptions(options);\n      const query = this.#queryCache.build(this, defaultedOptions);\n      if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n        void this.prefetchQuery(defaultedOptions);\n      }\n      return Promise.resolve(cachedData);\n    }\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    const refetchFilters = {\n      type: \"active\",\n      ...filters\n    };\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  cancelQueries(filters = {}, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters = {}, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      const refetchFilters = {\n        ...filters,\n        type: filters.refetchType ?? filters.type ?? \"active\"\n      };\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  refetchQueries(filters = {}, options) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options?.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.enabled !== true && defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    if (!this.options.experimental_prefetchInRender) {\n      this.#currentThenable.reject(\n        new Error(\"experimental_prefetchInRender feature flag is not enabled\")\n      );\n    }\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options, notifyOptions) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult(notifyOptions);\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    const trackedResult = {};\n    Object.keys(result).forEach((key) => {\n      Object.defineProperty(trackedResult, key, {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n          this.trackProp(key);\n          onPropTracked?.(key);\n          return result[key];\n        }\n      });\n    });\n    return trackedResult;\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    if (options.select && newState.data !== void 0) {\n      if (prevResult && newState.data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(newState.data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    } else {\n      data = newState.data;\n    }\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n        if (options.select && placeholderData !== void 0) {\n          try {\n            placeholderData = options.select(placeholderData);\n            this.#selectError = null;\n          } catch (selectError) {\n            this.#selectError = selectError;\n          }\n        }\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult(notifyOptions) {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const defaultNotifyOptions = {};\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    if (notifyOptions?.listeners !== false && shouldNotifyListeners()) {\n      defaultNotifyOptions.listeners = true;\n    }\n    this.#notify({ ...defaultNotifyOptions, ...notifyOptions });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false) {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","// src/hydration.ts\nfunction defaultTransformerFn(data) {\n  return data;\n}\nfunction dehydrateMutation(mutation) {\n  return {\n    mutationKey: mutation.options.mutationKey,\n    state: mutation.state,\n    ...mutation.options.scope && { scope: mutation.options.scope },\n    ...mutation.meta && { meta: mutation.meta }\n  };\n}\nfunction dehydrateQuery(query, serializeData) {\n  return {\n    state: {\n      ...query.state,\n      ...query.state.data !== void 0 && {\n        data: serializeData(query.state.data)\n      }\n    },\n    queryKey: query.queryKey,\n    queryHash: query.queryHash,\n    ...query.state.status === \"pending\" && {\n      promise: query.promise?.then(serializeData).catch((error) => {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `A query that was dehydrated as pending ended up rejecting. [${query.queryHash}]: ${error}; The error will be redacted in production builds`\n          );\n        }\n        return Promise.reject(new Error(\"redacted\"));\n      })\n    },\n    ...query.meta && { meta: query.meta }\n  };\n}\nfunction defaultShouldDehydrateMutation(mutation) {\n  return mutation.state.isPaused;\n}\nfunction defaultShouldDehydrateQuery(query) {\n  return query.state.status === \"success\";\n}\nfunction dehydrate(client, options = {}) {\n  const filterMutation = options.shouldDehydrateMutation ?? client.getDefaultOptions().dehydrate?.shouldDehydrateMutation ?? defaultShouldDehydrateMutation;\n  const mutations = client.getMutationCache().getAll().flatMap(\n    (mutation) => filterMutation(mutation) ? [dehydrateMutation(mutation)] : []\n  );\n  const filterQuery = options.shouldDehydrateQuery ?? client.getDefaultOptions().dehydrate?.shouldDehydrateQuery ?? defaultShouldDehydrateQuery;\n  const serializeData = options.serializeData ?? client.getDefaultOptions().dehydrate?.serializeData ?? defaultTransformerFn;\n  const queries = client.getQueryCache().getAll().flatMap(\n    (query) => filterQuery(query) ? [dehydrateQuery(query, serializeData)] : []\n  );\n  return { mutations, queries };\n}\nfunction hydrate(client, dehydratedState, options) {\n  if (typeof dehydratedState !== \"object\" || dehydratedState === null) {\n    return;\n  }\n  const mutationCache = client.getMutationCache();\n  const queryCache = client.getQueryCache();\n  const deserializeData = options?.defaultOptions?.deserializeData ?? client.getDefaultOptions().hydrate?.deserializeData ?? defaultTransformerFn;\n  const mutations = dehydratedState.mutations || [];\n  const queries = dehydratedState.queries || [];\n  mutations.forEach(({ state, ...mutationOptions }) => {\n    mutationCache.build(\n      client,\n      {\n        ...client.getDefaultOptions().hydrate?.mutations,\n        ...options?.defaultOptions?.mutations,\n        ...mutationOptions\n      },\n      state\n    );\n  });\n  queries.forEach(({ queryKey, state, queryHash, meta, promise }) => {\n    let query = queryCache.get(queryHash);\n    const data = state.data === void 0 ? state.data : deserializeData(state.data);\n    if (query) {\n      if (query.state.dataUpdatedAt < state.dataUpdatedAt) {\n        const { fetchStatus: _ignored, ...serializedState } = state;\n        query.setState({\n          ...serializedState,\n          data\n        });\n      }\n    } else {\n      query = queryCache.build(\n        client,\n        {\n          ...client.getDefaultOptions().hydrate?.queries,\n          ...options?.defaultOptions?.queries,\n          queryKey,\n          queryHash,\n          meta\n        },\n        // Reset fetch status to idle to avoid\n        // query being stuck in fetching state upon hydration\n        {\n          ...state,\n          data,\n          fetchStatus: \"idle\"\n        }\n      );\n    }\n    if (promise) {\n      const initialPromise = Promise.resolve(promise).then(deserializeData);\n      void query.fetch(void 0, { initialPromise });\n    }\n  });\n}\nexport {\n  defaultShouldDehydrateMutation,\n  defaultShouldDehydrateQuery,\n  dehydrate,\n  hydrate\n};\n//# sourceMappingURL=hydration.js.map","import { QueryClient as QueryClient$1, MutationObserver, replaceEqualDeep, QueriesObserver, hydrate, QueryObserver, InfiniteQueryObserver, notifyManager } from '@tanstack/query-core';\nexport * from '@tanstack/query-core';\nimport { createContext, useContext, createRenderEffect, onCleanup, createMemo, createSignal, createComputed, on, createEffect, mergeProps, createResource, batch, onMount } from 'solid-js';\nimport { createComponent, isServer } from 'solid-js/web';\nimport { createStore, unwrap, reconcile } from 'solid-js/store';\n\n// src/index.ts\nvar QueryClient = class extends QueryClient$1 {\n  constructor(config = {}) {\n    super(config);\n  }\n};\nvar QueryClientContext = createContext(void 0);\nvar useQueryClient = (queryClient) => {\n  if (queryClient) {\n    return queryClient;\n  }\n  const client = useContext(QueryClientContext);\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client();\n};\nvar QueryClientProvider = (props) => {\n  createRenderEffect((unmount) => {\n    unmount?.();\n    props.client.mount();\n    return props.client.unmount.bind(props.client);\n  });\n  onCleanup(() => props.client.unmount());\n  return createComponent(QueryClientContext.Provider, {\n    value: () => props.client,\n    get children() {\n      return props.children;\n    }\n  });\n};\n\n// src/utils.ts\nfunction shouldThrowError(throwError, params) {\n  if (typeof throwError === \"function\") {\n    return throwError(...params);\n  }\n  return !!throwError;\n}\nfunction noop() {\n}\nvar IsRestoringContext = createContext(() => false);\nvar useIsRestoring = () => useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\n\n// src/createBaseQuery.ts\nfunction reconcileFn(store, result, reconcileOption, queryHash) {\n  if (reconcileOption === false)\n    return result;\n  if (typeof reconcileOption === \"function\") {\n    const newData2 = reconcileOption(store.data, result.data);\n    return { ...result, data: newData2 };\n  }\n  let data = result.data;\n  if (store.data === void 0) {\n    try {\n      data = structuredClone(data);\n    } catch (error) {\n    }\n  }\n  const newData = reconcile(data, { key: reconcileOption })(store.data);\n  return { ...result, data: newData };\n}\nvar hydratableObserverResult = (query, result) => {\n  if (!isServer)\n    return result;\n  const obj = {\n    ...unwrap(result),\n    // During SSR, functions cannot be serialized, so we need to remove them\n    // This is safe because we will add these functions back when the query is hydrated\n    refetch: void 0\n  };\n  if (\"fetchNextPage\" in result) {\n    obj.fetchNextPage = void 0;\n    obj.fetchPreviousPage = void 0;\n  }\n  obj.hydrationData = {\n    state: query.state,\n    queryKey: query.queryKey,\n    queryHash: query.queryHash,\n    ...query.meta && { meta: query.meta }\n  };\n  return obj;\n};\nfunction createBaseQuery(options, Observer, queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const isRestoring = useIsRestoring();\n  let unsubscribeQueued = false;\n  const defaultedOptions = createMemo(() => {\n    const defaultOptions = client().defaultQueryOptions(options());\n    defaultOptions._optimisticResults = isRestoring() ? \"isRestoring\" : \"optimistic\";\n    defaultOptions.structuralSharing = false;\n    if (isServer) {\n      defaultOptions.retry = false;\n      defaultOptions.throwOnError = true;\n    }\n    return defaultOptions;\n  });\n  const initialOptions = defaultedOptions();\n  const [observer, setObserver] = createSignal(\n    new Observer(client(), defaultedOptions())\n  );\n  let observerResult = observer().getOptimisticResult(defaultedOptions());\n  const [state, setState] = createStore(observerResult);\n  const createServerSubscriber = (resolve, reject) => {\n    return observer().subscribe((result) => {\n      notifyManager.batchCalls(() => {\n        const query = observer().getCurrentQuery();\n        const unwrappedResult = hydratableObserverResult(query, result);\n        if (unwrappedResult.isError) {\n          reject(unwrappedResult.error);\n          unsubscribeIfQueued();\n        } else {\n          resolve(unwrappedResult);\n          unsubscribeIfQueued();\n        }\n      })();\n    });\n  };\n  const unsubscribeIfQueued = () => {\n    if (unsubscribeQueued) {\n      unsubscribe?.();\n      unsubscribeQueued = false;\n    }\n  };\n  const createClientSubscriber = () => {\n    const obs = observer();\n    return obs.subscribe((result) => {\n      observerResult = result;\n      queueMicrotask(() => {\n        if (unsubscribe) {\n          refetch();\n        }\n      });\n    });\n  };\n  function setStateWithReconciliation(res) {\n    const opts = observer().options;\n    const reconcileOptions = opts.reconcile;\n    setState((store) => {\n      return reconcileFn(\n        store,\n        res,\n        reconcileOptions === void 0 ? false : reconcileOptions,\n        opts.queryHash\n      );\n    });\n  }\n  function createDeepSignal() {\n    return [\n      () => state,\n      (v) => {\n        const unwrapped = unwrap(state);\n        if (typeof v === \"function\") {\n          v = v(unwrapped);\n        }\n        if (v?.hydrationData) {\n          const { hydrationData, ...rest } = v;\n          v = rest;\n        }\n        setStateWithReconciliation(v);\n      }\n    ];\n  }\n  let unsubscribe = null;\n  let resolver = null;\n  const [queryResource, { refetch }] = createResource(\n    () => {\n      const obs = observer();\n      return new Promise((resolve, reject) => {\n        resolver = resolve;\n        if (isServer) {\n          unsubscribe = createServerSubscriber(resolve, reject);\n        } else if (!unsubscribe && !isRestoring()) {\n          unsubscribe = createClientSubscriber();\n        }\n        obs.updateResult();\n        if (observerResult.isError && !observerResult.isFetching && !isRestoring() && shouldThrowError(obs.options.throwOnError, [\n          observerResult.error,\n          obs.getCurrentQuery()\n        ])) {\n          setStateWithReconciliation(observerResult);\n          return reject(observerResult.error);\n        }\n        if (!observerResult.isLoading) {\n          resolver = null;\n          return resolve(\n            hydratableObserverResult(obs.getCurrentQuery(), observerResult)\n          );\n        }\n        setStateWithReconciliation(observerResult);\n      });\n    },\n    {\n      storage: createDeepSignal,\n      get deferStream() {\n        return options().deferStream;\n      },\n      /**\n       * If this resource was populated on the server (either sync render, or streamed in over time), onHydrated\n       * will be called. This is the point at which we can hydrate the query cache state, and setup the query subscriber.\n       *\n       * Leveraging onHydrated allows us to plug into the async and streaming support that solidjs resources already support.\n       *\n       * Note that this is only invoked on the client, for queries that were originally run on the server.\n       */\n      onHydrated(_k, info) {\n        if (info.value && \"hydrationData\" in info.value) {\n          hydrate(client(), {\n            // @ts-expect-error - hydrationData is not correctly typed internally\n            queries: [{ ...info.value.hydrationData }]\n          });\n        }\n        if (unsubscribe)\n          return;\n        const newOptions = { ...initialOptions };\n        if ((initialOptions.staleTime || !initialOptions.initialData) && info.value) {\n          newOptions.refetchOnMount = false;\n        }\n        observer().setOptions(newOptions);\n        setStateWithReconciliation(observer().getOptimisticResult(newOptions));\n        unsubscribe = createClientSubscriber();\n      }\n    }\n  );\n  createComputed(\n    on(\n      client,\n      (c) => {\n        if (unsubscribe) {\n          unsubscribe();\n        }\n        const newObserver = new Observer(c, defaultedOptions());\n        unsubscribe = createClientSubscriber();\n        setObserver(newObserver);\n      },\n      {\n        defer: true\n      }\n    )\n  );\n  createComputed(\n    on(\n      isRestoring,\n      (restoring) => {\n        if (!restoring && !isServer) {\n          refetch();\n        }\n      },\n      { defer: true }\n    )\n  );\n  onCleanup(() => {\n    if (isServer && queryResource.loading) {\n      unsubscribeQueued = true;\n      return;\n    }\n    if (unsubscribe) {\n      unsubscribe();\n      unsubscribe = null;\n    }\n    if (resolver && !isServer) {\n      resolver(observerResult);\n      resolver = null;\n    }\n  });\n  createComputed(\n    on(\n      [observer, defaultedOptions],\n      ([obs, opts]) => {\n        obs.setOptions(opts);\n        setStateWithReconciliation(obs.getOptimisticResult(opts));\n        refetch();\n      },\n      { defer: true }\n    )\n  );\n  const handler = {\n    get(target, prop) {\n      if (prop === \"data\") {\n        if (state.data !== void 0) {\n          return queryResource.latest?.data;\n        }\n        return queryResource()?.data;\n      }\n      return Reflect.get(target, prop);\n    }\n  };\n  return new Proxy(state, handler);\n}\n\n// src/createQuery.ts\nfunction createQuery(options, queryClient) {\n  return createBaseQuery(\n    createMemo(() => options()),\n    QueryObserver,\n    queryClient\n  );\n}\n\n// src/queryOptions.ts\nfunction queryOptions(options) {\n  return options;\n}\nfunction useIsFetching(filters, queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const queryCache = createMemo(() => client().getQueryCache());\n  const [fetches, setFetches] = createSignal(client().isFetching(filters?.()));\n  const unsubscribe = queryCache().subscribe(() => {\n    setFetches(client().isFetching(filters?.()));\n  });\n  onCleanup(unsubscribe);\n  return fetches;\n}\nfunction createInfiniteQuery(options, queryClient) {\n  return createBaseQuery(\n    createMemo(() => options()),\n    InfiniteQueryObserver,\n    queryClient\n  );\n}\n\n// src/infiniteQueryOptions.ts\nfunction infiniteQueryOptions(options) {\n  return options;\n}\nfunction createMutation(options, queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const observer = new MutationObserver(\n    client(),\n    options()\n  );\n  const mutate = (variables, mutateOptions) => {\n    observer.mutate(variables, mutateOptions).catch(noop);\n  };\n  const [state, setState] = createStore({\n    ...observer.getCurrentResult(),\n    mutate,\n    mutateAsync: observer.getCurrentResult().mutate\n  });\n  createComputed(() => {\n    observer.setOptions(options());\n  });\n  createComputed(\n    on(\n      () => state.status,\n      () => {\n        if (state.isError && shouldThrowError(observer.options.throwOnError, [state.error])) {\n          throw state.error;\n        }\n      }\n    )\n  );\n  const unsubscribe = observer.subscribe((result) => {\n    setState({\n      ...result,\n      mutate,\n      mutateAsync: result.mutate\n    });\n  });\n  onCleanup(unsubscribe);\n  return state;\n}\nfunction useIsMutating(filters, queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const mutationCache = createMemo(() => client().getMutationCache());\n  const [mutations, setMutations] = createSignal(\n    client().isMutating(filters?.())\n  );\n  const unsubscribe = mutationCache().subscribe((_result) => {\n    setMutations(client().isMutating(filters?.()));\n  });\n  onCleanup(unsubscribe);\n  return mutations;\n}\nfunction getResult(mutationCache, options) {\n  return mutationCache.findAll(options.filters).map(\n    (mutation) => options.select ? options.select(mutation) : mutation.state\n  );\n}\nfunction useMutationState(options = () => ({}), queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const mutationCache = createMemo(() => client().getMutationCache());\n  const [result, setResult] = createSignal(\n    getResult(mutationCache(), options())\n  );\n  createEffect(() => {\n    const unsubscribe = mutationCache().subscribe(() => {\n      const nextResult = replaceEqualDeep(\n        result(),\n        getResult(mutationCache(), options())\n      );\n      if (result() !== nextResult) {\n        setResult(nextResult);\n      }\n    });\n    onCleanup(unsubscribe);\n  });\n  return result;\n}\nfunction createQueries(queriesOptions, queryClient) {\n  const client = createMemo(() => useQueryClient(queryClient?.()));\n  const isRestoring = useIsRestoring();\n  const defaultedQueries = createMemo(\n    () => queriesOptions().queries.map(\n      (options) => mergeProps(\n        client().defaultQueryOptions(options),\n        {\n          get _optimisticResults() {\n            return isRestoring() ? \"isRestoring\" : \"optimistic\";\n          }\n        }\n      )\n    )\n  );\n  const observer = new QueriesObserver(\n    client(),\n    defaultedQueries(),\n    queriesOptions().combine ? {\n      combine: queriesOptions().combine\n    } : void 0\n  );\n  const [state, setState] = createStore(\n    observer.getOptimisticResult(\n      defaultedQueries(),\n      queriesOptions().combine\n    )[1]()\n  );\n  createRenderEffect(\n    on(\n      () => queriesOptions().queries.length,\n      () => setState(\n        observer.getOptimisticResult(\n          defaultedQueries(),\n          queriesOptions().combine\n        )[1]()\n      )\n    )\n  );\n  const dataResources = createMemo(\n    on(\n      () => state.length,\n      () => state.map((queryRes) => {\n        const dataPromise = () => new Promise((resolve) => {\n          if (queryRes.isFetching && queryRes.isLoading)\n            return;\n          resolve(unwrap(queryRes.data));\n        });\n        return createResource(dataPromise);\n      })\n    )\n  );\n  batch(() => {\n    const dataResources_ = dataResources();\n    for (let index = 0; index < dataResources_.length; index++) {\n      const dataResource = dataResources_[index];\n      dataResource[1].mutate(() => unwrap(state[index].data));\n      dataResource[1].refetch();\n    }\n  });\n  let taskQueue = [];\n  const subscribeToObserver = () => observer.subscribe((result) => {\n    taskQueue.push(() => {\n      batch(() => {\n        const dataResources_ = dataResources();\n        for (let index = 0; index < dataResources_.length; index++) {\n          const dataResource = dataResources_[index];\n          const unwrappedResult = { ...unwrap(result[index]) };\n          setState(index, unwrap(unwrappedResult));\n          dataResource[1].mutate(() => unwrap(state[index].data));\n          dataResource[1].refetch();\n        }\n      });\n    });\n    queueMicrotask(() => {\n      const taskToRun = taskQueue.pop();\n      if (taskToRun)\n        taskToRun();\n      taskQueue = [];\n    });\n  });\n  let unsubscribe = noop;\n  createComputed((cleanup) => {\n    cleanup?.();\n    unsubscribe = isRestoring() ? noop : subscribeToObserver();\n    return () => queueMicrotask(unsubscribe);\n  });\n  onCleanup(unsubscribe);\n  onMount(() => {\n    observer.setQueries(\n      defaultedQueries(),\n      queriesOptions().combine ? {\n        combine: queriesOptions().combine\n      } : void 0,\n      { listeners: false }\n    );\n  });\n  createComputed(() => {\n    observer.setQueries(\n      defaultedQueries(),\n      queriesOptions().combine ? {\n        combine: queriesOptions().combine\n      } : void 0,\n      { listeners: false }\n    );\n  });\n  const handler = (index) => ({\n    get(target, prop) {\n      if (prop === \"data\") {\n        return dataResources()[index][0]();\n      }\n      return Reflect.get(target, prop);\n    }\n  });\n  const getProxies = () => state.map((s, index) => {\n    return new Proxy(s, handler(index));\n  });\n  const [proxyState, setProxyState] = createStore(getProxies());\n  createRenderEffect(() => setProxyState(getProxies()));\n  return proxyState;\n}\n\nexport { IsRestoringProvider, QueryClient, QueryClientContext, QueryClientProvider, createInfiniteQuery, createMutation, createQueries, createQuery, infiniteQueryOptions, queryOptions, useIsFetching, useIsMutating, useIsRestoring, useMutationState, useQueryClient };\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","import { createQuery } from '@tanstack/solid-query';\nimport { Accessor } from 'solid-js';\nimport { Aircraft, Flight, Points, RadioMessage, World } from './types';\nimport fastDeepEqual from 'fast-deep-equal';\n\nconst defaultURL = `${window.location.protocol}//${window.location.hostname}:9001`;\nconst search = new URLSearchParams(window.location.search);\nexport const baseAPIPath = search.has('api') ? search.get('api') : defaultURL;\n\n// Misc\nexport const getPing = '/api/ping';\nexport function usePing() {\n  return createQuery<boolean>(() => ({\n    queryKey: [getPing],\n    queryFn: async () => {\n      try {\n        const result = await fetch(`${baseAPIPath}${getPing}`);\n        if (!result.ok) return false;\n        return (await result.text()) === 'pong';\n      } catch {\n        return false;\n      }\n    },\n    staleTime: 2000,\n    refetchInterval: 2000,\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\n// Aircraft\nexport const getAircraft = '/api/game/aircraft';\nexport function useAircraft(renderRate: Accessor<number>) {\n  return createQuery<Array<Aircraft>>(() => ({\n    queryKey: [getAircraft],\n    queryFn: async () => {\n      const result = await fetch(`${baseAPIPath}${getAircraft}`);\n      if (!result.ok) return [];\n      return result.json();\n    },\n    initialData: [],\n    staleTime: renderRate(),\n    refetchInterval: renderRate(),\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\n// Flights\nexport const getFlights = '/api/game/flights';\nexport function useFlights() {\n  return createQuery<Array<Flight>>(() => ({\n    queryKey: [getFlights],\n    queryFn: async () => {\n      const result = await fetch(`${baseAPIPath}${getFlights}`);\n      if (!result.ok) return [];\n      return result.json();\n    },\n    initialData: [],\n    staleTime: 2000,\n    refetchInterval: 2000,\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\nexport function useFlight(id: number) {\n  return createQuery<Flight | null>(() => ({\n    queryKey: [getFlights, id],\n    queryFn: async () => {\n      const flights = useFlights();\n      if (!flights.data) return null;\n      return flights.data.find((f) => f.id === id) ?? null;\n    },\n    staleTime: 2000,\n    refetchInterval: 2000,\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\nexport function useFlightByAircraft(id: string) {\n  return createQuery<Flight | null>(() => ({\n    queryKey: [getFlights, id],\n    queryFn: async () => {\n      const flights = useFlights();\n      if (!flights.data) return null;\n      return (\n        flights.data.find(\n          (f) => f.status.type !== 'scheduled' && f.status.value === id\n        ) ?? null\n      );\n    },\n    staleTime: 2000,\n    refetchInterval: 2000,\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\nexport const postCreateFlight = '/api/game/flight';\nexport const deleteFlight = (id: number) => `/api/game/flight/${id}`;\n\n// State\nexport const getWorld = '/api/world';\nexport function useWorld() {\n  return createQuery<World>(() => ({\n    queryKey: [getWorld],\n    queryFn: async () => {\n      const result = await fetch(`${baseAPIPath}${getWorld}`);\n      if (!result.ok) return null;\n      return result.json();\n    },\n    staleTime: Infinity,\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\nexport const getPoints = '/api/game/points';\nexport function usePoints() {\n  return createQuery<Points>(() => ({\n    queryKey: [getPoints],\n    queryFn: async () => {\n      const result = await fetch(`${baseAPIPath}${getPoints}`);\n      if (!result.ok) return null;\n      return result.json();\n    },\n    staleTime: 1000,\n    refetchInterval: 1000,\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n\nexport const getMessages = '/api/messages';\nexport function useMessages() {\n  return createQuery<Array<RadioMessage>>(() => ({\n    queryKey: [getMessages],\n    queryFn: async () => {\n      const result = await fetch(`${baseAPIPath}${getMessages}`);\n      if (!result.ok) return [];\n      return result.json();\n    },\n    reconcile: (oldData, newData) => {\n      // Prevent rerenders if the data hasn't changed.\n      if (oldData) {\n        const isEqual = fastDeepEqual(oldData, newData);\n        if (isEqual) {\n          return oldData;\n        } else {\n          return newData;\n        }\n      } else {\n        return newData;\n      }\n    },\n    initialData: [],\n    staleTime: 500,\n    refetchInterval: 500,\n    refetchOnMount: 'always',\n    refetchOnReconnect: 'always',\n    throwOnError: true, // Throw an error if the query fails\n  }));\n}\n","import { useAtom } from 'solid-jotai';\nimport {\n  frequencyAtom,\n  isRecordingAtom,\n  selectedAircraftAtom,\n  useTTSAtom,\n} from './lib/atoms';\nimport { createEffect, createSignal, onMount, onCleanup } from 'solid-js';\nimport { RadioMessage } from './lib/types';\nimport { useStorageAtom } from './lib/hooks';\nimport { useMessages } from './lib/api';\n\nexport default function Chatbox({\n  sendMessage,\n}: {\n  sendMessage: (text: string) => void;\n}) {\n  let chatbox!: HTMLDivElement;\n  let chatboxInput!: HTMLInputElement;\n  let [isRecording] = useAtom(isRecordingAtom);\n  let [frequency] = useAtom(frequencyAtom);\n  let [selectedAircraft, setSelectedAircraft] = useAtom(selectedAircraftAtom);\n  let [useTTS] = useStorageAtom(useTTSAtom);\n  let [showAll, setShowAll] = createSignal(false);\n  let [text, setText] = createSignal('');\n  let [lastRead, setLastRead] = createSignal(Date.now() / 1000);\n  let [voices, setVoices] = createSignal<\n    Map<String, { rate: number; pitch: number }>\n  >(new Map());\n  const messages = useMessages();\n\n  function randBetween(min: number, max: number) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  }\n\n  function speak(message: RadioMessage) {\n    if (\n      useTTS() &&\n      'speechSynthesis' in window &&\n      frequency() === message.frequency\n    ) {\n      if (window.speechSynthesis.speaking || isRecording()) {\n        setTimeout(() => speak(message), 500);\n      } else {\n        const utterance = new SpeechSynthesisUtterance(\n          message.reply.replace(/[0-9]/g, '$& ')\n        );\n\n        if (voices().has(message.id)) {\n          utterance.rate = voices().get(message.id)!.rate;\n          utterance.pitch = voices().get(message.id)!.pitch;\n        } else {\n          const voice = {\n            rate: (1.0 * randBetween(100, 130)) / 100,\n            pitch: (1.3 * randBetween(80, 115)) / 100,\n          };\n          setVoices((voices) => voices.set(message.id, voice));\n          utterance.rate = voice.rate;\n          utterance.pitch = voice.pitch;\n        }\n\n        utterance.volume = 0.01;\n        window.speechSynthesis.speak(utterance);\n      }\n    } else {\n      console.log(\"Sorry, your browser doesn't support text to speech!\");\n    }\n  }\n\n  createEffect(() => {\n    for (const message of messages.data) {\n      if (message.created.secs > lastRead() && message.id !== 'ATC') {\n        if (message.reply !== '') {\n          speak(message);\n        } else {\n          setSelectedAircraft(message.id);\n        }\n        setLastRead(message.created.secs);\n      }\n    }\n  });\n\n  function onKeydown(e: KeyboardEvent) {\n    if (\n      e.key === 't' &&\n      chatboxInput instanceof HTMLInputElement &&\n      document.activeElement !== chatboxInput\n    ) {\n      chatboxInput.focus();\n      e.preventDefault();\n    } else if (e.key === 'Escape') {\n      chatboxInput.blur();\n      e.preventDefault();\n    }\n  }\n\n  onMount(() => {\n    document.addEventListener('keydown', onKeydown);\n  });\n\n  onCleanup(() => {\n    document.removeEventListener('keydown', onKeydown);\n  });\n\n  function resetText() {\n    if (selectedAircraft()) {\n      setText(`${selectedAircraft()} `);\n    } else {\n      setText('');\n    }\n  }\n\n  createEffect(() => {\n    if (selectedAircraft()) {\n      resetText();\n    }\n  });\n\n  createEffect(() => {\n    if (chatbox instanceof HTMLDivElement) {\n      // Subscribe to frequency and showAll signals\n      frequency();\n      showAll();\n\n      // Subscribe to messages signal\n      if (messages.data.length > 0) {\n        chatbox.scrollTo(0, chatbox.scrollHeight);\n      }\n    }\n  });\n\n  function toggleAll() {\n    setShowAll((b) => !b);\n  }\n\n  function handleSendMessage(text: string) {\n    if (text.length === 7 && /\\w{3}\\d{4}/.test(text)) {\n      setSelectedAircraft(text);\n    } else {\n      sendMessage(text);\n    }\n\n    resetText();\n  }\n\n  return (\n    <div id=\"chatbox\" classList={{ live: isRecording() }}>\n      <div class=\"controls\">\n        <input\n          type=\"button\"\n          value={showAll() ? 'Show Yours' : 'Show All'}\n          onclick={toggleAll}\n        />\n      </div>\n      <div class=\"messages\" ref={chatbox}>\n        {messages.data\n          .filter(\n            (m) => (showAll() || m.frequency === frequency()) && m.reply !== ''\n          )\n          .map((m) => (\n            <div\n              classList={{\n                message: true,\n                selected: m.id === selectedAircraft(),\n              }}\n            >\n              {showAll() ? <span class=\"frequency\">{m.frequency}</span> : null}\n              <span\n                classList={{\n                  callsign: true,\n                  atc: m.id === 'ATC',\n                }}\n              >\n                {m.id}\n              </span>\n              <span class=\"text\">{m.reply}</span>\n            </div>\n          ))}\n      </div>\n      <div class=\"input\">\n        <input\n          type=\"text\"\n          value={text()}\n          oninput={(e) => setText(e.currentTarget.value)}\n          onkeydown={(e) => e.key === 'Enter' && handleSendMessage(text())}\n          ref={chatboxInput}\n          placeholder=\"Type a message...\"\n        />\n        <input\n          type=\"button\"\n          value=\"Send\"\n          onclick={() => handleSendMessage(text())}\n        />\n      </div>\n    </div>\n  );\n}\n","export default {\n  line_grey: '#444444',\n  line_blue: '#3087f2',\n\n  line_red: '#ff2222',\n  line_yellow: '#aaaa00',\n  line_green: '#00aa00',\n\n  text_red: '#aa2222',\n  text_orange: '#dd9904',\n  text_yellow: '#ffe045',\n  text_green: '#44ff44',\n  text_grey: '#777',\n\n  text_background: '#000a',\n\n  special: {\n    terminal: '#555',\n    taxiway: '#555',\n    airspace: '#555',\n\n    connection: {\n      inactive: '#111',\n    },\n  },\n};\n","import { useAtom } from 'solid-jotai';\nimport {\n  frequencyAtom,\n  radarAtom,\n  renderAtom,\n  selectedAircraftAtom,\n} from './lib/atoms';\nimport {\n  Aircraft,\n  Airspace,\n  Connection,\n  Gate,\n  Runway,\n  Taxiway,\n  Terminal,\n  Vec2,\n  World,\n} from './lib/types';\nimport {\n  createEffect,\n  createMemo,\n  createSignal,\n  onCleanup,\n  onMount,\n} from 'solid-js';\nimport {\n  calculateSquaredDistance,\n  headingToDegrees,\n  knotToFeetPerSecond,\n  midpointBetweenPoints,\n  movePoint,\n  nauticalMilesToFeet,\n  runwayInfo,\n  shortLandingState,\n  shortTaxiingState,\n  toRadians,\n} from './lib/lib';\nimport colors from './lib/colors';\nimport { useAircraft, useWorld } from './lib/api';\n\nconst groundScale = 5.0;\n\nexport default function Canvas() {\n  let canvas!: HTMLCanvasElement;\n\n  type Ctx = CanvasRenderingContext2D;\n\n  let [radar, setRadar] = useAtom(radarAtom);\n\n  let [render, setRender] = useAtom(renderAtom);\n  let [selectedAircraft, setSelectedAircraft] = useAtom(selectedAircraftAtom);\n  let [frequency] = useAtom(frequencyAtom);\n  let fontSize = createMemo(() => 16);\n  let isGround = createMemo(() => radar().scale > groundScale);\n  let [aircraftTrails, setAircraftTrails] = createSignal<\n    Map<string, Array<{ pos: Vec2; now: number }>>\n  >(new Map());\n  let [mod, setMod] = createSignal(false);\n  let renderRate = createMemo(() => (isGround() ? 1000 * 0.5 : 1000 * 4));\n\n  const aircrafts = useAircraft(renderRate);\n  const world = useWorld();\n\n  function scaleFeetToPixels(num: number): number {\n    const FEET_TO_PIXELS = 0.003;\n    return num * FEET_TO_PIXELS * radar().scale;\n  }\n\n  function scalePixelsToFeet(num: number): number {\n    const FEET_TO_PIXELS = 0.003;\n    return num / FEET_TO_PIXELS / radar().scale;\n  }\n\n  function scalePoint(vec2: Vec2): Vec2 {\n    let x = vec2[0] + radar().shiftPoint.x;\n    let y = vec2[1] - radar().shiftPoint.y;\n\n    x = scaleFeetToPixels(x);\n    y = scaleFeetToPixels(y);\n\n    return [x, -y];\n  }\n\n  function scalePixelPoint(vec2: Vec2): Vec2 {\n    let x = scalePixelsToFeet(vec2[0]);\n    let y = scalePixelsToFeet(-vec2[1]);\n\n    x -= radar().shiftPoint.x;\n    y += radar().shiftPoint.y;\n\n    return [x, y];\n  }\n\n  createEffect(() => {\n    setRadar((radar) => {\n      radar.shiftPoint = {\n        x: 0.0,\n        y: 0.0,\n      };\n\n      return { ...radar };\n    });\n  });\n\n  function onKeydown(e: KeyboardEvent) {\n    if (e.key === 'PageUp') {\n      e.preventDefault();\n      setRadar((radar) => {\n        radar.scale = 1;\n        radar.shiftPoint = { x: 0, y: 0 };\n        return { ...radar };\n      });\n    } else if (e.key === 'PageDown') {\n      e.preventDefault();\n      setRadar((radar) => {\n        radar.scale = groundScale * 6;\n        radar.shiftPoint = { x: 0, y: 0 };\n        return { ...radar };\n      });\n    } else if (e.key === 'Control') {\n      setMod((mod) => !mod);\n    }\n  }\n\n  function onResize() {\n    canvas.width = canvas.clientWidth;\n    canvas.height = canvas.clientHeight;\n  }\n\n  onMount(() => {\n    const maxScale = 50.0;\n    const minScale = 0.07;\n\n    window.addEventListener('resize', onResize);\n    document.addEventListener('keydown', onKeydown);\n\n    if (canvas instanceof HTMLCanvasElement && canvas !== null) {\n      setInterval(() => doRender(canvas), 1000 / 30);\n\n      canvas.width = canvas.clientWidth;\n      canvas.height = canvas.clientHeight;\n\n      doRender(canvas);\n\n      canvas.addEventListener('mousedown', (e) => {\n        setRadar((radar) => {\n          radar.isDragging = true;\n          radar.dragStartPoint = {\n            x: e.clientX,\n            y: e.clientY,\n          };\n\n          radar.lastShiftPoint.x = scaleFeetToPixels(radar.shiftPoint.x);\n          radar.lastShiftPoint.y = scaleFeetToPixels(radar.shiftPoint.y);\n\n          return { ...radar };\n        });\n\n        // Convert the cursor position to your coordinate system\n        const coords: Vec2 = scalePixelPoint([\n          e.offsetX - canvas.width * 0.5,\n          e.offsetY - canvas.height * 0.5,\n        ]);\n\n        // Initialize variables to keep track of the closest aircraft\n        let closestAircraft = null;\n        let smallestDistance = Infinity;\n\n        // Define the maximum allowable distance squared\n        const maxDistanceSquared = Math.pow(scalePixelsToFeet(100), 2);\n\n        // Iterate through all aircraft to find the closest one within the criteria\n        for (const aircraft of aircrafts.data) {\n          // Calculate the squared distance between the cursor and the aircraft\n          const distanceSquared = calculateSquaredDistance(\n            coords,\n            aircraft.pos\n          );\n\n          // Check if the aircraft is within the maximum distance\n          if (distanceSquared <= maxDistanceSquared) {\n            // Check altitude based on whether it's on the ground or not\n            const altitudeCondition = isGround()\n              ? aircraft.altitude < 1000\n              : aircraft.altitude >= 1000;\n\n            if (altitudeCondition) {\n              // If this aircraft is closer than any previously found, update the closestAircraft\n              if (distanceSquared < smallestDistance) {\n                smallestDistance = distanceSquared;\n                closestAircraft = aircraft;\n              }\n            }\n          }\n        }\n\n        // After checking all aircraft, select the closest one if any were found\n        if (closestAircraft !== null) {\n          setSelectedAircraft(closestAircraft.id);\n        }\n      });\n      canvas.addEventListener('mouseup', (_) => {\n        setRadar((radar) => {\n          radar.isDragging = false;\n          return { ...radar };\n        });\n      });\n      canvas.addEventListener('mousemove', (e) => {\n        if (radar().isDragging) {\n          setRadar((radar) => {\n            let x = e.clientX - radar.dragStartPoint.x + radar.lastShiftPoint.x;\n            let y = e.clientY - radar.dragStartPoint.y + radar.lastShiftPoint.y;\n\n            radar.shiftPoint.x = scalePixelsToFeet(x);\n            radar.shiftPoint.y = scalePixelsToFeet(y);\n\n            return { ...radar };\n          });\n        }\n      });\n      canvas.addEventListener('wheel', (e) => {\n        setRadar((radar) => {\n          if (e.deltaY > 0) {\n            radar.scale *= 0.9;\n          } else {\n            radar.scale *= 1.1;\n          }\n\n          radar.scale = Math.max(Math.min(radar.scale, maxScale), minScale);\n\n          return { ...radar };\n        });\n      });\n    }\n  });\n\n  onCleanup(() => {\n    document.removeEventListener('keydown', onKeydown);\n    window.removeEventListener('resize', onResize);\n  });\n\n  function doRender(canvas: HTMLCanvasElement) {\n    doDraw(canvas);\n\n    let now = Date.now();\n    if (now - render().lastDraw > renderRate() || render().doInitialDraw) {\n      setRender((render) => {\n        setAircraftTrails((map) => {\n          for (let aircraft of aircrafts.data) {\n            const trail = map.get(aircraft.id);\n\n            if (typeof trail !== 'undefined') {\n              let last = trail.at(-1);\n\n              if (\n                typeof last !== 'undefined' &&\n                now - last.now > 1000 * 4 * 2\n              ) {\n                trail.push({ now, pos: aircraft.pos });\n              }\n\n              if (trail.length > 10) {\n                map.set(aircraft.id, trail.slice(1));\n              }\n            } else {\n              map.set(aircraft.id, [{ now, pos: aircraft.pos }]);\n            }\n          }\n\n          return map;\n        });\n\n        render.doInitialDraw = false;\n\n        return { ...render };\n      });\n    }\n  }\n\n  function resetTransform(ctx: CanvasRenderingContext2D) {\n    ctx.resetTransform();\n    // ctx.translate(radar().shiftPoint.x, radar().shiftPoint.y);\n    // Set 0.0 to be the center of the canvas\n    ctx.translate(canvas.width * 0.5, canvas.height * 0.5);\n\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = 'white';\n    ctx.fillStyle = 'white';\n    ctx.font = `900 ${fontSize()}px monospace`;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n  }\n\n  function doDraw(canvas: HTMLCanvasElement) {\n    const width = canvas.width;\n    const height = canvas.height;\n\n    let ctx = canvas.getContext('2d');\n    if (ctx) {\n      ctx.font = `900 16px monospace`;\n      ctx.fillStyle = 'black';\n\n      ctx.resetTransform();\n      ctx.fillRect(0, 0, width, height);\n      resetTransform(ctx);\n\n      if (world.data === undefined) {\n        return;\n      }\n      if (isGround()) {\n        drawGround(ctx, world.data, aircrafts.data);\n      } else {\n        drawTower(ctx, world.data, aircrafts.data);\n        drawCompass(ctx);\n      }\n\n      drawCollodingMessage(ctx, aircrafts.data);\n    }\n  }\n\n  function drawCompass(ctx: Ctx) {\n    let diameter = 250;\n    let radius = diameter * 0.5;\n\n    if (!mod()) {\n      return;\n    }\n\n    let aircraft = aircrafts.data.find((a) => a.id === selectedAircraft());\n    if (\n      aircraft &&\n      (aircraft.state.type === 'flying' || aircraft.state.type === 'landing')\n    ) {\n      let origin = scalePoint(aircraft.pos);\n\n      ctx.fillStyle = '#888';\n      ctx.textAlign = 'center';\n      ctx.textBaseline = 'middle';\n      let padding = -10;\n      const increment = 30;\n      const count = 360 / increment;\n      for (let i = 0; i < count; i++) {\n        let text = headingToDegrees(i * increment)\n          .toString()\n          .padStart(3, '0');\n        if (text === '000') {\n          text = '360';\n        }\n        ctx.fillText(\n          text,\n          Math.cos(toRadians(i * increment)) * (radius + padding) + origin[0],\n          Math.sin(toRadians(i * increment)) * (radius + padding) + origin[1]\n        );\n      }\n    }\n  }\n\n  function drawAirspace(ctx: Ctx, airspace: Airspace) {\n    resetTransform(ctx);\n    let pos = scalePoint(airspace.pos);\n    ctx.strokeStyle = colors.special.airspace;\n\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], scaleFeetToPixels(airspace.radius), 0, Math.PI * 2);\n    ctx.stroke();\n  }\n\n  function drawRunway(ctx: Ctx, runway: Runway) {\n    resetTransform(ctx);\n    let info = runwayInfo(runway);\n    let start = scalePoint(info.start);\n    let end = scalePoint(info.end);\n    let ils = {\n      end: scalePoint(info.ils.end),\n      maxAngle: scalePoint(info.ils.maxAngle),\n      minAngle: scalePoint(info.ils.minAngle),\n    };\n\n    // Draw the runway\n    ctx.strokeStyle = 'grey';\n    ctx.fillStyle = 'grey';\n    ctx.lineWidth = scaleFeetToPixels(1000);\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(end[0], end[1]);\n    ctx.stroke();\n\n    // Draw the localizer beacon\n    ctx.fillStyle = colors.line_blue;\n    ctx.strokeStyle = colors.line_blue;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(ils.end[0], ils.end[1]);\n    ctx.stroke();\n\n    // Draw the max and min localizer angle\n    ctx.strokeStyle = colors.line_grey;\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(ils.maxAngle[0], ils.maxAngle[1]);\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(ils.minAngle[0], ils.minAngle[1]);\n    ctx.stroke();\n\n    // Draw the localizer altitude points\n    ctx.strokeStyle = colors.line_blue;\n    for (let p of info.ils.altitudePoints) {\n      let point = scalePoint(p);\n      ctx.beginPath();\n      ctx.arc(point[0], point[1], scaleFeetToPixels(1500), 0, Math.PI * 2);\n      ctx.stroke();\n    }\n  }\n\n  function drawWaypoint(ctx: Ctx, name: string, position: Vec2, color: string) {\n    let pos = scalePoint(position);\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], scaleFeetToPixels(700), 0, Math.PI * 2);\n    ctx.fill();\n\n    // Draw the separation circle\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], scaleFeetToPixels(2000), 0, Math.PI * 2);\n    ctx.stroke();\n\n    let spacing = scaleFeetToPixels(2000 + nauticalMilesToFeet * 0.2);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'bottom';\n\n    // Draw the label background\n    let textWidth = ctx.measureText(name).width + 10;\n    ctx.fillStyle = colors.text_background;\n    ctx.fillRect(\n      pos[0] - textWidth * 0.5,\n      pos[1] - spacing - fontSize() * 1,\n      textWidth,\n      fontSize()\n    );\n\n    // Draw the label\n    ctx.fillStyle = color;\n    ctx.fillText(name, pos[0], pos[1] - spacing);\n  }\n\n  function drawConnection(ctx: Ctx, connection: Connection) {\n    let activeColor = colors.text_grey;\n    let inactiveColor = colors.special.connection.inactive;\n    let selectedColor = colors.text_yellow;\n\n    let color = connection.state === 'active' ? activeColor : inactiveColor;\n\n    let aircraft = aircrafts.data.find((a) => a.id === selectedAircraft());\n    if (aircraft) {\n      if (aircraft.flight_plan.arriving === connection.id) {\n        color = selectedColor;\n      }\n    }\n\n    // Draw the airport waypoint\n    drawWaypoint(ctx, connection.id, connection.pos, color);\n\n    // Draw the transition waypoint\n    drawWaypoint(ctx, connection.id, connection.transition, color);\n  }\n\n  function drawBlip(ctx: Ctx, aircraft: Aircraft) {\n    const isAboveAirspace = aircraft.altitude > 10000;\n    const isSelected = selectedAircraft() === aircraft.id;\n    const isEnroute =\n      aircraft.state.type === 'flying' && aircraft.state.value.enroute;\n    const isLanding =\n      aircraft.state.type === 'landing' &&\n      aircraft.state.value.state !== 'before-turn';\n\n    // Draw trail\n    let trail = aircraftTrails().get(aircraft.id);\n    if (trail) {\n      const dotSize = Math.max(2, scaleFeetToPixels(750));\n\n      if (selectedAircraft() == aircraft.id) {\n        ctx.fillStyle = colors.text_yellow;\n      } else if (aircraft.is_colliding) {\n        ctx.fillStyle = colors.text_red;\n      } else if (aircraft.flight_plan.departing === world.data?.airspace.id) {\n        ctx.fillStyle = colors.line_blue;\n      } else {\n        ctx.fillStyle = colors.line_green;\n      }\n\n      for (let point of trail) {\n        ctx.fillRect(\n          scalePoint(point.pos)[0] - dotSize * 0.5,\n          scalePoint(point.pos)[1] - dotSize * 0.5,\n          dotSize,\n          dotSize\n        );\n      }\n    }\n\n    // Draw waypoints\n    let pos = scalePoint(aircraft.pos);\n    if (aircraft.state.type === 'flying' && selectedAircraft() == aircraft.id) {\n      ctx.strokeStyle = '#ffff0033';\n      ctx.lineWidth = 3;\n\n      ctx.beginPath();\n      ctx.moveTo(pos[0], pos[1]);\n\n      for (let wp of aircraft.state.value.waypoints.slice().reverse()) {\n        let pos = scalePoint(wp.value.to);\n        ctx.lineTo(pos[0], pos[1]);\n      }\n      ctx.stroke();\n\n      for (let wp of aircraft.state.value.waypoints.slice().reverse()) {\n        ctx.fillStyle = wp.behavior === 'goto' ? '#ffff00' : '#ff0000';\n        let pos = scalePoint(wp.value.to);\n        ctx.beginPath();\n        ctx.arc(pos[0], pos[1], 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n\n    resetTransform(ctx);\n\n    if (isSelected) {\n      ctx.fillStyle = colors.line_yellow;\n      ctx.strokeStyle = colors.line_yellow;\n    } else if (aircraft.is_colliding) {\n      ctx.fillStyle = colors.line_red;\n      ctx.strokeStyle = colors.line_red;\n    } else {\n      ctx.fillStyle = colors.line_green;\n      ctx.strokeStyle = colors.line_green;\n    }\n\n    // Draw the dot\n    const dotSize = Math.max(6, scaleFeetToPixels(3000));\n    ctx.fillRect(\n      pos[0] - dotSize * 0.5,\n      pos[1] - dotSize * 0.5,\n      dotSize,\n      dotSize\n    );\n\n    // Draw the collision circle\n    if (aircraft.state.type === 'flying' && aircraft.is_colliding) {\n      ctx.beginPath();\n      ctx.arc(\n        pos[0],\n        pos[1],\n        scaleFeetToPixels(nauticalMilesToFeet * 4),\n        0,\n        Math.PI * 2\n      );\n      ctx.stroke();\n    }\n\n    // Draw the turning radius\n    if (\n      isSelected &&\n      (aircraft.state.type === 'flying' || aircraft.state.type === 'landing')\n    ) {\n      const dps = 2;\n      const timeToCircle = 360 / dps;\n      const circumfrence = aircraft.speed * knotToFeetPerSecond * timeToCircle;\n      const radius = circumfrence / (2 * Math.PI);\n\n      let point = scalePoint(movePoint(aircraft.pos, radius, aircraft.heading));\n      ctx.beginPath();\n      ctx.arc(point[0], point[1], 3, 0, Math.PI * 2);\n      ctx.fill();\n    }\n\n    // Draw the direction\n    const length = aircraft.speed * knotToFeetPerSecond * 60;\n    const end = movePoint(aircraft.pos, length, aircraft.heading);\n    let endPos = scalePoint(end);\n\n    ctx.beginPath();\n    ctx.moveTo(pos[0], pos[1]);\n    ctx.lineTo(endPos[0], endPos[1]);\n    ctx.stroke();\n\n    // Draw info\n    let spacing = scaleFeetToPixels(nauticalMilesToFeet * 1.0);\n    ctx.textAlign = 'left';\n    ctx.fillStyle = colors.text_green;\n\n    if (aircraft.frequency !== frequency()) {\n      ctx.fillStyle = colors.text_grey;\n    } else if (selectedAircraft() == aircraft.id) {\n      ctx.fillStyle = colors.text_yellow;\n    } else if (aircraft.is_colliding) {\n      ctx.fillStyle = colors.text_red;\n    } else if (aircraft.flight_plan.departing === world.data?.airspace.id) {\n      ctx.fillStyle = colors.line_blue;\n    }\n\n    // Draw callsign\n    ctx.fillText(aircraft.id, pos[0] + spacing, pos[1] - spacing);\n\n    if ((isAboveAirspace || isEnroute || isLanding) && !isSelected) {\n      return;\n    }\n\n    // Draw altitude\n    let altitudeIcon = ' ';\n    if (aircraft.altitude < aircraft.target.altitude) {\n      altitudeIcon = '⬈';\n    } else if (aircraft.altitude > aircraft.target.altitude) {\n      altitudeIcon = '⬊';\n    }\n\n    // TODO: hide target altitude if landing\n    ctx.fillText(\n      Math.round(aircraft.altitude / 100)\n        .toString()\n        .padStart(3, '0') +\n        (isAboveAirspace\n          ? ''\n          : altitudeIcon +\n            Math.round(aircraft.target.altitude / 100)\n              .toString()\n              .padStart(3, '0')),\n      pos[0] + spacing,\n      pos[1] - spacing + fontSize()\n    );\n\n    if (selectedAircraft() !== aircraft.id) {\n      return;\n    }\n\n    // Draw heading\n    let headingInfo =\n      aircraft.state.type === 'landing'\n        ? shortLandingState(aircraft.state.value.state)\n        : Math.round(aircraft.heading)\n            .toString()\n            .padStart(3, '0')\n            .replace('360', '000');\n    ctx.fillText(\n      headingInfo,\n      pos[0] + spacing,\n      pos[1] - spacing + fontSize() * 2\n    );\n\n    // Draw speed\n    ctx.fillText(\n      Math.round(aircraft.speed).toString(),\n      pos[0] + spacing,\n      pos[1] - spacing + fontSize() * 3\n    );\n  }\n\n  function drawTerminal(ctx: Ctx, terminal: Terminal) {\n    let a = scalePoint(terminal.a);\n    let b = scalePoint(terminal.b);\n    let c = scalePoint(terminal.c);\n    let d = scalePoint(terminal.d);\n\n    ctx.fillStyle = colors.special.terminal;\n    ctx.lineWidth = scaleFeetToPixels(200);\n    ctx.beginPath();\n    ctx.moveTo(a[0], a[1]);\n    ctx.lineTo(b[0], b[1]);\n    ctx.lineTo(c[0], c[1]);\n    ctx.lineTo(d[0], d[1]);\n    ctx.lineTo(a[0], a[1]);\n    ctx.fill();\n\n    // TODO: we should show aprons nicer than a debug line\n    let apron_a = scalePoint(terminal.apron[0]);\n    let apron_b = scalePoint(terminal.apron[1]);\n\n    ctx.strokeStyle = colors.line_green;\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(apron_a[0], apron_a[1]);\n    ctx.lineTo(apron_b[0], apron_b[1]);\n    ctx.stroke();\n\n    for (let i = 0; i < terminal.gates.length; i++) {\n      let gate = terminal.gates[i];\n\n      if (typeof gate !== 'undefined') {\n        drawGate(ctx, gate);\n      }\n    }\n  }\n\n  function drawGate(ctx: Ctx, gate: Gate) {\n    let id = gate.id;\n    let pos = scalePoint(gate.pos);\n\n    ctx.fillStyle = 'red';\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], 5, 0, Math.PI * 2);\n    ctx.fill();\n\n    let fontSize = 16;\n    let textWidth = ctx.measureText(id).width + 10;\n    ctx.fillStyle = colors.text_background;\n    ctx.fillRect(\n      pos[0] - textWidth * 0.5,\n      pos[1] - fontSize * 0.5 - fontSize,\n      textWidth,\n      fontSize\n    );\n\n    ctx.fillStyle = colors.text_orange;\n    ctx.fillText(id, pos[0], pos[1] - fontSize);\n  }\n\n  function drawTaxiway(ctx: Ctx, taxiway: Taxiway) {\n    resetTransform(ctx);\n    let start = scalePoint(taxiway.a);\n    let end = scalePoint(taxiway.b);\n\n    ctx.strokeStyle = colors.special.taxiway;\n    ctx.lineWidth = scaleFeetToPixels(200);\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(end[0], end[1]);\n    ctx.stroke();\n  }\n\n  function drawTaxiwayLabel(ctx: Ctx, taxiway: Taxiway) {\n    let start = scalePoint(taxiway.a);\n    let end = scalePoint(taxiway.b);\n    let middle = midpointBetweenPoints(start, end);\n    let textWidth = ctx.measureText(taxiway.id).width + 10;\n    ctx.fillStyle = colors.text_background;\n    ctx.fillRect(\n      middle[0] - textWidth * 0.5,\n      middle[1] - fontSize() * 0.5,\n      textWidth,\n      fontSize()\n    );\n    ctx.textAlign = 'center';\n    ctx.fillStyle = colors.text_orange;\n    ctx.fillText(taxiway.id, middle[0], middle[1]);\n  }\n\n  function drawRunwayGround(ctx: Ctx, runway: Runway) {\n    resetTransform(ctx);\n    let info = runwayInfo(runway);\n    let start = scalePoint(info.start);\n    let end = scalePoint(info.end);\n    let ils = {\n      end: scalePoint(info.ils.end),\n      maxAngle: scalePoint(info.ils.maxAngle),\n      minAngle: scalePoint(info.ils.minAngle),\n    };\n\n    ctx.strokeStyle = '#222';\n    ctx.lineWidth = scaleFeetToPixels(250);\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(end[0], end[1]);\n    ctx.stroke();\n\n    // Draw runway label\n    let textWidth = ctx.measureText(runway.id).width + 10;\n    ctx.fillStyle = colors.text_background;\n    ctx.fillRect(\n      start[0] - textWidth * 0.5,\n      start[1] - fontSize() * 0.5,\n      textWidth,\n      fontSize()\n    );\n    ctx.textAlign = 'center';\n    ctx.fillStyle = colors.text_orange;\n    ctx.fillText(runway.id, start[0], start[1]);\n\n    // Draw the localizer beacon\n    ctx.fillStyle = colors.line_blue;\n    ctx.strokeStyle = colors.line_blue;\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(start[0], start[1]);\n    ctx.lineTo(ils.end[0], ils.end[1]);\n    ctx.stroke();\n  }\n\n  function drawBlipGround(ctx: Ctx, aircraft: Aircraft) {\n    const isSelected = selectedAircraft() === aircraft.id;\n\n    resetTransform(ctx);\n    let pos = scalePoint(aircraft.pos);\n    // let taxi_yellow = '#ffff00';\n    let taxi_color =\n      selectedAircraft() == aircraft.id ? colors.text_yellow : '#ffffff';\n    let callsign_color =\n      aircraft.frequency !== frequency() ? colors.text_grey : taxi_color;\n\n    // Draw taxi waypoints\n    if (\n      aircraft.state.type === 'taxiing' &&\n      selectedAircraft() == aircraft.id\n    ) {\n      ctx.strokeStyle = '#ffff0088';\n      ctx.lineWidth = scaleFeetToPixels(50);\n\n      // Draw waypoint lines\n      ctx.beginPath();\n      ctx.moveTo(pos[0], pos[1]);\n      for (let wp of aircraft.state.value.waypoints.slice().reverse()) {\n        let pos = scalePoint(wp.value);\n        ctx.lineTo(pos[0], pos[1]);\n      }\n      ctx.stroke();\n\n      // Draw waypoint dots\n      for (let wp of aircraft.state.value.waypoints.slice().reverse()) {\n        if (wp.behavior === 'goto') {\n          ctx.fillStyle = colors.line_green;\n        } else if (wp.behavior === 'park') {\n          ctx.fillStyle = colors.line_green;\n        } else if (wp.behavior === 'holdshort') {\n          ctx.fillStyle = colors.line_red;\n        } else {\n          ctx.fillStyle = colors.line_yellow;\n        }\n        let pos = scalePoint(wp.value);\n        ctx.beginPath();\n        ctx.arc(pos[0], pos[1], scaleFeetToPixels(40), 0, Math.PI * 2);\n        ctx.fill();\n      }\n\n      // Draw the hold short waypoints above the normal waypoints\n      for (let wp of aircraft.state.value.waypoints\n        .slice()\n        .reverse()\n        .filter((wp) => wp.behavior === 'holdshort')) {\n        if (wp.behavior === 'goto') {\n          ctx.fillStyle = colors.line_yellow;\n        } else if (wp.behavior === 'park') {\n          ctx.fillStyle = colors.line_yellow;\n        } else if (wp.behavior === 'holdshort') {\n          ctx.fillStyle = colors.line_red;\n        }\n        let pos = scalePoint(wp.value);\n        ctx.beginPath();\n        ctx.arc(pos[0], pos[1], 3, 0, Math.PI * 2);\n        ctx.fill();\n      }\n    }\n\n    resetTransform(ctx);\n\n    ctx.fillStyle = taxi_color;\n    ctx.strokeStyle = taxi_color;\n\n    // Draw the dot\n    ctx.beginPath();\n    ctx.arc(pos[0], pos[1], scaleFeetToPixels(50), 0, Math.PI * 2);\n    ctx.fill();\n\n    // Draw the direction\n    ctx.strokeStyle = taxi_color;\n    ctx.lineWidth = 2;\n    const length = 400;\n    const end = movePoint(aircraft.pos, length, aircraft.heading);\n    let endPos = scalePoint(end);\n\n    ctx.beginPath();\n    ctx.moveTo(pos[0], pos[1]);\n    ctx.lineTo(endPos[0], endPos[1]);\n    ctx.stroke();\n\n    if (aircraft.state.type === 'parked' && !aircraft.state.value.active) {\n      return;\n    }\n\n    // Draw info\n    let spacing = scaleFeetToPixels(100);\n    ctx.textAlign = 'left';\n    ctx.fillStyle = taxi_color;\n\n    // Draw callsign\n    let textWidth = ctx.measureText(aircraft.id).width + 10;\n    ctx.fillStyle = colors.text_background;\n    ctx.fillRect(\n      pos[0] + spacing * 0.5,\n      pos[1] - spacing - fontSize() * 0.5,\n      textWidth,\n      fontSize()\n    );\n    ctx.fillStyle = callsign_color;\n    ctx.fillText(aircraft.id, pos[0] + spacing, pos[1] - spacing);\n    ctx.fillStyle = taxi_color;\n\n    // Draw altitude\n    let drawAlt = aircraft.altitude > 0;\n    if (drawAlt) {\n      let altitudeIcon = ' ';\n      if (aircraft.altitude < aircraft.target.altitude) {\n        altitudeIcon = '⬈';\n      } else if (aircraft.altitude > aircraft.target.altitude) {\n        altitudeIcon = '⬊';\n      }\n      ctx.fillText(\n        Math.round(aircraft.altitude / 100)\n          .toString()\n          .padStart(3, '0') +\n          altitudeIcon +\n          Math.round(aircraft.target.altitude / 100)\n            .toString()\n            .padStart(3, '0'),\n        pos[0] + spacing,\n        pos[1] - spacing + fontSize()\n      );\n    } else if (aircraft.state.type === 'taxiing' && isSelected && mod()) {\n      let text = shortTaxiingState(aircraft.state.value.state);\n      let textWidth = ctx.measureText(text).width + 10;\n      ctx.fillStyle = colors.text_background;\n      ctx.fillRect(\n        pos[0] + spacing * 0.5,\n        pos[1] - spacing - fontSize() * 0.5 + fontSize(),\n        textWidth,\n        fontSize()\n      );\n      ctx.fillStyle = taxi_color;\n      ctx.fillText(text, pos[0] + spacing, pos[1] - spacing + fontSize());\n    }\n\n    // // Draw speed\n    // ctx.fillText(\n    //   Math.round(aircraft.speed).toString(),\n    //   pos[0] + spacing,\n    //   pos[1] - spacing + fontSize() * (drawAlt ? 2 : 1)\n    // );\n  }\n\n  function drawFlightPlanWaypoints(ctx: Ctx, aircraft: Aircraft) {\n    resetTransform(ctx);\n    let pos = scalePoint(aircraft.pos);\n\n    if (\n      aircraft.state.type === 'taxiing' &&\n      selectedAircraft() == aircraft.id\n    ) {\n      ctx.strokeStyle = '#ff990033';\n      ctx.lineWidth = 3;\n\n      ctx.beginPath();\n      ctx.moveTo(pos[0], pos[1]);\n    }\n  }\n\n  function drawCollodingMessage(ctx: Ctx, aircrafts: Array<Aircraft>) {\n    let names: Array<String> = aircrafts\n      .filter((a) => a.is_colliding)\n      .map((a) => a.id);\n    if (names.length > 0) {\n      ctx.font = `900 ${24}px monospace`;\n      let message = `SEPARATION WARNING: ${names.join(', ')}`;\n      ctx.fillStyle = 'red';\n      ctx.textAlign = 'center';\n      ctx.fillText(message, 0, -canvas.height * 0.5 + 100);\n    }\n  }\n\n  function drawTower(ctx: Ctx, world: World, aircrafts: Array<Aircraft>) {\n    let airspace = world.airspace;\n    drawAirspace(ctx, airspace);\n\n    for (let airport of airspace.airports) {\n      for (let runway of airport.runways) {\n        drawRunway(ctx, runway);\n      }\n    }\n\n    for (let connection of world.connections) {\n      drawConnection(ctx, connection);\n    }\n\n    for (let aircraft of aircrafts.filter(\n      (a) => a.altitude >= 1000 && a.id !== selectedAircraft()\n    )) {\n      drawBlip(ctx, aircraft);\n    }\n\n    for (let aircraft of aircrafts.filter(\n      (a) => a.altitude >= 1000 && a.id === selectedAircraft()\n    )) {\n      drawBlip(ctx, aircraft);\n    }\n\n    for (let aircraft of aircrafts.filter((a) => a.id == selectedAircraft())) {\n      drawFlightPlanWaypoints(ctx, aircraft);\n    }\n  }\n\n  function drawGround(ctx: Ctx, world: World, aircrafts: Array<Aircraft>) {\n    let airspace = world.airspace;\n    drawAirspace(ctx, airspace);\n\n    for (let airport of airspace.airports) {\n      for (let taxiway of airport.taxiways) {\n        drawTaxiway(ctx, taxiway);\n      }\n      for (let runway of airport.runways) {\n        drawRunwayGround(ctx, runway);\n      }\n      for (let terminal of airport.terminals) {\n        drawTerminal(ctx, terminal);\n      }\n      for (let taxiway of airport.taxiways) {\n        drawTaxiwayLabel(ctx, taxiway);\n      }\n    }\n\n    for (let aircraft of aircrafts.filter(\n      (a) => a.altitude < 1000 && a.id !== selectedAircraft()\n    )) {\n      drawBlipGround(ctx, aircraft);\n    }\n\n    for (let aircraft of aircrafts.filter(\n      (a) => a.altitude < 1000 && a.id === selectedAircraft()\n    )) {\n      drawBlipGround(ctx, aircraft);\n    }\n  }\n\n  return <canvas id=\"canvas\" ref={canvas}></canvas>;\n}\n","export type TaxiWaypointBehavior = {\n  type: 'goto' | 'holdshort' | 'takeoff' | 'park';\n};\n\nexport type NodeVec2 = {\n  name: string;\n  kind: 'taxiway' | 'gate' | 'apron' | 'runway';\n  behavior: 'goto' | 'holdshort' | 'park';\n  value: Vec2;\n};\n\nexport type NodeVOR = {\n  name: string;\n  kind: 'vor';\n  behavior: 'goto' | 'holdshort';\n  value: { to: Vec2; then: Array<unknown> };\n};\n\nexport type AircraftStateFlying = {\n  type: 'flying';\n  value: { waypoints: Array<NodeVOR>; enroute: boolean };\n};\n\nexport type LandingState =\n  | 'before-turn'\n  | 'turning'\n  | 'correcting'\n  | 'localizer'\n  | 'glideslope'\n  | 'touchdown'\n  | 'go-around';\n\nexport type TaxiingState = 'armed' | 'stopped' | 'override' | 'holding';\n\nexport type AircraftStateLanding = {\n  type: 'landing';\n  value: {\n    runway: Runway;\n    state: LandingState;\n  };\n};\n\nexport type AircraftStateTaxiing = {\n  type: 'taxiing';\n  value: {\n    current: NodeVec2;\n    waypoints: Array<NodeVec2>;\n    state: TaxiingState;\n  };\n};\n\nexport type AircraftStateParked = {\n  type: 'parked';\n  value: {\n    at: NodeVec2;\n    active: boolean;\n  };\n};\n\nexport type AircraftState =\n  | AircraftStateFlying\n  | AircraftStateLanding\n  | AircraftStateTaxiing\n  | AircraftStateParked;\n\ntype Duration = {\n  secs: number;\n  nanos: number;\n};\n\nexport function newDuration(secs: number, nanos: number): Duration {\n  return { secs, nanos };\n}\n\nexport type Aircraft = {\n  id: string;\n  is_colliding: boolean;\n\n  pos: Vec2;\n  /** In Knots */\n  speed: number;\n  /** In Degrees (0 is north; up) */\n  heading: number;\n  /** In Feet */\n  altitude: number;\n\n  state: AircraftState;\n  target: {\n    /** In Knots */\n    speed: number;\n    /** In Degrees (0 is north; up) */\n    heading: number;\n    /** In Feet */\n    altitude: number;\n  };\n  flight_plan: {\n    departing: string;\n    arriving: string;\n\n    speed: number;\n    altitude: number;\n  };\n\n  frequency: number;\n};\n\nexport function isAircraftFlying(\n  state: AircraftState\n): state is AircraftStateFlying {\n  return state.type === 'flying';\n}\n\nexport function isAircraftLanding(\n  state: AircraftState\n): state is AircraftStateLanding {\n  return state.type === 'landing';\n}\n\nexport function isAircraftTaxiing(\n  state: AircraftState\n): state is AircraftStateTaxiing {\n  return state.type === 'taxiing';\n}\n\nexport function isAircraftParked(\n  state: AircraftState\n): state is AircraftStateParked {\n  return state.type === 'parked';\n}\n\nexport type Vec2 = [number, number];\n\nexport type Runway = {\n  id: string;\n  pos: Vec2;\n  /** In Degrees (0 is north; up) */\n  heading: number;\n  /** In Feet */\n  length: number;\n};\n\nexport type Taxiway = {\n  id: string;\n  a: Vec2;\n  b: Vec2;\n};\n\nexport type Gate = {\n  id: string;\n  pos: Vec2;\n  heading: number;\n};\n\nexport type Terminal = {\n  id: string;\n  a: Vec2;\n  b: Vec2;\n  c: Vec2;\n  d: Vec2;\n\n  apron: [Vec2, Vec2];\n\n  gates: Array<Gate>;\n};\n\nexport type Airport = {\n  id: string;\n  center: Vec2;\n  runways: Array<Runway>;\n  taxiways: Array<Taxiway>;\n  terminals: Array<Terminal>;\n};\n\nexport type Frequencies = {\n  approach: number;\n  departure: number;\n  tower: number;\n  ground: number;\n  center: number;\n};\n\nexport type Airspace = {\n  id: string;\n  pos: Vec2;\n  radius: number;\n  airports: Array<Airport>;\n  frequencies: Frequencies;\n};\n\nexport function DefaultAirspace(): Airspace {\n  return {\n    id: 'KSFO',\n    pos: [0, 0],\n    radius: 500,\n    airports: [],\n    frequencies: {\n      approach: 118.5,\n      departure: 118.5,\n      tower: 118.5,\n      ground: 118.5,\n      center: 118.5,\n    },\n  };\n}\n\nexport type Connection = {\n  id: string;\n  state: 'inactive' | 'active';\n  pos: Vec2;\n  transition: Vec2;\n};\n\nexport type World = {\n  airspace: Airspace;\n  connections: Array<Connection>;\n};\n\nexport function DefaultWorld(): World {\n  return {\n    airspace: DefaultAirspace(),\n    connections: [],\n  };\n}\n\nexport type RadioMessage = {\n  id: string;\n  frequency: number;\n  reply: string;\n  created: Duration;\n};\n\nexport type Game = {\n  points: Points;\n};\n\nexport type Points = {\n  landings: number;\n  landing_rate: {\n    rate: Duration;\n    marks: Duration[];\n  };\n  takeoffs: number;\n  takeoff_rate: {\n    rate: Duration;\n    marks: Duration[];\n  };\n};\n\nexport type Flight = {\n  id: number;\n  kind: 'inbound' | 'outbound';\n  spawn_at: Duration;\n  status:\n    | { type: 'scheduled' }\n    | { type: 'ongoing'; value: string }\n    | { type: 'completed'; value: [string, Duration] };\n};\n","import { createEffect, createMemo, createSignal, Show } from 'solid-js';\nimport { Aircraft, isAircraftFlying, isAircraftTaxiing } from './lib/types';\nimport { useAtom } from 'solid-jotai';\nimport { controlAtom, frequencyAtom, selectedAircraftAtom } from './lib/atoms';\nimport {\n  angleBetweenPoints,\n  calculateDistance,\n  ENROUTE_TIME_MULTIPLIER,\n  formatTime,\n  nauticalMilesToFeet,\n  runwayInfo,\n} from './lib/lib';\nimport { createQuery } from '@tanstack/solid-query';\nimport { getAircraft, useWorld } from './lib/api';\n\ntype Strips = {\n  Selected: Array<Aircraft>;\n  Colliding: Array<Aircraft>;\n  Inbound: Array<Aircraft>;\n  Approach: Array<Aircraft>;\n  Landing: Array<Aircraft>;\n  Departure: Array<Aircraft>;\n  Outbound: Array<Aircraft>;\n  Parked: Array<Aircraft>;\n  Ground: Array<Aircraft>;\n  Takeoff: Array<Aircraft>;\n  None: Array<Aircraft>;\n};\n\nconst newStrips = (): Strips => ({\n  Selected: [],\n  Colliding: [],\n  Inbound: [],\n  Approach: [],\n  Landing: [],\n  Departure: [],\n  Outbound: [],\n  Parked: [],\n  Ground: [],\n  Takeoff: [],\n  None: [],\n});\n\ntype Collapse = {\n  [key: string]: boolean;\n};\n\nconst newCollapse = (): Collapse => {\n  const strips = newStrips();\n  let collapse: Collapse = {};\n  Object.keys(strips).forEach((key) => {\n    collapse[key] = false;\n  });\n\n  return collapse;\n};\n\ntype StripProps = {\n  strip: Aircraft;\n};\n\nfunction assignAircraftToStrips(\n  aircraft: Aircraft,\n  ourAirspace: string,\n  selectedAircraft: string\n): keyof Strips {\n  const isLanding = aircraft.state.type === 'landing';\n  const isTaxiing = aircraft.state.type === 'taxiing';\n  const isParked = aircraft.state.type === 'parked';\n\n  const isTaxiingToRunway = (() => {\n    if (isAircraftTaxiing(aircraft.state)) {\n      const firstWaypoint = aircraft.state.value.waypoints[0];\n\n      return (\n        (typeof firstWaypoint !== 'undefined' &&\n          firstWaypoint.kind === 'runway' &&\n          aircraft.state.value.waypoints.length == 1) ||\n        aircraft.state.value.current.kind === 'runway'\n      );\n    } else {\n      return false;\n    }\n  })();\n\n  const isInLocalAirspace =\n    aircraft.state.type === 'flying' ? !aircraft.state.value.enroute : true;\n  const isDepartingAndInLocalAirspace =\n    isInLocalAirspace && ourAirspace === aircraft.flight_plan.departing;\n  const isDepartingFromLocalAirspace =\n    ourAirspace === aircraft.flight_plan.departing;\n\n  const isArrivingToLocalAirspace =\n    ourAirspace === aircraft.flight_plan.arriving;\n  const isSelected = aircraft.id === selectedAircraft;\n\n  if (aircraft.is_colliding) {\n    return 'Colliding';\n  }\n\n  if (isInLocalAirspace && isLanding) {\n    return 'Landing';\n  } else if (isTaxiing || isParked) {\n    if (isTaxiingToRunway && isDepartingAndInLocalAirspace) {\n      return 'Takeoff';\n    } else if (isInLocalAirspace) {\n      if (aircraft.state.type === 'parked') {\n        if (aircraft.state.value.active || isSelected) {\n          return 'Parked';\n        } else {\n          return 'None';\n        }\n      } else {\n        return 'Ground';\n      }\n    } else {\n      return 'None';\n    }\n  } else if (isDepartingFromLocalAirspace) {\n    if (isInLocalAirspace) {\n      return 'Departure';\n    } else {\n      return 'Outbound';\n    }\n  } else if (isArrivingToLocalAirspace) {\n    if (isInLocalAirspace) {\n      return 'Approach';\n    } else {\n      return 'Inbound';\n    }\n  } else {\n    if (isSelected) {\n      return 'Selected';\n    } else {\n      return 'None';\n    }\n  }\n}\n\nfunction Strip({ strip }: StripProps) {\n  let [ourFrequency] = useAtom(frequencyAtom);\n  let [selectedAircraft, setSelectedAircraft] = useAtom(selectedAircraftAtom);\n\n  let [control] = useAtom(controlAtom);\n  let [airspace] = useAtom(control().airspace);\n\n  const query = useWorld();\n\n  if (!query.data) {\n    return null;\n  }\n\n  let sinceCreated = `--:--`;\n\n  if (isAircraftFlying(strip.state)) {\n    if (strip.state.value.enroute && strip.state.value.waypoints.length > 0) {\n      let current = strip.pos;\n      let distance = 0;\n      let waypoints = strip.state.value.waypoints.slice();\n      waypoints.reverse();\n      waypoints.forEach((waypoint) => {\n        distance += calculateDistance(current, waypoint.value.to);\n        current = waypoint.value.to;\n      });\n\n      let distanceInNm = distance / nauticalMilesToFeet;\n      let time =\n        (distanceInNm / (strip.speed * ENROUTE_TIME_MULTIPLIER)) *\n        1000 *\n        60 *\n        60;\n      sinceCreated = formatTime(time);\n    } else if (\n      !strip.state.value.enroute &&\n      strip.state.value.waypoints.length > 0\n    ) {\n      let current = strip.pos;\n      let distance = 0;\n      let waypoint = strip.state.value.waypoints.at(-1);\n\n      if (typeof waypoint !== 'undefined') {\n        distance += calculateDistance(current, waypoint.value.to);\n      }\n\n      let distanceInNm = distance / nauticalMilesToFeet;\n      let time = (distanceInNm / strip.speed) * 1000 * 60 * 60;\n      sinceCreated = formatTime(time);\n    } else {\n      sinceCreated = `--:--`;\n    }\n  } else if (isAircraftTaxiing(strip.state) && strip.speed > 0) {\n    if (strip.state.value.waypoints.length > 0) {\n      let current = strip.pos;\n      let distance = 0;\n      let waypoints = strip.state.value.waypoints.slice();\n      waypoints.reverse();\n      waypoints.forEach((waypoint) => {\n        distance += calculateDistance(current, waypoint.value);\n        current = waypoint.value;\n      });\n\n      let distanceInNm = distance / nauticalMilesToFeet;\n      let time = (distanceInNm / strip.speed) * 1000 * 60 * 60;\n      sinceCreated = formatTime(time);\n    }\n  } else if (strip.state.type === 'landing') {\n    let distance = calculateDistance(\n      strip.pos,\n      runwayInfo(strip.state.value.runway).start\n    );\n\n    let distanceInNm = distance / nauticalMilesToFeet;\n    let time = (distanceInNm / strip.speed) * 1000 * 60 * 60;\n\n    sinceCreated = formatTime(time);\n  }\n\n  let topStatus = '';\n  let bottomStatus = '';\n  let dimmer = createMemo(\n    () =>\n      strip.frequency !== ourFrequency() ||\n      (sinceCreated.startsWith('-') && sinceCreated !== '--:--') ||\n      (strip.state.type === 'parked' && !strip.state.value.active)\n  );\n\n  if (strip.state.type === 'landing') {\n    topStatus = 'ILS';\n    bottomStatus = strip.state.value.runway.id;\n  } else if (strip.state.type === 'taxiing') {\n    let current = strip.state.value.current;\n    if (current.kind === 'gate') {\n      topStatus = 'GATE';\n    } else if (current.kind === 'runway') {\n      topStatus = 'RNWY';\n    } else if (current.kind === 'taxiway') {\n      topStatus = 'TXWY';\n    } else if (current.kind === 'apron') {\n      topStatus = 'APRN';\n    }\n\n    bottomStatus = current.name;\n  } else if (strip.state.type === 'parked') {\n    topStatus = 'PARK';\n    bottomStatus = strip.state.value.at.name;\n  }\n\n  let distance = calculateDistance(strip.pos, query.data.airspace.pos);\n  let distanceText = '';\n\n  if (strip.state.type === 'flying' || strip.state.type === 'landing') {\n    distanceText = (distance / nauticalMilesToFeet).toFixed(1).slice(0, 4);\n    if (distanceText.endsWith('.')) {\n      distanceText = distanceText.replace('.', ' ');\n    }\n    distanceText = `${distanceText} NM`;\n  }\n\n  if (\n    ((strip.state.type === 'parked' && strip.state.value.active) ||\n      strip.state.type === 'taxiing') &&\n    strip.flight_plan.arriving !== airspace()\n  ) {\n    const connection = query.data.connections.find(\n      (c) => c.id === strip.flight_plan.arriving\n    );\n    if (connection !== undefined) {\n      const rawAngle = angleBetweenPoints([0, 0], connection.pos);\n      const angle = (360 - Math.round(rawAngle) + 90) % 360;\n\n      let closestAngle = Infinity;\n      let heading = angle;\n      for (const runway of query.data.airspace.airports.flatMap(\n        (a) => a.runways\n      )) {\n        let diff = Math.abs(runway.heading - angle);\n        if (diff < closestAngle) {\n          closestAngle = diff;\n          heading = runway.heading;\n        }\n      }\n\n      distanceText = `FOR ${heading.toString().slice(0, 2)}`;\n    }\n  }\n\n  function handleMouseDown() {\n    setSelectedAircraft(strip.id);\n  }\n\n  return (\n    <div\n      classList={{\n        strip: true,\n        theirs: dimmer(),\n        colliding: strip.is_colliding,\n        selected: selectedAircraft() === strip.id,\n        departure: airspace() === strip.flight_plan.departing,\n      }}\n      onmousedown={handleMouseDown}\n    >\n      <div class=\"vertical\">\n        <span class=\"callsign\">{strip.id}</span>\n        <span>{distanceText}</span>\n      </div>\n      <div class=\"vertical\">\n        <Show\n          when={\n            !(\n              strip.state.type === 'parked' &&\n              strip.state.value.active === false\n            )\n          }\n        >\n          <span>{strip.flight_plan.departing}</span>\n          <span>{strip.flight_plan.arriving}</span>\n        </Show>\n      </div>\n      <div class=\"vertical\">\n        <span>{topStatus}</span>\n        <span>{bottomStatus}</span>\n      </div>\n      <div class=\"vertical\">\n        <span class=\"frequency\">{strip.frequency}</span>\n        <span class=\"timer\">{sinceCreated}</span>\n      </div>\n    </div>\n  );\n}\n\nexport default function StripBoard() {\n  let [strips, setStrips] = createSignal<Strips>(newStrips(), {\n    equals: false,\n  });\n\n  let stripEntries = createMemo(() => Object.entries(strips()));\n  let [selectedAircraft] = useAtom(selectedAircraftAtom);\n\n  let [control] = useAtom(controlAtom);\n  let [airspace] = useAtom(control().airspace);\n  let [collapse, setCollapse] = createSignal<Collapse>(newCollapse());\n\n  const aircrafts = createQuery<Aircraft[]>(() => ({\n    queryKey: [getAircraft],\n    initialData: [],\n  }));\n\n  const query = useWorld();\n\n  createEffect(() => {\n    const found = query.data?.airspace;\n    if (!found) {\n      return;\n    }\n\n    // This is to prevent initial loading state from removing saved strips.\n    //\n    // When we first load, aircrafts() will be blank, since they havent been\n    // loaded from the server yet. So, when we run the purge function to clean\n    // up nonexistent callsigns from the strips, all are cleaned up.\n    if (aircrafts.data.length > 0) {\n      let strips: Strips = newStrips();\n\n      for (let aircraft of aircrafts.data) {\n        let category = assignAircraftToStrips(\n          aircraft,\n          airspace(),\n          selectedAircraft()\n        );\n        strips[category].push(aircraft);\n      }\n\n      const nameSorter = (a: Aircraft, b: Aircraft) =>\n        ('' + a.id).localeCompare(b.id);\n      const distanteToAirportSorter =\n        (rev: boolean) => (a: Aircraft, b: Aircraft) => {\n          let distance_a = calculateDistance(a.pos, found.pos);\n          let distance_b = calculateDistance(b.pos, found.pos);\n\n          if (rev) {\n            return distance_a - distance_b;\n          } else {\n            return distance_b - distance_a;\n          }\n        };\n\n      Object.entries(strips).forEach(([key, list]) => {\n        list.sort(distanteToAirportSorter(false));\n        setStrips({ ...strips, [key]: list });\n      });\n      strips.Departure.sort(distanteToAirportSorter(true));\n      strips.Outbound.sort(distanteToAirportSorter(true));\n      strips.Parked.sort(nameSorter);\n      strips.Ground.sort(nameSorter);\n\n      setStrips(strips);\n    }\n  });\n\n  function onClickHeader(name: keyof Strips) {\n    setCollapse({ ...collapse(), [name]: !collapse()[name] });\n  }\n\n  return (\n    <div id=\"stripboard\">\n      <div class=\"header\">\n        Yours: {aircrafts.data.length - strips().None.length} (All:{' '}\n        {aircrafts.data.length})\n      </div>\n      {strips().Colliding.length > 0 ? (\n        <>\n          <div class=\"header\">Colliding</div>\n          {strips().Colliding.map((strip) => (\n            <Strip strip={strip}></Strip>\n          ))}\n        </>\n      ) : null}\n      {strips().Selected.length > 0 ? (\n        <>\n          <div class=\"header\">Selected</div>\n          {strips().Selected.map((strip) => (\n            <Strip strip={strip}></Strip>\n          ))}\n        </>\n      ) : null}\n      {stripEntries().map(([key, list]) =>\n        key !== 'None' && key !== 'Selected' && key !== 'Colliding' ? (\n          <>\n            <div\n              class=\"header\"\n              onClick={() => onClickHeader(key as keyof Strips)}\n            >\n              {collapse()[key] ? '- ' : list.length == 0 ? '□ ' : '■ '}\n              {key}\n              {list.length > 0 ? ` (${list.length})` : ''}\n            </div>\n            <Show when={!collapse()[key]}>\n              {list.map((strip) => (\n                <Strip strip={strip}></Strip>\n              ))}\n            </Show>\n          </>\n        ) : null\n      )}\n    </div>\n  );\n}\n","import { isServer, getRequestEvent, isDev } from 'solid-js/web';\nimport { createUniqueId, untrack } from 'solid-js';\nimport { reconcile } from 'solid-js/store';\n\n// src/cookies.ts\n\n// src/tools.ts\nvar addClearMethod = (storage) => {\n  if (typeof storage.clear === \"function\") {\n    return storage;\n  }\n  storage.clear = () => {\n    let key;\n    while (key = storage.key(0)) {\n      storage.removeItem(key);\n    }\n  };\n  return storage;\n};\nvar methodKeys = [\"clear\", \"getItem\", \"getAll\", \"setItem\", \"removeItem\", \"key\", \"getLength\"];\nvar addWithOptionsMethod = (storage) => {\n  storage.withOptions = (options) => methodKeys.reduce(\n    (wrapped, key) => {\n      if (typeof storage[key] === \"function\") {\n        wrapped[key] = (...args) => {\n          args[storage[key].length - 1] = options;\n          return storage[key](...args);\n        };\n      }\n      return wrapped;\n    },\n    {\n      get length() {\n        return storage.length;\n      },\n      withOptions: (options2) => storage.withOptions(options2)\n    }\n  );\n  return storage;\n};\nvar callStorageMethod = (storages, method, args = [], first = false) => {\n  const results = storages.map((storage) => storage[method](...args));\n  const isAsync = results.some(\n    (result) => typeof result === \"object\" && typeof result?.then === \"function\"\n  );\n  return isAsync ? first ? Promise.race(results) : Promise.all(results) : first ? results.filter(Boolean)[0] : results;\n};\nvar isNumber = (n) => typeof n === \"number\";\nvar multiplexStorage = (...storages) => ({\n  clear: () => callStorageMethod(storages, \"clear\"),\n  getItem: (key) => callStorageMethod(storages, \"getItem\", [key], true),\n  setItem: (key, value) => callStorageMethod(storages, \"setItem\", [key, value]),\n  removeItem: (key) => callStorageMethod(storages, \"removeItem\", [key]),\n  key: (no) => callStorageMethod(storages, \"key\", [no], true),\n  get length() {\n    const lengths = storages.map(\n      (storage) => storage.length\n    );\n    const isAsync = lengths.some(\n      (len) => len && typeof len === \"object\" && typeof len?.then === \"function\"\n    );\n    return isAsync ? Promise.all(lengths).then((lens) => Math.max(...lens.filter(isNumber))) : Math.max(...lengths.filter(isNumber));\n  }\n});\nvar makeObjectStorage = (object) => ({\n  getItem: (key) => Object.hasOwn(object, key) && object[key] || null,\n  setItem: (key, value) => {\n    object[key] = value;\n  },\n  removeItem: (key) => {\n    delete object[key];\n  },\n  key: (index) => Object.keys(object)[index],\n  get length() {\n    return Object.keys(object).length;\n  },\n  clear: () => Object.keys(object).forEach((key) => {\n    delete object[key];\n  })\n});\n\n// src/cookies.ts\nvar cookiePropertyMap = {\n  domain: \"Domain\",\n  expires: \"Expires\",\n  path: \"Path\",\n  secure: \"Secure\",\n  httpOnly: \"HttpOnly\",\n  maxAge: \"Max-Age\",\n  sameSite: \"SameSite\"\n};\nfunction serializeCookieOptions(options) {\n  if (!options) return \"\";\n  const result = Object.entries(options).map(([key, value]) => {\n    const serializedKey = cookiePropertyMap[key];\n    if (!serializedKey) return void 0;\n    if (value instanceof Date) return `${serializedKey}=${value.toUTCString()}`;\n    if (typeof value === \"boolean\") return value ? `${serializedKey}` : void 0;\n    return `${serializedKey}=${value}`;\n  }).filter((v) => !!v);\n  return result.length != 0 ? `; ${result.join(\"; \")}` : \"\";\n}\nfunction deserializeCookieOptions(cookie, key) {\n  return cookie.match(`(^|;)\\\\s*${key}\\\\s*=\\\\s*([^;]+)`)?.pop() ?? null;\n}\nvar getRequestHeaders = isServer ? () => getRequestEvent()?.request?.headers || new Headers() : () => new Headers();\nvar getResponseHeaders = isServer ? () => getRequestEvent()?.response?.headers || new Headers() : () => new Headers();\nvar cookieStorage = addWithOptionsMethod(\n  addClearMethod({\n    _read: isServer ? (options) => {\n      const requestCookies = (options?.getRequestHeaders?.() || getRequestHeaders()).get(\n        \"Cookie\"\n      );\n      const responseCookies = (options?.getResponseHeaders?.() || getResponseHeaders()).get(\n        \"Set-Cookie\"\n      );\n      const cookies = {};\n      const addCookie = (_, key, val) => cookies[key] = val;\n      requestCookies?.replace(/(?:^|;)([^=]+)=([^;]+)/g, addCookie);\n      responseCookies?.replace(/(?:^|, )([^=]+)=([^;]+)/g, addCookie);\n      return Object.entries(cookies).map((keyval) => keyval.join(\"=\")).join(\"; \");\n    } : () => document.cookie,\n    _write: isServer ? (key, value, options) => {\n      const responseHeaders = getResponseHeaders();\n      const currentCookies = responseHeaders?.get(\"Set-Cookie\")?.split(\", \")?.filter((cookie) => cookie && !cookie.startsWith(`${key}=`)) ?? [];\n      responseHeaders.set(\n        \"Set-Cookie\",\n        [...currentCookies, `${key}=${value}${serializeCookieOptions(options)}`].join(\", \")\n      );\n    } : (key, value, options) => {\n      document.cookie = `${key}=${value}${serializeCookieOptions(options)}`;\n    },\n    getItem: (key, options) => deserializeCookieOptions(cookieStorage._read(options), key),\n    setItem: (key, value, options) => {\n      cookieStorage._write(key, value, options);\n    },\n    removeItem: (key, options) => {\n      cookieStorage._write(key, \"deleted\", { ...options, expires: /* @__PURE__ */ new Date(0) });\n    },\n    key: (index, options) => {\n      let key = null;\n      let count = 0;\n      cookieStorage._read(options).replace(/(?:^|;)\\s*(.+?)\\s*=\\s*[^;]+/g, (_, found) => {\n        if (!key && found && count++ === index) {\n          key = found;\n        }\n        return \"\";\n      });\n      return key;\n    },\n    getLength: (options) => {\n      let length = 0;\n      cookieStorage._read(options).replace(/(?:^|;)\\s*.+?\\s*=\\s*[^;]+/g, (found) => {\n        length += found ? 1 : 0;\n        return \"\";\n      });\n      return length;\n    },\n    get length() {\n      return this.getLength();\n    }\n  })\n);\nfunction makePersisted(signal, options = {}) {\n  const storage = options.storage || globalThis.localStorage;\n  const name = options.name || `storage-${createUniqueId()}`;\n  if (!storage) {\n    return signal;\n  }\n  const storageOptions = options.storageOptions;\n  const serialize = options.serialize || JSON.stringify.bind(JSON);\n  const deserialize = options.deserialize || JSON.parse.bind(JSON);\n  const init = storage.getItem(name, storageOptions);\n  const set = typeof signal[0] === \"function\" ? (data) => {\n    try {\n      const value = deserialize(data);\n      signal[1](() => value);\n    } catch (e) {\n      if (isDev) console.warn(e);\n    }\n  } : (data) => {\n    try {\n      const value = deserialize(data);\n      signal[1](reconcile(value));\n    } catch (e) {\n      if (isDev) console.warn(e);\n    }\n  };\n  let unchanged = true;\n  if (init instanceof Promise) init.then((data) => unchanged && data && set(data));\n  else if (init) set(init);\n  if (typeof options.sync?.[0] === \"function\") {\n    const get = typeof signal[0] === \"function\" ? signal[0] : () => signal[0];\n    options.sync[0]((data) => {\n      if (data.key !== name || !isServer && (data.url || globalThis.location.href) !== globalThis.location.href || data.newValue === serialize(untrack(get))) {\n        return;\n      }\n      set(data.newValue);\n    });\n  }\n  return [\n    signal[0],\n    typeof signal[0] === \"function\" ? (value) => {\n      const output = signal[1](value);\n      const serialized = value != null ? serialize(output) : value;\n      options.sync?.[1](name, serialized);\n      if (value != null) storage.setItem(name, serialized, storageOptions);\n      else storage.removeItem(name, storageOptions);\n      unchanged = false;\n      return output;\n    } : (...args) => {\n      signal[1](...args);\n      const value = serialize(untrack(() => signal[0]));\n      options.sync?.[1](name, value);\n      storage.setItem(name, value, storageOptions);\n      unchanged = false;\n    }\n  ];\n}\nvar storageSync = [\n  (subscriber) => window.addEventListener(\"storage\", (ev) => subscriber(ev)),\n  () => {\n  }\n];\nvar messageSync = (channel = window) => [\n  (subscriber) => channel.addEventListener(\"message\", (ev) => {\n    subscriber(ev.data);\n  }),\n  (key, newValue) => channel.postMessage(\n    { key, newValue, timeStamp: +/* @__PURE__ */ new Date(), url: location.href },\n    location.origin\n  )\n];\nvar wsSync = (ws, warnOnError = isDev) => [\n  (subscriber) => ws.addEventListener(\"message\", (ev) => {\n    try {\n      const data = JSON.parse(ev.data);\n      if ([\"key\", \"newValue\", \"timeStamp\"].every((item) => Object.hasOwn(data, item))) {\n        subscriber(data);\n      }\n    } catch (e) {\n      if (warnOnError) console.warn(e);\n    }\n  }),\n  (key, newValue) => ws.send(\n    JSON.stringify({\n      key,\n      newValue,\n      timeStamp: +/* @__PURE__ */ new Date(),\n      ...isServer ? {} : { url: location.href }\n    })\n  )\n];\nvar multiplexSync = (...syncAPIs) => [\n  (subscriber) => syncAPIs.forEach(([subscribe]) => subscribe(subscriber)),\n  (key, value) => syncAPIs.forEach(([_, updater]) => updater(key, value))\n];\n\nexport { addClearMethod, addWithOptionsMethod, cookieStorage, makeObjectStorage, makePersisted, messageSync, multiplexStorage, multiplexSync, storageSync, wsSync };\n","import { useAtom } from 'solid-jotai';\nimport { frequencyAtom } from './lib/atoms';\nimport { createEffect, createSignal, onCleanup, onMount } from 'solid-js';\nimport { makePersisted } from '@solid-primitives/storage';\nimport { Frequencies } from './lib/types';\nimport { useWorld } from './lib/api';\n\nexport default function FreqSelector() {\n  let [frequency, setFrequency] = useAtom(frequencyAtom);\n  let [secondary, setSecondary] = makePersisted(createSignal(frequency()));\n  let [key, setKey] = createSignal<keyof Frequencies>('approach');\n  const query = useWorld();\n\n  function updateKeyByFreqChange() {\n    const found = query.data?.airspace;\n    if (!found) {\n      return;\n    }\n\n    let newKey = Object.entries(found.frequencies).find(\n      ([, v]) => v === frequency()\n    ) as [keyof Frequencies, number];\n\n    if (newKey) {\n      setKey(newKey[0]);\n    }\n  }\n\n  createEffect(() => updateKeyByFreqChange());\n\n  function changeViaKey(key: keyof Frequencies) {\n    setKey(key as keyof Frequencies);\n\n    const found = query.data?.airspace;\n    if (!found) {\n      return;\n    }\n\n    if (found?.frequencies && key in found?.frequencies) {\n      setFrequency(found?.frequencies[key]);\n    }\n  }\n\n  function changeViaValue(value: number) {\n    setFrequency(value);\n\n    const found = query.data?.airspace;\n    if (!found) {\n      return;\n    }\n\n    if (found.frequencies) {\n      // TODO: Remove uses of as keyof Frequencies.\n      setKey(\n        Object.keys(found.frequencies).find(\n          (k) => found.frequencies[k as keyof Frequencies] === value\n        ) as keyof Frequencies\n      );\n    }\n  }\n\n  function swap() {\n    let swapFreq = frequency();\n    changeViaValue(secondary());\n    setSecondary(swapFreq);\n  }\n\n  function oninput(e: InputEvent) {\n    if (e.target instanceof HTMLInputElement) {\n      changeViaValue(parseFloat(e.target.value));\n    }\n  }\n\n  function onBackslash(e: KeyboardEvent) {\n    if (e.key === '\\\\') {\n      swap();\n    }\n  }\n\n  onMount(() => {\n    document.addEventListener('keydown', onBackslash);\n  });\n\n  onCleanup(() => {\n    document.removeEventListener('keydown', onBackslash);\n  });\n\n  return (\n    <div id=\"freq-selector\">\n      <div class=\"row\">\n        <select\n          name=\"frequency\"\n          onchange={(e) => changeViaKey(e.target.value as keyof Frequencies)}\n          value={key()}\n        >\n          {query.data?.airspace?.frequencies\n            ? // TODO: Remove uses of as keyof Frequencies.\n              Object.entries(query.data?.airspace!.frequencies).map(\n                ([k, v]) => (\n                  <option value={k}>\n                    {k} - {v}\n                  </option>\n                )\n              )\n            : null}\n        </select>\n        <input\n          type=\"number\"\n          value={frequency()}\n          class=\"live\"\n          oninput={oninput}\n          step=\".1\"\n        />\n      </div>\n      <div class=\"row\">\n        <input type=\"button\" value=\"Swap\" onClick={swap} />\n        <input\n          type=\"number\"\n          value={secondary()}\n          oninput={(e) => setSecondary(parseFloat(e.target.value))}\n          step=\".1\"\n        />\n      </div>\n    </div>\n  );\n}\n","import { Show } from 'solid-js';\nimport { usePoints } from './lib/api';\nimport { formatTime } from './lib/lib';\n\nexport default function Points() {\n  const query = usePoints();\n\n  return (\n    <Show when={query.data !== undefined}>\n      <div class=\"points\">\n        <p>\n          <b>Landings:</b> {query.data!.landings} (rate: once every{' '}\n          {formatTime(query.data!.landing_rate.rate.secs * 1000)} mins)\n        </p>\n        <p>\n          <b>Takeoffs:</b> {query.data!.takeoffs} (rate: once every{' '}\n          {formatTime(query.data!.takeoff_rate.rate.secs * 1000)} mins)\n        </p>\n      </div>\n    </Show>\n  );\n}\n","import {\n  baseAPIPath,\n  deleteFlight,\n  getAircraft,\n  getFlights,\n  postCreateFlight,\n  useFlights,\n} from './lib/api';\nimport { formatTime } from './lib/lib';\nimport { Flight } from './lib/types';\nimport './Flights.scss';\nimport { useQueryClient } from '@tanstack/solid-query';\nimport { createMemo, createSignal, Show } from 'solid-js';\nimport { useAtom } from 'solid-jotai';\nimport { selectedAircraftAtom } from './lib/atoms';\n\nfunction formatKind(kind: string) {\n  switch (kind) {\n    case 'outbound':\n      return 'Depart';\n    case 'inbound':\n      return 'Arrive';\n    default:\n      return kind;\n  }\n}\n\nexport function FlightItem({ flight }: { flight: Flight }) {\n  const client = useQueryClient();\n\n  async function handleDelete() {\n    const res = await fetch(`${baseAPIPath}${deleteFlight(flight.id)}`, {\n      method: 'DELETE',\n    });\n\n    if (res.ok) {\n      await client.cancelQueries({ queryKey: [getFlights] });\n      await client.setQueryData([getFlights], (old: Flight[]) => {\n        console.log({ old });\n        return old.filter((f) => f.id !== flight.id);\n      });\n    }\n  }\n\n  const [selected, setSelected] = useAtom(selectedAircraftAtom);\n\n  let callsign = formatKind(flight.kind);\n  if (flight.status.type === 'ongoing') {\n    callsign = flight.status.value;\n  } else if (flight.status.type === 'completed') {\n    callsign = flight.status.value[0];\n  }\n\n  const isSelected = createMemo(() => selected() === callsign);\n\n  let time = formatTime(flight.spawn_at.secs * 1000 - new Date().getTime());\n  if (flight.status.type === 'ongoing') {\n    time = formatTime(new Date().getTime() - flight.spawn_at.secs * 1000);\n  } else if (flight.status.type === 'completed') {\n    time = formatTime(\n      (flight.status.value[1].secs - flight.spawn_at.secs) * 1000\n    );\n  }\n\n  function handleSelect() {\n    setSelected(callsign);\n  }\n\n  return (\n    <div class=\"flight\" onClick={handleSelect}>\n      <span\n        classList={{\n          callsign: true,\n          outbound: flight.kind === 'outbound',\n          selected: isSelected(),\n        }}\n      >\n        {callsign}\n      </span>\n      <span class=\"timer\">{time}</span>\n      <button onClick={handleDelete}>Del</button>\n    </div>\n  );\n}\n\nexport function FlightForm() {\n  const client = useQueryClient();\n\n  async function createFlight(data: { kind: string; spawn_at: string }) {\n    const body = new URLSearchParams(data);\n\n    await fetch(`${baseAPIPath}${postCreateFlight}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n      body,\n    });\n  }\n\n  async function handleSubmit(e: Event) {\n    e.preventDefault();\n\n    const form = e.target as HTMLFormElement;\n    const formData = new FormData(form);\n\n    const quantity = parseInt(formData.get('quantity') as string);\n    const stagger = parseInt(formData.get('stagger') as string);\n    const spawnAt = parseInt(formData.get('spawn_at') as string);\n    const kind = formData.get('kind') as string;\n\n    await Promise.all(\n      Array.from({ length: quantity }).map((_, i) =>\n        createFlight({\n          spawn_at: (spawnAt + i * stagger).toString(),\n          kind,\n        })\n      )\n    );\n\n    // Invalidate and refetch flights\n    await client.cancelQueries({ queryKey: [getFlights] });\n    await client.invalidateQueries({ queryKey: [getFlights] });\n    await client.refetchQueries({ queryKey: [getFlights] });\n\n    if (spawnAt <= 4) {\n      // Invalidate and refetch aircraft\n      await client.cancelQueries({ queryKey: [getAircraft] });\n      await client.invalidateQueries({ queryKey: [getAircraft] });\n      await client.refetchQueries({ queryKey: [getAircraft] });\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <h2>Order:</h2>\n      <label>\n        <span>Quantity:</span>\n        <input type=\"number\" name=\"quantity\" min={1} value={5} />\n      </label>\n      <label>\n        <span>Flight kind:</span>\n        <select name=\"kind\">\n          <option value=\"outbound\">Outbound</option>\n          <option value=\"inbound\">Inbound</option>\n        </select>\n      </label>\n      <label>\n        <span>Spawn in (secs):</span>\n        <input type=\"number\" name=\"spawn_at\" min={0} step={1} value={0} />\n      </label>\n      <label>\n        <span>Stagger (secs):</span>\n        <input type=\"number\" name=\"stagger\" min={0} step={1} value={180} />\n      </label>\n      <button type=\"submit\">Add</button>\n    </form>\n  );\n}\n\nexport default function Flights() {\n  const [show, setShow] = createSignal(false);\n  const query = useFlights();\n\n  return (\n    <div class=\"container border\">\n      <div class=\"flights\">\n        <Show when={!show()}>\n          <button onClick={() => setShow(true)}>Flights</button>\n        </Show>\n        <Show when={show()}>\n          <button onClick={() => setShow(false)}>Close</button>\n          <FlightForm />\n          <hr />\n          <h2>Scheduled</h2>\n          <div class=\"list\">\n            {query.data\n              .filter((f) => f.status.type === 'scheduled')\n              .map((f) => (\n                <FlightItem flight={f} />\n              ))}\n          </div>\n          <hr />\n          <h2>Ongoing</h2>\n          <div class=\"list\">\n            {query.data\n              .filter((f) => f.status.type === 'ongoing')\n              .map((f) => (\n                <FlightItem flight={f} />\n              ))}\n          </div>\n          <hr />\n          <h2>Completed</h2>\n          <div class=\"list\">\n            {query.data\n              .filter((f) => f.status.type === 'completed')\n              .map((f) => (\n                <FlightItem flight={f} />\n              ))}\n          </div>\n        </Show>\n      </div>\n    </div>\n  );\n}\n","import { useAtom } from 'solid-jotai';\nimport { WhisperSTT } from './whisper/WhisperSTT';\nimport { frequencyAtom, isRecordingAtom, useTTSAtom } from './lib/atoms';\nimport Chatbox from './Chatbox';\nimport { createEffect, onMount, Show } from 'solid-js';\nimport Canvas from './Canvas';\nimport StripBoard from './StripBoard';\nimport FreqSelector from './FreqSelector';\nimport { useStorageAtom } from './lib/hooks';\nimport { baseAPIPath, getMessages, usePing } from './lib/api';\nimport Points from './Points';\nimport { useQueryClient } from '@tanstack/solid-query';\nimport Flights from './Flights';\n\nexport default function App() {\n  const whisper = new WhisperSTT();\n\n  let [isRecording, setIsRecording] = useAtom(isRecordingAtom);\n  let [frequency] = useStorageAtom(frequencyAtom);\n  let [useTTS, setUseTTS] = useStorageAtom(useTTSAtom);\n  const query = usePing();\n  const client = useQueryClient();\n\n  async function getMedia(constraints: MediaStreamConstraints) {\n    await navigator.mediaDevices.getUserMedia(constraints);\n  }\n\n  function startRecording() {\n    whisper.startRecording();\n    setIsRecording(true);\n  }\n\n  async function stopRecording() {\n    setIsRecording(false);\n    whisper.stopRecording(async (blob) => {\n      const value = await blob.arrayBuffer();\n      await fetch(`${baseAPIPath}/api/comms/voice?frequency=${frequency()}`, {\n        body: value,\n        method: 'POST',\n      });\n      await client.invalidateQueries({\n        queryKey: [getMessages],\n        type: 'all',\n        exact: true,\n      });\n      await client.refetchQueries({\n        queryKey: [getMessages],\n        type: 'all',\n        exact: true,\n      });\n    });\n  }\n\n  function discardRecording() {\n    whisper.abortRecording();\n    setIsRecording(false);\n  }\n\n  async function sendTextMessage(text: string) {\n    await fetch(`${baseAPIPath}/api/comms/text?frequency=${frequency()}`, {\n      body: text,\n      method: 'POST',\n    });\n    await client.invalidateQueries({\n      queryKey: [getMessages],\n      type: 'all',\n      exact: true,\n    });\n    await client.refetchQueries({\n      queryKey: [getMessages],\n      type: 'all',\n      exact: true,\n    });\n  }\n\n  onMount(async () => {\n    await getMedia({ audio: true, video: false });\n\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Insert' && !isRecording()) {\n        startRecording();\n      } else if (e.key === 'Pause') {\n        sendPause();\n      }\n    });\n\n    document.addEventListener('keyup', (e) => {\n      if (e.key === 'Insert' && isRecording()) {\n        stopRecording();\n      } else if (e.key === 'Delete' && isRecording()) {\n        discardRecording();\n      }\n    });\n  });\n\n  async function sendPause() {\n    await fetch(`${baseAPIPath}/api/pause`, {\n      method: 'POST',\n    });\n  }\n\n  function toggleTTS() {\n    setUseTTS((useTTS) => !useTTS);\n  }\n\n  createEffect(() => {\n    console.log('connected?', query.data);\n  });\n\n  return (\n    <>\n      <Show when={query.data}>\n        <div class=\"container left\">\n          <Flights />\n          <div class=\"spacer\"></div>\n          <Points />\n          <Chatbox sendMessage={sendTextMessage}></Chatbox>\n        </div>\n        <div id=\"radar\">\n          <Canvas></Canvas>\n          <div class=\"right\">\n            <StripBoard></StripBoard>\n            <FreqSelector></FreqSelector>\n            <div class=\"bottom-right-buttons\">\n              <button\n                classList={{ 'tts-toggle': true, enabled: useTTS() }}\n                onClick={toggleTTS}\n              >\n                {useTTS() ? 'Disable TTS' : 'Enable TTS'}\n              </button>\n              <button\n                class={`talk-button ${isRecording() ? 'recording' : ''}`}\n                onMouseDown={startRecording}\n                onMouseUp={stopRecording}\n              >\n                {isRecording() ? 'Recording...' : 'Talk'}\n              </button>\n              <button class=\"discard-button\" onClick={discardRecording}>\n                Discard\n              </button>\n              <button class=\"pause-button\" onClick={sendPause}>\n                Pause\n              </button>\n            </div>\n          </div>\n        </div>\n      </Show>\n      <Show when={!query.data}>\n        <div class=\"connection-message\">\n          <h1>Connecting to server...</h1>\n          <h2>Retrying: {baseAPIPath}</h2>\n        </div>\n      </Show>\n    </>\n  );\n}\n","/* @refresh reload */\nimport { render } from 'solid-js/web';\n\nimport App from './App';\nimport { QueryClient, QueryClientProvider } from '@tanstack/solid-query';\n\nconst root = document.getElementById('root');\nconst client = new QueryClient();\nif (!(root instanceof HTMLElement)) {\n  throw new Error(\n    'Root element not found. Did you forget to add it to your index.html? Or maybe the id attribute got misspelled?'\n  );\n}\n\nrender(\n  () => (\n    <QueryClientProvider client={client}>\n      <App />\n    </QueryClientProvider>\n  ),\n  root!\n);\n"],"names":["sharedConfig","getContextId","count","num","len","setHydrateContext","context","nextHydrateContext","equalFn","a","b","$PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","NO_INIT","Owner","Transition","ExternalSourceConfig","Listener","Updates","Effects","ExecCount","createRoot","fn","detachedOwner","listener","owner","unowned","current","root","updateFn","untrack","cleanNode","runUpdates","createSignal","value","options","s","setter","writeSignal","readSignal","createComputed","c","createComputation","updateComputation","createRenderEffect","createEffect","runUserEffects","createMemo","isPromise","v","createResource","pSource","pFetcher","pOptions","source","fetcher","pr","initP","id","scheduled","resolved","dynamic","contexts","setValue","error","setError","track","trigger","state","setState","loadEnd","p","key","completeLoad","err","read","SuspenseContext","load","refetching","lookup","castError","e","batch","on","deps","isArray","prevInput","defer","prevValue","input","i","result","onMount","onCleanup","getListener","createContext","defaultValue","createProvider","useContext","children","memo","resolveChildren","updates","lookUpstream","sSlot","node","isComp","o","TransitionRunning","markDownstream","time","runComputation","nextValue","handleError","init","pure","runTop","ancestors","wait","res","completeUpdates","queue","userLength","ignore","index","obs","n","results","props","hydrationEnabled","createComponent","Comp","r","counter","createUniqueId","narrowedError","name","Show","keyed","condition","child","reconcileArrays","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","map","sequence","t","$$EVENTS","render","code","element","disposer","dispose","insert","template","html","isCE","isSVG","create","delegateEvents","eventNames","document","l","eventHandler","className","isHydrating","use","arg","parent","accessor","marker","initial","insertExpression","el","ev","handler","data","unwrapArray","hydrating","cleaned","multi","cleanChildren","array","currentArray","normalizeIncomingArray","nodes","appendNodes","normalized","unwrap","item","prev","replacement","inserted","isParent","isServer","keyCount","atom","write","config","__vite_import_meta_env__","defaultRead","defaultWrite","get","set","isSelfAtom","hasInitialValue","isActuallyWritableAtom","CONTINUE_PROMISE","FULFILLED","REJECTED","isContinuablePromise","promise","continuablePromiseMap","createContinuablePromise","abort","complete","continuePromise","resolve","reject","curr","onFulfilled","me","onRejected","nextPromise","nextAbort","isPromiseLike","x","isAtomStateInitialized","atomState","returnAtomValue","getPendingContinuablePromise","addPendingContinuablePromiseToDependency","dependencyAtomState","addDependency","pending","aState","_a","continuablePromise","addPendingDependent","createPending","addPendingAtom","dependent","dependents","getPendingDependents","addPendingFunction","flushPending","atomStates","functions","buildStore","getAtomState","debugMountedAtoms","setAtomStateValueOrPromise","valueOrPromise","abortPromise","completePromise","hasPrevValue","pendingPromise","readAtomState","force","isSync","getter","aState2","pending2","mountDependencies","controller","setSelf","args","writeAtom","readAtom","getDependents","_b","atomWithPendingContinuablePromise","recomputeDependents","topsortedAtoms","markedAtoms","visit","d","changedAtoms","isMarked","prevEpochNumber","hasChangedDeps","dep","writeAtomState","args2","mountAtom","aMounted","unmountAtom","mounted","onUnmount","store","listeners","values","createStore","atomStateMap","defaultStore","getDefaultStore","StoreContext","useStore","useSetAtom","setAtom","$RAW","$NODE","$HAS","$SELF","wrap$1","proxyTraps$1","keys","desc","prop","isWrappable","obj","proto","unwrapped","getNodes","target","symbol","getNode","property","proxyDescriptor$1","trackSelf","ownKeys","receiver","tracked","setProperty","deleting","mergeStoreNode","updateArray","next","updatePath","path","traversed","part","partType","from","to","by","unwrappedStore","wrappedStore","setStore","$ROOT","applyState","merge","previous","j","start","end","newEnd","newIndicesNext","keyVal","temp","newIndices","targetKeys","previousKeys","reconcile","createDeepSignal","useAtomValue","atom2","atomValue2","refetch","unsub2","atomValue","setAtomValue","unsub","useAtom","RecordRTC","mediaStream","RecordRTCConfiguration","self","startRecording","config2","mediaRecorder","handleRecordingDuration","initRecorder","initCallback","Recorder","GetRecorderType","stopRecording","callback","warningLog","_callback","__blob","blob","bytesToSize","url","URL","getDataURL","dataURL","parameter","DiskStorage","pauseRecording","resumeRecording","readFile","_blob","_mediaRecorder","webWorker","processInWebWorker","event","reader","_function","worker","WARNING","returnObject","recordingDuration","fileName","invokeSaveAsDialog","arrayOfWebPImages","length","disableLogsCache","Storage","module","type","_type","audioDataURL","videoDataURL","gifDataURL","WhammyRecorder","CanvasRecorder","WebAssemblyRecorder","GifRecorder","StereoAudioRecorder","MediaStreamRecorder","getTracks","recorder","isChrome","isEdge","isOpera","isMediaRecorderCompatible","MultiStreamRecorder","isSafari","MRecordRTC","_mediaStream","mediaType","recorderType","mimeType","newStream","videoTrack","isFirefox","MediaStream","isSingleRecorder","blobURL","output","_audioDataURL","_videoDataURL","callback00","browserFakeUserAgent","that","global","requestAnimationFrame","lastTime","currTime","timeToCall","cancelAnimationFrame","AudioContext","isElectron","bytes","k","sizes","file","fileExtension","splitted","fileFullName","hyperlink","stream","kind","setSrcObject","getSeekableBlob","inputBlob","decoder","tools","fileReader","ebmlElms","refinedMetadataBuf","body","newBlob","nAgt","fullVersion","majorVersion","verOffset","ix","arrayOfBlobs","allStates","recorderHints","updateTimeStamp","getMimeType","looper","secondObject","clearRecordedDataCB","isMediaStreamActive","leftchannel","rightchannel","recording","recordingLength","jsAudioNode","numberOfAudioChannels","desiredSampRate","resetVariables","isAudioProcessStarted","isPaused","mergeLeftRightBuffers","mergeAudioBuffers","cb","leftBuffers","rightBuffers","sampleRate","internalInterleavedLength","mergeBuffers","interpolateArray","newSampleRate","oldSampleRate","fitCount","newData","springFactor","tmp","before","atPoint","linearInterpolate","channelBuffer","rLength","offset","lng","buffer","interleave","leftChannel","rightChannel","inputIndex","writeUTFBytes","view","string","interleaved","interleavedLength","resultingBufferLength","volume","workerURL","bufferSize","audioInput","legalBufferValues","intervalsBasedBuffers","onAudioProcessDataAvailable","left","chLeft","right","chRight","htmlElement","isCanvasSupportsStreamCapturing","_isChrome","chromeVersion","matchArray","globalCanvas","mediaStreamRecorder","isRecording","canvasMediaStream","mdStream","whammy","drawCanvasFrame","framesLength","frame","idx","framesRemaining","webp","isPausedRecording","cloneCanvas","newCanvas","duration","canvas","Whammy","video","drawFrames","frameInterval","isStopDrawing","asyncLoop","loop","dropBlackFrames","_frames","_framesToCheck","_pixTolerance","_frameTolerance","localCanvas","context2d","resultFrames","endCheckFrame","sampleColor","maxColorDifference","pixTolerance","frameTolerance","doNotCheckNext","f","matchPixCount","endPixCheck","maxPixCount","finishImage","image","imageData","pix","currentColor","colorDifference","_this","frames","WhammyVideo","whammyInWebWorker","ArrayToWebM","info","checkFrames","clusterMaxDuration","EBML","doubleToString","frameNumber","clusterTimecode","clusterFrames","clusterDuration","clusterCounter","cluster","getClusterData","generateEBML","block","makeSimpleBlock","width","height","numToBuffer","parts","strToBuffer","str","bitsToBuffer","bits","pad","json","ebml","zeroes","sizeToString","padded","size","flags","out","parseWebP","riff","VP8","frameStart","getStrLength","unpadded","parseRIFF","chunks","webm","dbVersion","dbName","db","request","createObjectStore","dataBase","putInDB","transaction","getFromStore","portionName","setVersion","script","isHTMLObject","isLoadedMetaData","gifEncoder","drawVideoFrame","lastAnimationFrame","lastFrameTime","MultiStreamsMixer","arrayOfMediaStreams","elementClass","videos","isStopDrawingFrames","drawVideosToCanvas","videosLength","fullcanvas","remaining","drawImage","y","getMixedStream","mixedVideoStream","getMixedVideoStream","mixedAudioStream","getMixedAudioStream","resetVideoStreams","capturedStream","videoStream","audioTracksLength","audioSource","getVideo","streams","mixer","getAllVideoTracks","tracks","RecordRTCPromisesHandler","finished","cameraStream","cvs","first","ctx","frameTimeout","cameraTimer","arrayOfBuffers","terminate","AUDIO_TYPE","WhisperSTT","__publicField","onFinish","radarAtom","isRecordingAtom","useTTSAtom","frequencyAtom","controlAtom","renderAtom","selectedAircraftAtom","timeScale","nauticalMilesToFeet","knotToFeetPerSecond","ENROUTE_TIME_MULTIPLIER","isSome","headingToDegrees","heading","toDegrees","degrees","toRadians","movePoint","point","directionDegrees","directionRadians","newX","newY","angleBetweenPoints","dx","dy","midpointBetweenPoints","inverseDegrees","runwayInfo","runway","pos","maxIlsRangeMiles","ilsPoints","separate","ilsStart","maxAngle","minAngle","calculateSquaredDistance","calculateDistance","formatTime","isNegative","absDuration","durationSeconds","seconds","timeString","shortLandingState","shortTaxiingState","getFromLocalStorage","setToLocalStorage","val","useStorageAtom","theAtom","setTheAtom","local","Subscribable","noop","functionalUpdate","updater","isValidTimeout","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","_","isPlainObject","replaceEqualDeep","isPlainArray","aItems","aSize","bItems","bSize","copy","equalItems","shallowEqualObjects","hasObjectPrototype","ctor","prot","sleep","timeout","replaceData","prevData","addToEnd","items","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","FocusManager","__privateAdd","_focused","_cleanup","_setup","__privateSet","onFocus","__privateGet","setup","focused","isFocused","focusManager","OnlineManager","_online","onOnline","onlineListener","offlineListener","online","onlineManager","pendingThenable","thenable","_resolve","_reject","finalize","reason","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","isCancelledError","createRetryer","isRetryCancelled","isResolved","continueFn","cancel","cancelOptions","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","delay","shouldRetry","createNotifyManager","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","notifyManager","Removable","_gcTimeout","newGcTime","Query","_Query_instances","_initialState","_revertState","_cache","_retryer","_defaultOptions","_abortSignalConsumed","getDefaultState","__privateMethod","dispatch_fn","setStateOptions","observer","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","_c","onError","_d","action","reducer","fetchState","hasData","initialDataUpdatedAt","QueryCache","_queries","client","queryHash","queryInMap","defaultedFilters","queries","Mutation","_Mutation_instances","_observers","_mutationCache","variables","restored","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_t","_s","MutationCache","_mutations","_mutationId","__privateWrapper","scope","scopeFor","mutations","firstPendingMutation","m","foundMutation","pausedMutations","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","QueryClient","_queryCache","_queryDefaults","_mutationDefaults","_mountCount","_unsubscribeFocus","_unsubscribeOnline","cachedData","defaultedOptions","queryCache","refetchFilters","defaultedCancelOptions","promises","defaults","queryDefault","QueryObserver","_QueryObserver_instances","_client","_currentQuery","_currentQueryInitialState","_currentResult","_currentResultState","_currentResultOptions","_currentThenable","_selectError","_selectFn","_selectResult","_lastQueryWithDefinedData","_staleTimeoutId","_refetchIntervalId","_currentRefetchInterval","_trackedProps","shouldFetchOnMount","executeFetch_fn","updateTimers_fn","shouldFetchOn","clearStaleTimeout_fn","clearRefetchInterval_fn","notifyOptions","prevOptions","prevQuery","updateQuery_fn","shouldFetchOptionally","updateStaleTimeout_fn","nextRefetchInterval","computeRefetchInterval_fn","updateRefetchInterval_fn","shouldAssignObserverCurrentProperties","onPropTracked","trackedResult","prevResult","prevResultState","prevResultOptions","queryInitialState","newState","isPlaceholderData","fetchOnMount","fetchOptionally","errorUpdatedAt","selectError","placeholderData","isFetching","isPending","isError","isLoading","nextResult","isStale","finalizeThenableIfPossible","recreateThenable","prevThenable","defaultNotifyOptions","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","notify_fn","nextInterval","shouldLoadOnMount","field","optimisticResult","defaultTransformerFn","hydrate","dehydratedState","mutationCache","deserializeData","mutationOptions","meta","_ignored","serializedState","QueryClient$1","QueryClientContext","useQueryClient","queryClient","QueryClientProvider","unmount","shouldThrowError","throwError","params","IsRestoringContext","useIsRestoring","reconcileFn","reconcileOption","newData2","hydratableObserverResult","createBaseQuery","Observer","isRestoring","defaultOptions","initialOptions","setObserver","observerResult","createClientSubscriber","unsubscribe","setStateWithReconciliation","opts","reconcileOptions","hydrationData","rest","resolver","queryResource","newOptions","newObserver","restoring","createQuery","fastDeepEqual","equal","defaultURL","search","baseAPIPath","getPing","usePing","getAircraft","useAircraft","renderRate","getFlights","useFlights","postCreateFlight","deleteFlight","getWorld","useWorld","getPoints","usePoints","getMessages","useMessages","Chatbox","sendMessage","chatbox","chatboxInput","frequency","selectedAircraft","setSelectedAircraft","useTTS","showAll","setShowAll","text","setText","lastRead","setLastRead","Date","now","voices","setVoices","Map","messages","randBetween","min","Math","floor","random","speak","message","window","speechSynthesis","speaking","setTimeout","utterance","SpeechSynthesisUtterance","reply","replace","has","rate","pitch","voice","console","log","created","secs","onKeydown","HTMLInputElement","activeElement","focus","preventDefault","blur","addEventListener","removeEventListener","resetText","HTMLDivElement","scrollTo","scrollHeight","toggleAll","handleSendMessage","test","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$6","_el$7","$$click","_ref$","_$use","_$insert","filter","_el$8","_tmpl$2","_el$9","_el$10","_c$","_$memo","_el$11","_tmpl$3","_$effect","_p$","_v$","_v$2","classList","toggle","undefined","_ref$2","$$keydown","$$input","currentTarget","_$delegateEvents","colors","groundScale","Canvas","radar","setRadar","setRender","fontSize","isGround","scale","aircraftTrails","setAircraftTrails","mod","setMod","aircrafts","world","scaleFeetToPixels","FEET_TO_PIXELS","scalePixelsToFeet","scalePoint","vec2","shiftPoint","scalePixelPoint","onResize","clientWidth","clientHeight","HTMLCanvasElement","setInterval","doRender","isDragging","dragStartPoint","clientX","clientY","lastShiftPoint","coords","offsetX","offsetY","closestAircraft","smallestDistance","Infinity","maxDistanceSquared","pow","aircraft","distanceSquared","altitude","deltaY","maxScale","minScale","doDraw","lastDraw","doInitialDraw","trail","last","at","push","slice","resetTransform","translate","lineWidth","strokeStyle","fillStyle","font","textAlign","textBaseline","getContext","fillRect","drawGround","drawTower","drawCompass","radius","find","origin","padding","increment","toString","padStart","fillText","cos","sin","drawAirspace","airspace","special","beginPath","arc","PI","stroke","drawRunway","ils","moveTo","lineTo","line_blue","line_grey","altitudePoints","drawWaypoint","position","color","fill","spacing","textWidth","measureText","text_background","drawConnection","connection","activeColor","text_grey","inactiveColor","inactive","selectedColor","text_yellow","flight_plan","arriving","transition","drawBlip","isAboveAirspace","isSelected","isEnroute","enroute","isLanding","dotSize","is_colliding","text_red","departing","line_green","wp","waypoints","reverse","behavior","line_yellow","line_red","speed","timeToCircle","endPos","text_green","altitudeIcon","round","headingInfo","drawTerminal","terminal","apron_a","apron","apron_b","gates","gate","drawGate","text_orange","drawTaxiway","taxiway","drawTaxiwayLabel","middle","drawRunwayGround","drawBlipGround","taxi_color","callsign_color","active","drawFlightPlanWaypoints","drawCollodingMessage","names","join","airport","airports","runways","connections","taxiways","terminals","isAircraftFlying","isAircraftTaxiing","newStrips","Selected","Colliding","Inbound","Approach","Landing","Departure","Outbound","Parked","Ground","Takeoff","None","newCollapse","strips","collapse","Object","forEach","assignAircraftToStrips","ourAirspace","isTaxiing","isParked","isTaxiingToRunway","firstWaypoint","isInLocalAirspace","isDepartingAndInLocalAirspace","isDepartingFromLocalAirspace","isArrivingToLocalAirspace","Strip","strip","ourFrequency","control","sinceCreated","distance","waypoint","topStatus","bottomStatus","dimmer","startsWith","distanceText","toFixed","endsWith","rawAngle","angle","closestAngle","flatMap","diff","abs","handleMouseDown","_el$12","_el$13","$$mousedown","_$createComponent","when","_v$3","_v$4","StripBoard","setStrips","equals","stripEntries","entries","setCollapse","initialData","found","category","nameSorter","localeCompare","distanteToAirportSorter","rev","distance_a","distance_b","list","sort","onClickHeader","_el$14","_el$15","_el$16","_el$20","_el$17","_el$21","_tmpl$4","_c$2","_tmpl$5","_el$24","_tmpl$6","addClearMethod","storage","methodKeys","addWithOptionsMethod","wrapped","options2","cookiePropertyMap","serializeCookieOptions","serializedKey","deserializeCookieOptions","cookie","cookieStorage","makePersisted","signal","storageOptions","serialize","deserialize","unchanged","serialized","FreqSelector","setFrequency","secondary","setSecondary","setKey","updateKeyByFreqChange","newKey","frequencies","changeViaKey","changeViaValue","swap","swapFreq","oninput","parseFloat","onBackslash","Points","landings","landing_rate","takeoffs","takeoff_rate","formatKind","FlightItem","flight","handleDelete","fetch","method","ok","cancelQueries","setQueryData","old","selected","setSelected","callsign","spawn_at","getTime","handleSelect","FlightForm","createFlight","URLSearchParams","headers","handleSubmit","form","formData","FormData","quantity","parseInt","stagger","spawnAt","Promise","all","Array","invalidateQueries","refetchQueries","Flights","show","setShow","_tmpl$10","_tmpl$7","_tmpl$8","_tmpl$9","_el$18","App","whisper","setIsRecording","setUseTTS","getMedia","constraints","navigator","mediaDevices","getUserMedia","arrayBuffer","discardRecording","abortRecording","sendTextMessage","audio","sendPause","toggleTTS","$$mouseup","_$className","getElementById","HTMLElement","Error"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,35]}